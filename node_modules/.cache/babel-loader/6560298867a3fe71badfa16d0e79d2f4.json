{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\SERGO\\\\Desktop\\\\depo\\\\src\\\\components\\\\Forms\\\\Forms.jsx\";\nimport React, { useState, useEffect } from 'react';\nimport Table from \"@material-ui/core/Table\"; // Material ui table for usual form\n\nimport TableHead from \"@material-ui/core/TableHead\";\nimport TableRow from \"@material-ui/core/TableRow\";\nimport TableBody from \"@material-ui/core/TableBody\";\nimport TableCell from \"@material-ui/core/TableCell\";\nimport Button from '@material-ui/core/Button';\nimport { Grid } from '@material-ui/core';\nimport Paper from '@material-ui/core/Paper';\nimport TextField from '@material-ui/core/TextField'; // Icons\n\nimport ArrowUpwardIcon from '@material-ui/icons/ArrowUpward';\nimport ArrowDownwardIcon from '@material-ui/icons/ArrowDownward';\nimport LinearProgress from '@material-ui/core/LinearProgress'; // Form components\n\nimport Checkbox from '@material-ui/core/Checkbox'; // Libraries\n\nimport swal from 'sweetalert'; // https://sweetalert.js.org/guides/\n\nvar generator = require('generate-password');\n\nexport default (props => {\n  // This.state\n  const [userProfile] = useState(props.userProfile);\n  const [session_id] = useState(props.userTask.session_id);\n  const [process_id] = useState(props.userTask.process_id);\n  const [taskID] = useState(props.userTask.taskID);\n  const [selectedDoc, setSelectedDoc] = useState(null);\n  const [fieldValue, setFieldValue] = useState({});\n  const [buttons] = useState(props.userTask.buttons);\n  const [sectionColor] = useState(\"#B2E0C9\");\n  const [updateState, setUpdateState] = useState(false);\n  const [selectedRow, setSelectedRow] = useState(\"\");\n\n  const handleCheckboxEditChange = event => {\n    let contFields = fieldValue[event.target.name];\n    let newVals = {\n      edit: event.target.checked,\n      show: contFields.show,\n      required: contFields.required\n    };\n    setFieldValue({ ...fieldValue,\n      [event.target.name]: newVals\n    }); // console.log(\"FIELDVAL\", fieldValue)\n  };\n\n  const handleCheckboxShowChange = event => {\n    let contFields = fieldValue[event.target.name];\n    let newVals = {\n      edit: contFields.edit,\n      show: event.target.checked,\n      required: contFields.required\n    };\n    setFieldValue({ ...fieldValue,\n      [event.target.name]: newVals\n    });\n    console.log(\"FIELDVAL\", newVals);\n  };\n\n  const handleCheckboxRequiredChange = event => {\n    let contFields = fieldValue[event.target.name];\n    let newVals = {\n      edit: contFields.edit,\n      show: contFields.show,\n      required: event.target.checked\n    };\n    setFieldValue({ ...fieldValue,\n      [event.target.name]: newVals\n    }); // console.log(\"FIELDVAL\", fieldValue)\n  }; // Set data from props to state of component\n\n\n  useEffect(() => {\n    console.log(\"FORMS PROPS\", props);\n\n    if (props.userTask.selectedDoc !== \"null\" && props.userTask.selectedDoc !== undefined && props.userTask.selectedDoc !== null) {\n      let parsedSelectedDoc = JSON.parse(props.userTask.selectedDoc);\n\n      if (typeof parsedSelectedDoc === \"string\") {\n        parsedSelectedDoc = JSON.parse(parsedSelectedDoc);\n      }\n\n      let fields = {}; // console.log(\"SDOC\", parsedSelectedDoc)\n\n      for (let s = 0; s < parsedSelectedDoc.sections.length; s++) {\n        for (let c = 0; c < parsedSelectedDoc.sections[s].contents.length; c++) {\n          let contName = parsedSelectedDoc.sections[s].contents[c].name; // console.log(\"ITEM\", parsedSelectedDoc.sections[s].contents[c].name)\n\n          fields[contName] = {\n            edit: parsedSelectedDoc.sections[s].contents[c].edit,\n            show: parsedSelectedDoc.sections[s].contents[c].show,\n            required: parsedSelectedDoc.sections[s].contents[c].required !== undefined ? parsedSelectedDoc.sections[s].contents[c].required : false\n          };\n        }\n      } // Check form items to be checked\n\n\n      if (props.userTask.docId !== \"null\") {\n        let instructionTypeDoc = JSON.parse(props.userTask.docId);\n        console.log(\"DOC\", parsedSelectedDoc, instructionTypeDoc);\n        parsedSelectedDoc.label = parsedSelectedDoc.label + instructionTypeDoc.name;\n\n        if (instructionTypeDoc.account_from === 1) {\n          for (let s = 0; s < parsedSelectedDoc.sections.length; s++) {\n            for (let c = 0; c < parsedSelectedDoc.sections[s].contents.length; c++) {\n              let contName = parsedSelectedDoc.sections[s].contents[c].name;\n\n              if (contName === \"accFrom\") {\n                parsedSelectedDoc.sections[s].contents[c].show = true;\n                fields[contName] = {\n                  edit: parsedSelectedDoc.sections[s].contents[c].edit,\n                  show: true,\n                  required: parsedSelectedDoc.sections[s].contents[c].required !== undefined ? parsedSelectedDoc.sections[s].contents[c].required : false\n                };\n              }\n\n              if (contName === \"depositor\") {\n                parsedSelectedDoc.sections[s].contents[c].show = true;\n                fields[contName] = {\n                  edit: parsedSelectedDoc.sections[s].contents[c].edit,\n                  show: true,\n                  required: parsedSelectedDoc.sections[s].contents[c].required !== undefined ? parsedSelectedDoc.sections[s].contents[c].required : false\n                };\n              }\n            }\n          }\n        }\n\n        if (instructionTypeDoc.account_to === 1) {\n          for (let s = 0; s < parsedSelectedDoc.sections.length; s++) {\n            for (let c = 0; c < parsedSelectedDoc.sections[s].contents.length; c++) {\n              let contName = parsedSelectedDoc.sections[s].contents[c].name;\n\n              if (contName === \"accTo\") {\n                parsedSelectedDoc.sections[s].contents[c].show = true;\n                fields[contName] = {\n                  edit: parsedSelectedDoc.sections[s].contents[c].edit,\n                  show: true,\n                  required: parsedSelectedDoc.sections[s].contents[c].required !== undefined ? parsedSelectedDoc.sections[s].contents[c].required : false\n                };\n              }\n\n              if (contName === \"depositor2\") {\n                parsedSelectedDoc.sections[s].contents[c].show = true;\n                fields[contName] = {\n                  edit: parsedSelectedDoc.sections[s].contents[c].edit,\n                  show: true,\n                  required: parsedSelectedDoc.sections[s].contents[c].required !== undefined ? parsedSelectedDoc.sections[s].contents[c].required : false\n                };\n              }\n            }\n          }\n        }\n\n        if (instructionTypeDoc.corr === 1) {\n          for (let s = 0; s < parsedSelectedDoc.sections.length; s++) {\n            for (let c = 0; c < parsedSelectedDoc.sections[s].contents.length; c++) {\n              let contName = parsedSelectedDoc.sections[s].contents[c].name;\n\n              if (contName === \"corrDepository\") {\n                parsedSelectedDoc.sections[s].contents[c].show = true;\n                fields[contName] = {\n                  edit: parsedSelectedDoc.sections[s].contents[c].edit,\n                  show: true,\n                  required: parsedSelectedDoc.sections[s].contents[c].required !== undefined ? parsedSelectedDoc.sections[s].contents[c].required : false\n                };\n              }\n            }\n          }\n        }\n\n        if (instructionTypeDoc.owner === 1) {\n          for (let s = 0; s < parsedSelectedDoc.sections.length; s++) {\n            for (let c = 0; c < parsedSelectedDoc.sections[s].contents.length; c++) {\n              let contName = parsedSelectedDoc.sections[s].contents[c].name;\n\n              if (contName === \"ownerName\") {\n                parsedSelectedDoc.sections[s].contents[c].show = true;\n                fields[contName] = {\n                  edit: parsedSelectedDoc.sections[s].contents[c].edit,\n                  show: true,\n                  required: parsedSelectedDoc.sections[s].contents[c].required !== undefined ? parsedSelectedDoc.sections[s].contents[c].required : false\n                };\n              }\n\n              if (contName === \"ownerDocument\") {\n                parsedSelectedDoc.sections[s].contents[c].show = true;\n                fields[contName] = {\n                  edit: parsedSelectedDoc.sections[s].contents[c].edit,\n                  show: true,\n                  required: parsedSelectedDoc.sections[s].contents[c].required !== undefined ? parsedSelectedDoc.sections[s].contents[c].required : false\n                };\n              }\n\n              if (contName === \"ownerAddress\") {\n                parsedSelectedDoc.sections[s].contents[c].show = true;\n                fields[contName] = {\n                  edit: parsedSelectedDoc.sections[s].contents[c].edit,\n                  show: true,\n                  required: parsedSelectedDoc.sections[s].contents[c].required !== undefined ? parsedSelectedDoc.sections[s].contents[c].required : false\n                };\n              }\n            }\n          }\n        }\n\n        if (instructionTypeDoc.trade === 1) {\n          for (let s = 0; s < parsedSelectedDoc.sections.length; s++) {\n            for (let c = 0; c < parsedSelectedDoc.sections[s].contents.length; c++) {\n              let contName = parsedSelectedDoc.sections[s].contents[c].name;\n\n              if (contName === \"tradingSystem\") {\n                parsedSelectedDoc.sections[s].contents[c].show = true;\n                fields[contName] = {\n                  edit: parsedSelectedDoc.sections[s].contents[c].edit,\n                  show: true,\n                  required: parsedSelectedDoc.sections[s].contents[c].required !== undefined ? parsedSelectedDoc.sections[s].contents[c].required : false\n                };\n              }\n            }\n          }\n        }\n\n        if (instructionTypeDoc.it_base === 1) {\n          for (let s = 0; s < parsedSelectedDoc.sections.length; s++) {\n            for (let c = 0; c < parsedSelectedDoc.sections[s].contents.length; c++) {\n              let contName = parsedSelectedDoc.sections[s].contents[c].name;\n\n              if (contName === \"security\") {\n                parsedSelectedDoc.sections[s].contents[c].show = true;\n                fields[contName] = {\n                  edit: parsedSelectedDoc.sections[s].contents[c].edit,\n                  show: true,\n                  required: parsedSelectedDoc.sections[s].contents[c].required !== undefined ? parsedSelectedDoc.sections[s].contents[c].required : false\n                };\n              }\n\n              if (contName === \"issuer\") {\n                parsedSelectedDoc.sections[s].contents[c].show = true;\n                fields[contName] = {\n                  edit: parsedSelectedDoc.sections[s].contents[c].edit,\n                  show: true,\n                  required: parsedSelectedDoc.sections[s].contents[c].required !== undefined ? parsedSelectedDoc.sections[s].contents[c].required : false\n                };\n              }\n            }\n          }\n        }\n\n        if (instructionTypeDoc.it_base === 2) {\n          for (let s = 0; s < parsedSelectedDoc.sections.length; s++) {\n            for (let c = 0; c < parsedSelectedDoc.sections[s].contents.length; c++) {\n              let contName = parsedSelectedDoc.sections[s].contents[c].name;\n\n              if (contName === \"currency\") {\n                parsedSelectedDoc.sections[s].contents[c].show = true;\n                fields[contName] = {\n                  edit: parsedSelectedDoc.sections[s].contents[c].edit,\n                  show: true,\n                  required: parsedSelectedDoc.sections[s].contents[c].required !== undefined ? parsedSelectedDoc.sections[s].contents[c].required : false\n                };\n              }\n\n              if (contName === \"quantity\") {\n                parsedSelectedDoc.sections[s].contents[c].show = true;\n                fields[contName] = {\n                  edit: parsedSelectedDoc.sections[s].contents[c].edit,\n                  show: true,\n                  required: parsedSelectedDoc.sections[s].contents[c].required !== undefined ? parsedSelectedDoc.sections[s].contents[c].required : false\n                };\n              }\n            }\n          }\n        }\n      }\n\n      setFieldValue(fields);\n      setSelectedDoc(parsedSelectedDoc);\n    }\n\n    setUpdateState(getUUID());\n  }, []); // random UUID generator\n\n  function getUUID() {\n    const uuidv1 = require(\"uuid/v1\");\n\n    return uuidv1();\n  } // random numbers generator\n\n\n  function keyGen(length) {\n    var password = generator.generate({\n      length: length,\n      numbers: true\n    });\n    return password;\n  } // Collect data to update doc\n\n\n  function getFieldValuesCreateUpdateForm() {\n    let formToUpdate = selectedDoc;\n\n    for (let s = 0; s < selectedDoc.sections.length; s++) {\n      for (let c = 0; c < selectedDoc.sections[s].contents.length; c++) {\n        let contName = selectedDoc.sections[s].contents[c].name;\n        formToUpdate.sections[s].contents[c].edit = fieldValue[contName].edit;\n        formToUpdate.sections[s].contents[c].show = fieldValue[contName].show;\n        formToUpdate.sections[s].contents[c].required = fieldValue[contName].required;\n      }\n    }\n\n    return formToUpdate;\n  }\n\n  function buttonClick(name, item) {\n    if (name === \"updateDocument\") {\n      let form = getFieldValuesCreateUpdateForm();\n      let updateBody = {\n        \"defid\": selectedDoc.defid,\n        \"created_at\": selectedDoc.created_at,\n        \"data\": JSON.stringify(form)\n      };\n      let commandJson = {\n        commandType: \"completeTask\",\n        session_id: session_id,\n        process_id: process_id,\n        taskID: taskID,\n        userId: userProfile.userId,\n        userRole: userProfile.userRole,\n        variables: {\n          userAction: {\n            value: \"updateDocument\"\n          },\n          document: {\n            value: JSON.stringify(updateBody)\n          }\n        }\n      };\n      console.log(\"updateForm:\", form);\n      props.sendFieldValues(commandJson);\n      props.clearTabData(process_id);\n    } else if (name === \"showInstructionTypeEditForm\") {\n      let defid = getUUID();\n      let form = getFieldValuesCreateUpdateForm();\n      form.defid = defid;\n      let createBody = {\n        \"defid\": defid,\n        \"data\": JSON.stringify(form)\n      };\n      let commandJson = {\n        commandType: \"completeTask\",\n        session_id: session_id,\n        process_id: process_id,\n        taskID: taskID,\n        userId: userProfile.userId,\n        userRole: userProfile.userRole,\n        variables: {\n          userAction: {\n            value: \"showInstructionTypeEditForm\"\n          },\n          instructionTypeCreateFormDefId: {\n            value: defid\n          },\n          instructionTypeCreateFormBody: {\n            value: JSON.stringify(createBody)\n          }\n        }\n      };\n      console.log(\"showInstructionTypeEditForm:\", commandJson);\n      props.sendFieldValues(commandJson);\n    } else if (name === \"saveInstructionType\") {\n      let defid = getUUID();\n      let form = getFieldValuesCreateUpdateForm();\n      form.defid = defid;\n      let createBody = {\n        \"defid\": defid,\n        \"data\": JSON.stringify(form)\n      };\n      let commandJson = {\n        commandType: \"completeTask\",\n        session_id: session_id,\n        process_id: process_id,\n        taskID: taskID,\n        userId: userProfile.userId,\n        userRole: userProfile.userRole,\n        variables: {\n          userAction: {\n            value: \"saveInstructionType\"\n          },\n          instructionTypeEditFormDefId: {\n            value: defid\n          },\n          instructionTypeEditFormBody: {\n            value: JSON.stringify(createBody)\n          }\n        }\n      };\n      console.log(\"saveInstructionType:\", commandJson);\n      props.sendFieldValues(commandJson);\n    } else if (name === \"back\") {\n      let commandJson = {\n        commandType: \"completeTask\",\n        session_id: session_id,\n        process_id: process_id,\n        taskID: taskID,\n        userId: userProfile.userId,\n        userRole: userProfile.userRole,\n        variables: {\n          userAction: {\n            value: \"back\"\n          }\n        }\n      };\n      console.log(\"button back:\", commandJson);\n      props.sendFieldValues(commandJson);\n      props.clearTabData(process_id);\n    } else if (name === \"cancel\") {\n      const commandJson = {\n        commandType: \"completeTask\",\n        process_id: process_id,\n        session_id: session_id,\n        taskID: taskID,\n        userRole: userProfile.userRole,\n        variables: {\n          authorization: {\n            value: \"token\"\n          },\n          userAction: {\n            value: \"cancel\"\n          }\n        }\n      };\n      console.log(\"button cancel: \", commandJson);\n      props.sendFieldValues(commandJson);\n      props.clearTabData(process_id);\n    } else {\n      console.log(\"UNKNOWN Button \", name);\n    }\n  }\n\n  function handleFormLabelChange(event) {\n    selectedDoc.label = event.target.value;\n    setSelectedDoc(selectedDoc);\n  }\n\n  function handleSectionLabelChange(event) {\n    for (let s = 0; s < selectedDoc.sections.length; s++) {\n      if (event.target.name === selectedDoc.sections[s].name) {\n        selectedDoc.sections[s].label = event.target.value;\n        setSelectedDoc(selectedDoc);\n        break;\n      }\n    }\n\n    console.log(\"SECT LABEL\", selectedDoc);\n  } // Pick up selected row\n\n\n  function contentItemArrowUpClick(itemName) {\n    for (let s = 0; s < selectedDoc.sections.length; s++) {\n      for (let c = 0; c < selectedDoc.sections[s].contents.length; c++) {\n        if (selectedDoc.sections[s].contents[c].name === itemName) {\n          if (c > 0) {\n            let prevItem = selectedDoc.sections[s].contents[c - 1];\n            let currItem = selectedDoc.sections[s].contents[c];\n            selectedDoc.sections[s].contents[c - 1] = currItem;\n            selectedDoc.sections[s].contents[c] = prevItem; // console.log(\"UP\", selectedDoc.sections[s].contents[c])\n\n            break;\n          }\n        }\n      }\n    }\n\n    setUpdateState(getUUID());\n  } // Put down selected row\n\n\n  function contentItemArrowDownClick(itemName) {\n    for (let s = 0; s < selectedDoc.sections.length; s++) {\n      for (let c = 0; c < selectedDoc.sections[s].contents.length; c++) {\n        if (selectedDoc.sections[s].contents[c].name === itemName) {\n          if (c < selectedDoc.sections[s].contents.length - 1) {\n            let nextItem = selectedDoc.sections[s].contents[c + 1];\n            let currItem = selectedDoc.sections[s].contents[c];\n            selectedDoc.sections[s].contents[c + 1] = currItem;\n            selectedDoc.sections[s].contents[c] = nextItem; // console.log(\"DOWN\", selectedDoc.sections[s].contents[c])\n\n            break;\n          }\n        }\n      }\n    }\n\n    setUpdateState(getUUID());\n  } // Create sections with labels and call bodyBuilder function\n\n\n  function sectionBuilder(section) {\n    return /*#__PURE__*/React.createElement(Table, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 444,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Table, {\n      size: \"small\",\n      key: keyGen(5),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 445,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(TableHead, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 446,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(TableRow, {\n      style: {\n        height: 30\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 447,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(TableCell, {\n      key: keyGen(5),\n      style: {\n        color: \"black\",\n        fontSize: 14,\n        backgroundColor: sectionColor,\n        width: \"100%\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 448,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(TextField, {\n      name: section.name,\n      onBlur: handleSectionLabelChange,\n      style: {\n        \"width\": \"50%\"\n      },\n      defaultValue: section.label,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 456,\n        columnNumber: 19\n      }\n    }))))), section.contents.length > 0 && bodyBuilder(section));\n  }\n\n  function rowSelected(rowName) {\n    setSelectedRow(rowName); // console.log(\"rowSelected\", rowName)\n  } // Create body of each section and call contentBuilder function\n\n\n  function bodyBuilder(section) {\n    return /*#__PURE__*/React.createElement(Table, {\n      size: \"small\",\n      style: {\n        \"border-collapse\": \"collapse\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 480,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(TableHead, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 481,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(TableRow, {\n      key: keyGen(5),\n      style: {\n        height: 30\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 482,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(TableCell, {\n      key: keyGen(5),\n      align: \"left\",\n      style: {\n        height: 30,\n        border: \"1px solid grey\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 483,\n        columnNumber: 13\n      }\n    }, \"\\u041D\\u0430\\u0438\\u043C\\u0435\\u043D\\u043E\\u0432\\u0430\\u043D\\u0438\\u0435\"), /*#__PURE__*/React.createElement(TableCell, {\n      key: keyGen(5),\n      align: \"left\",\n      style: {\n        height: 30,\n        border: \"1px solid grey\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 489,\n        columnNumber: 13\n      }\n    }, \"\\u0422\\u0438\\u043F\"), /*#__PURE__*/React.createElement(TableCell, {\n      key: keyGen(5),\n      align: \"left\",\n      style: {\n        height: 30,\n        border: \"1px solid grey\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 496,\n        columnNumber: 13\n      }\n    }, \"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u0443\\u0435\\u043C\\u043E\\u0435\"), /*#__PURE__*/React.createElement(TableCell, {\n      key: keyGen(5),\n      align: \"left\",\n      style: {\n        height: 30,\n        border: \"1px solid grey\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 503,\n        columnNumber: 13\n      }\n    }, \"\\u041E\\u0442\\u043E\\u0431\\u0440\\u0430\\u0436\\u0430\\u0435\\u043C\\u043E\\u0435\"), /*#__PURE__*/React.createElement(TableCell, {\n      key: keyGen(5),\n      align: \"left\",\n      style: {\n        height: 30,\n        border: \"1px solid grey\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 510,\n        columnNumber: 13\n      }\n    }, \"\\u041E\\u0431\\u044F\\u0437\\u044F\\u0442\\u0435\\u043B\\u044C\\u043D\\u043E\\u0435\"), /*#__PURE__*/React.createElement(TableCell, {\n      key: keyGen(5),\n      align: \"left\",\n      style: {\n        height: 30,\n        border: \"1px solid grey\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 517,\n        columnNumber: 13\n      }\n    }, \"\\u041F\\u043E\\u0440\\u044F\\u0434\\u043E\\u043A\"))), /*#__PURE__*/React.createElement(TableBody, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 526,\n        columnNumber: 9\n      }\n    }, section.contents.map(contentItem => /*#__PURE__*/React.createElement(TableRow, {\n      key: keyGen(5),\n      style: {\n        height: 30,\n        backgroundColor: selectedRow === contentItem.name ? \"#B8E9F8\" : \"white\"\n      },\n      onClick: () => rowSelected(contentItem.name),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 528,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(TableCell, {\n      key: keyGen(5),\n      align: \"center\",\n      style: {\n        height: 30,\n        border: \"1px solid grey\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 529,\n        columnNumber: 15\n      }\n    }, contentItem.label), /*#__PURE__*/React.createElement(TableCell, {\n      key: keyGen(5),\n      align: \"center\",\n      style: {\n        height: 30,\n        border: \"1px solid grey\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 535,\n        columnNumber: 15\n      }\n    }, contentItem.type), /*#__PURE__*/React.createElement(TableCell, {\n      key: keyGen(5),\n      align: \"center\",\n      style: {\n        height: 30,\n        border: \"1px solid grey\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 542,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Checkbox, {\n      key: keyGen(5),\n      style: {\n        maxWidth: 20,\n        height: 15,\n        color: \"green\"\n      },\n      name: contentItem.name,\n      onChange: handleCheckboxEditChange,\n      checked: fieldValue[contentItem.name].edit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 547,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(TableCell, {\n      key: keyGen(5),\n      align: \"center\",\n      style: {\n        height: 30,\n        border: \"1px solid grey\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 555,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Checkbox, {\n      key: keyGen(5),\n      style: {\n        maxWidth: 20,\n        height: 15,\n        color: \"green\"\n      },\n      name: contentItem.name,\n      onChange: handleCheckboxShowChange,\n      checked: fieldValue[contentItem.name].show,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 560,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(TableCell, {\n      key: keyGen(5),\n      align: \"center\",\n      style: {\n        height: 30,\n        border: \"1px solid grey\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 568,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Checkbox, {\n      key: keyGen(5),\n      style: {\n        maxWidth: 20,\n        height: 15,\n        color: \"green\"\n      },\n      name: contentItem.name,\n      onChange: handleCheckboxRequiredChange,\n      checked: fieldValue[contentItem.name].required,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 573,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(TableCell, {\n      key: keyGen(5),\n      align: \"center\",\n      style: {\n        height: 30,\n        border: \"1px solid grey\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 581,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Grid, {\n      container: true,\n      direction: \"row\",\n      justify: \"space-around\",\n      alignItems: \"center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 586,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(ArrowUpwardIcon, {\n      fontSize: \"middle\",\n      style: {\n        color: \"green\"\n      },\n      onClick: () => contentItemArrowUpClick(contentItem.name),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 587,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(ArrowDownwardIcon, {\n      fontSize: \"middle\",\n      style: {\n        color: \"orange\"\n      },\n      onClick: () => contentItemArrowDownClick(contentItem.name),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 588,\n        columnNumber: 19\n      }\n    })))))));\n  }\n\n  if (updateState !== null && selectedDoc !== null) {\n    try {\n      return /*#__PURE__*/React.createElement(Grid, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 601,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Grid, {\n        container: true,\n        direction: \"row\",\n        justify: \"flex-start\",\n        spacing: 1,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 603,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Grid, {\n        item: true,\n        xs: 10,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 604,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Paper, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 605,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(Table, {\n        style: {\n          \"border-collapse\": \"collapse\",\n          \"align\": \"center\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 606,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(TableHead, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 607,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(TableRow, {\n        style: {\n          \"maxHeight\": 25\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 608,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(TableCell, {\n        style: {\n          \"fontSize\": 16,\n          \"color\": \"black\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 609,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(TextField, {\n        onBlur: handleFormLabelChange,\n        style: {\n          \"width\": \"80%\"\n        },\n        defaultValue: selectedDoc.label,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 610,\n          columnNumber: 27\n        }\n      })))), /*#__PURE__*/React.createElement(Grid, {\n        container: true,\n        direction: \"row\",\n        justify: \"center\",\n        alignItems: \"center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 618,\n          columnNumber: 19\n        }\n      }, selectedDoc.sections.map(section => {\n        return sectionBuilder(section);\n      })), /*#__PURE__*/React.createElement(Grid, {\n        container: true,\n        direction: \"row\",\n        justify: \"flex-start\",\n        alignItems: \"flex-start\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 623,\n          columnNumber: 19\n        }\n      }, buttons.map((button, index) => /*#__PURE__*/React.createElement(Button, {\n        key: index,\n        name: button.name,\n        variant: \"outlined\",\n        onClick: () => buttonClick(button.name, null),\n        style: {\n          margin: 3,\n          color: button.fontColor,\n          backgroundColor: button.backgroundColor,\n          height: 32,\n          fontSize: 12\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 625,\n          columnNumber: 23\n        }\n      }, button.label))))))));\n    } catch (er) {\n      console.log(\"ERROR\", er);\n      return /*#__PURE__*/React.createElement(LinearProgress, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 651,\n          columnNumber: 14\n        }\n      });\n    }\n  } else {\n    return /*#__PURE__*/React.createElement(LinearProgress, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 654,\n        columnNumber: 15\n      }\n    });\n  }\n});","map":{"version":3,"names":["React","useState","useEffect","Table","TableHead","TableRow","TableBody","TableCell","Button","Grid","Paper","TextField","ArrowUpwardIcon","ArrowDownwardIcon","LinearProgress","Checkbox","swal","generator","require","props","userProfile","session_id","userTask","process_id","taskID","selectedDoc","setSelectedDoc","fieldValue","setFieldValue","buttons","sectionColor","updateState","setUpdateState","selectedRow","setSelectedRow","handleCheckboxEditChange","event","contFields","target","name","newVals","edit","checked","show","required","handleCheckboxShowChange","console","log","handleCheckboxRequiredChange","undefined","parsedSelectedDoc","JSON","parse","fields","s","sections","length","c","contents","contName","docId","instructionTypeDoc","label","account_from","account_to","corr","owner","trade","it_base","getUUID","uuidv1","keyGen","password","generate","numbers","getFieldValuesCreateUpdateForm","formToUpdate","buttonClick","item","form","updateBody","defid","created_at","stringify","commandJson","commandType","userId","userRole","variables","userAction","value","document","sendFieldValues","clearTabData","createBody","instructionTypeCreateFormDefId","instructionTypeCreateFormBody","instructionTypeEditFormDefId","instructionTypeEditFormBody","authorization","handleFormLabelChange","handleSectionLabelChange","contentItemArrowUpClick","itemName","prevItem","currItem","contentItemArrowDownClick","nextItem","sectionBuilder","section","height","color","fontSize","backgroundColor","width","bodyBuilder","rowSelected","rowName","border","map","contentItem","type","maxWidth","button","index","margin","fontColor","er"],"sources":["C:/Users/SERGO/Desktop/depo/src/components/Forms/Forms.jsx"],"sourcesContent":["import React, {useState, useEffect} from 'react';\nimport Table from \"@material-ui/core/Table\"; // Material ui table for usual form\nimport TableHead from \"@material-ui/core/TableHead\";\nimport TableRow from \"@material-ui/core/TableRow\";\nimport TableBody from \"@material-ui/core/TableBody\";\nimport TableCell from \"@material-ui/core/TableCell\";\nimport Button from '@material-ui/core/Button';\nimport { Grid } from '@material-ui/core';\nimport Paper from '@material-ui/core/Paper';\nimport TextField from '@material-ui/core/TextField';\n// Icons\nimport ArrowUpwardIcon from '@material-ui/icons/ArrowUpward';\nimport ArrowDownwardIcon from '@material-ui/icons/ArrowDownward';\nimport LinearProgress from '@material-ui/core/LinearProgress';\n// Form components\nimport Checkbox from '@material-ui/core/Checkbox';\n// Libraries\nimport swal from 'sweetalert' // https://sweetalert.js.org/guides/\n\nvar generator = require('generate-password');\n\nexport default (props) => {\n    // This.state\n  const [userProfile] = useState(props.userProfile)\n  const [session_id] = useState(props.userTask.session_id)\n  const [process_id] = useState(props.userTask.process_id)\n  const [taskID] = useState(props.userTask.taskID)\n  const [selectedDoc, setSelectedDoc] = useState(null)\n  const [fieldValue, setFieldValue] = useState({})\n  const [buttons] = useState(props.userTask.buttons)\n  const [sectionColor] = useState(\"#B2E0C9\")\n  const [updateState, setUpdateState] = useState(false)\n  const [selectedRow, setSelectedRow] = useState(\"\")\n  \n  const handleCheckboxEditChange = (event) => {\n    let contFields = fieldValue[event.target.name]\n    let newVals = {\n      edit: event.target.checked,\n      show: contFields.show,\n      required: contFields.required\n    }\n    setFieldValue({ ...fieldValue, [event.target.name]: newVals})\n    // console.log(\"FIELDVAL\", fieldValue)\n  }\n  const handleCheckboxShowChange = (event) => {\n    let contFields = fieldValue[event.target.name]\n    let newVals = {\n      edit: contFields.edit,\n      show: event.target.checked,\n      required: contFields.required\n    }\n    setFieldValue({ ...fieldValue, [event.target.name]: newVals})\n    console.log(\"FIELDVAL\", newVals)\n  }\n  const handleCheckboxRequiredChange = (event) => {\n    let contFields = fieldValue[event.target.name]\n    let newVals = {\n      edit: contFields.edit,\n      show: contFields.show,\n      required: event.target.checked\n    }\n    setFieldValue({ ...fieldValue, [event.target.name]: newVals})\n    // console.log(\"FIELDVAL\", fieldValue)\n  }\n  // Set data from props to state of component\n  useEffect(()=>{\n    console.log(\"FORMS PROPS\", props)\n    if(props.userTask.selectedDoc !== \"null\" && props.userTask.selectedDoc !== undefined && props.userTask.selectedDoc !== null){\n      let parsedSelectedDoc = JSON.parse(props.userTask.selectedDoc)\n      if(typeof parsedSelectedDoc === \"string\"){\n        parsedSelectedDoc = JSON.parse(parsedSelectedDoc)\n      }\n      let fields = {}\n      // console.log(\"SDOC\", parsedSelectedDoc)\n      for(let s=0; s<parsedSelectedDoc.sections.length; s++){\n        for(let c=0; c<parsedSelectedDoc.sections[s].contents.length; c++){\n          let contName = parsedSelectedDoc.sections[s].contents[c].name\n          // console.log(\"ITEM\", parsedSelectedDoc.sections[s].contents[c].name)\n          fields[contName] = {\n            edit: parsedSelectedDoc.sections[s].contents[c].edit,\n            show: parsedSelectedDoc.sections[s].contents[c].show,\n            required: parsedSelectedDoc.sections[s].contents[c].required !== undefined ? parsedSelectedDoc.sections[s].contents[c].required : false\n          }\n        }\n      }\n      // Check form items to be checked\n      if(props.userTask.docId !== \"null\"){\n        let instructionTypeDoc = JSON.parse(props.userTask.docId)\n        console.log(\"DOC\", parsedSelectedDoc, instructionTypeDoc)\n        parsedSelectedDoc.label = parsedSelectedDoc.label + instructionTypeDoc.name\n        if(instructionTypeDoc.account_from === 1){\n          for(let s=0; s<parsedSelectedDoc.sections.length; s++){\n            for(let c=0; c<parsedSelectedDoc.sections[s].contents.length; c++){\n              let contName = parsedSelectedDoc.sections[s].contents[c].name\n              if(contName === \"accFrom\"){\n                parsedSelectedDoc.sections[s].contents[c].show = true\n                fields[contName] = {\n                  edit: parsedSelectedDoc.sections[s].contents[c].edit,\n                  show: true,\n                  required: parsedSelectedDoc.sections[s].contents[c].required !== undefined ? parsedSelectedDoc.sections[s].contents[c].required : false\n                }\n              }\n              if(contName === \"depositor\"){\n                parsedSelectedDoc.sections[s].contents[c].show = true\n                fields[contName] = {\n                  edit: parsedSelectedDoc.sections[s].contents[c].edit,\n                  show: true,\n                  required: parsedSelectedDoc.sections[s].contents[c].required !== undefined ? parsedSelectedDoc.sections[s].contents[c].required : false\n                }\n              }\n            }\n          }\n        }\n        if(instructionTypeDoc.account_to === 1){\n          for(let s=0; s<parsedSelectedDoc.sections.length; s++){\n            for(let c=0; c<parsedSelectedDoc.sections[s].contents.length; c++){\n              let contName = parsedSelectedDoc.sections[s].contents[c].name\n              if(contName === \"accTo\"){\n                parsedSelectedDoc.sections[s].contents[c].show = true\n                fields[contName] = {\n                  edit: parsedSelectedDoc.sections[s].contents[c].edit,\n                  show: true,\n                  required: parsedSelectedDoc.sections[s].contents[c].required !== undefined ? parsedSelectedDoc.sections[s].contents[c].required : false\n                }\n              }\n              if(contName === \"depositor2\"){\n                parsedSelectedDoc.sections[s].contents[c].show = true\n                fields[contName] = {\n                  edit: parsedSelectedDoc.sections[s].contents[c].edit,\n                  show: true,\n                  required: parsedSelectedDoc.sections[s].contents[c].required !== undefined ? parsedSelectedDoc.sections[s].contents[c].required : false\n                }\n              }\n            }\n          }\n        }\n        if(instructionTypeDoc.corr === 1){\n          for(let s=0; s<parsedSelectedDoc.sections.length; s++){\n            for(let c=0; c<parsedSelectedDoc.sections[s].contents.length; c++){\n              let contName = parsedSelectedDoc.sections[s].contents[c].name\n              if(contName === \"corrDepository\"){\n                parsedSelectedDoc.sections[s].contents[c].show = true\n                fields[contName] = {\n                  edit: parsedSelectedDoc.sections[s].contents[c].edit,\n                  show: true,\n                  required: parsedSelectedDoc.sections[s].contents[c].required !== undefined ? parsedSelectedDoc.sections[s].contents[c].required : false\n                }\n              }\n            }\n          }\n        }\n        if(instructionTypeDoc.owner === 1){\n          for(let s=0; s<parsedSelectedDoc.sections.length; s++){\n            for(let c=0; c<parsedSelectedDoc.sections[s].contents.length; c++){\n              let contName = parsedSelectedDoc.sections[s].contents[c].name\n              if(contName === \"ownerName\"){\n                parsedSelectedDoc.sections[s].contents[c].show = true\n                fields[contName] = {\n                  edit: parsedSelectedDoc.sections[s].contents[c].edit,\n                  show: true,\n                  required: parsedSelectedDoc.sections[s].contents[c].required !== undefined ? parsedSelectedDoc.sections[s].contents[c].required : false\n                }\n              }\n              if(contName === \"ownerDocument\"){\n                parsedSelectedDoc.sections[s].contents[c].show = true\n                fields[contName] = {\n                  edit: parsedSelectedDoc.sections[s].contents[c].edit,\n                  show: true,\n                  required: parsedSelectedDoc.sections[s].contents[c].required !== undefined ? parsedSelectedDoc.sections[s].contents[c].required : false\n                }\n              }\n              if(contName === \"ownerAddress\"){\n                parsedSelectedDoc.sections[s].contents[c].show = true\n                fields[contName] = {\n                  edit: parsedSelectedDoc.sections[s].contents[c].edit,\n                  show: true,\n                  required: parsedSelectedDoc.sections[s].contents[c].required !== undefined ? parsedSelectedDoc.sections[s].contents[c].required : false\n                }\n              }\n            }\n          }\n        }\n        if(instructionTypeDoc.trade === 1){\n          for(let s=0; s<parsedSelectedDoc.sections.length; s++){\n            for(let c=0; c<parsedSelectedDoc.sections[s].contents.length; c++){\n              let contName = parsedSelectedDoc.sections[s].contents[c].name\n              if(contName === \"tradingSystem\"){\n                parsedSelectedDoc.sections[s].contents[c].show = true\n                fields[contName] = {\n                  edit: parsedSelectedDoc.sections[s].contents[c].edit,\n                  show: true,\n                  required: parsedSelectedDoc.sections[s].contents[c].required !== undefined ? parsedSelectedDoc.sections[s].contents[c].required : false\n                }\n              }\n            }\n          }\n        }\n        if(instructionTypeDoc.it_base === 1){\n          for(let s=0; s<parsedSelectedDoc.sections.length; s++){\n            for(let c=0; c<parsedSelectedDoc.sections[s].contents.length; c++){\n              let contName = parsedSelectedDoc.sections[s].contents[c].name\n              if(contName === \"security\"){\n                parsedSelectedDoc.sections[s].contents[c].show = true\n                fields[contName] = {\n                  edit: parsedSelectedDoc.sections[s].contents[c].edit,\n                  show: true,\n                  required: parsedSelectedDoc.sections[s].contents[c].required !== undefined ? parsedSelectedDoc.sections[s].contents[c].required : false\n                }\n              }\n              if(contName === \"issuer\"){\n                parsedSelectedDoc.sections[s].contents[c].show = true\n                fields[contName] = {\n                  edit: parsedSelectedDoc.sections[s].contents[c].edit,\n                  show: true,\n                  required: parsedSelectedDoc.sections[s].contents[c].required !== undefined ? parsedSelectedDoc.sections[s].contents[c].required : false\n                }\n              }\n            }\n          }\n        }\n        if(instructionTypeDoc.it_base === 2){\n          for(let s=0; s<parsedSelectedDoc.sections.length; s++){\n            for(let c=0; c<parsedSelectedDoc.sections[s].contents.length; c++){\n              let contName = parsedSelectedDoc.sections[s].contents[c].name\n              if(contName === \"currency\"){\n                parsedSelectedDoc.sections[s].contents[c].show = true\n                fields[contName] = {\n                  edit: parsedSelectedDoc.sections[s].contents[c].edit,\n                  show: true,\n                  required: parsedSelectedDoc.sections[s].contents[c].required !== undefined ? parsedSelectedDoc.sections[s].contents[c].required : false\n                }\n              }\n              if(contName === \"quantity\"){\n                parsedSelectedDoc.sections[s].contents[c].show = true\n                fields[contName] = {\n                  edit: parsedSelectedDoc.sections[s].contents[c].edit,\n                  show: true,\n                  required: parsedSelectedDoc.sections[s].contents[c].required !== undefined ? parsedSelectedDoc.sections[s].contents[c].required : false\n                }\n              }\n            }\n          }\n        }\n      } \n      setFieldValue(fields)\n      setSelectedDoc(parsedSelectedDoc)\n    }\n    setUpdateState(getUUID())\n  },[])\n\n  // random UUID generator\n  function getUUID() {\n    const uuidv1 = require(\"uuid/v1\")\n    return uuidv1()\n  }\n  // random numbers generator\n  function keyGen(length){\n    var password = generator.generate({\n      length: length,\n      numbers: true\n    })\n    return password\n  }\n  // Collect data to update doc\n  function getFieldValuesCreateUpdateForm(){\n    let formToUpdate = selectedDoc\n    for(let s=0; s<selectedDoc.sections.length; s++){\n      for(let c=0; c<selectedDoc.sections[s].contents.length; c++){\n        let contName = selectedDoc.sections[s].contents[c].name\n        formToUpdate.sections[s].contents[c].edit = fieldValue[contName].edit\n        formToUpdate.sections[s].contents[c].show = fieldValue[contName].show\n        formToUpdate.sections[s].contents[c].required = fieldValue[contName].required\n      }\n    }\n    return formToUpdate\n  }\n  function buttonClick(name, item){      \n    if(name === \"updateDocument\"){\n      let form = getFieldValuesCreateUpdateForm()\n      let updateBody = {\n        \"defid\": selectedDoc.defid,\n        \"created_at\": selectedDoc.created_at,\n        \"data\": JSON.stringify(form)\n      }\n      let commandJson = \n      {\n        commandType: \"completeTask\",\n        session_id: session_id,\n        process_id: process_id,\n        taskID: taskID,\n        userId: userProfile.userId,\n        userRole: userProfile.userRole,\n        variables: {\n          userAction: {value: \"updateDocument\"},\n          document: {value: JSON.stringify(updateBody)}\n        }\n      }\n      console.log(\"updateForm:\", form)\n      props.sendFieldValues(commandJson)\n      props.clearTabData(process_id)\n    }\n    else if(name === \"showInstructionTypeEditForm\"){\n      let defid = getUUID()\n      let form = getFieldValuesCreateUpdateForm()\n      form.defid = defid\n      let createBody = {\n        \"defid\": defid,\n        \"data\": JSON.stringify(form)\n      }\n      let commandJson = \n      {\n        commandType: \"completeTask\",\n        session_id: session_id,\n        process_id: process_id,\n        taskID: taskID,\n        userId: userProfile.userId,\n        userRole: userProfile.userRole,\n        variables: {\n          userAction: {value: \"showInstructionTypeEditForm\"},\n          instructionTypeCreateFormDefId: {value: defid},\n          instructionTypeCreateFormBody: {value: JSON.stringify(createBody)}\n        }\n      }\n      console.log(\"showInstructionTypeEditForm:\", commandJson)\n      props.sendFieldValues(commandJson)\n    }\n    else if(name === \"saveInstructionType\"){\n      let defid = getUUID()\n      let form = getFieldValuesCreateUpdateForm()\n      form.defid = defid\n      let createBody = {\n        \"defid\": defid,\n        \"data\": JSON.stringify(form)\n      }\n      let commandJson = \n      {\n        commandType: \"completeTask\",\n        session_id: session_id,\n        process_id: process_id,\n        taskID: taskID,\n        userId: userProfile.userId,\n        userRole: userProfile.userRole,\n        variables: {\n          userAction: {value: \"saveInstructionType\"},\n          instructionTypeEditFormDefId: {value: defid},\n          instructionTypeEditFormBody: {value: JSON.stringify(createBody)}\n        }\n      }\n      console.log(\"saveInstructionType:\", commandJson)\n      props.sendFieldValues(commandJson)\n    }\n    else if (name === \"back\"){\n      let commandJson = \n      {\n        commandType: \"completeTask\",\n        session_id: session_id,\n        process_id: process_id,\n        taskID: taskID,\n        userId: userProfile.userId,\n        userRole: userProfile.userRole,\n        variables: {\n          userAction: {value: \"back\"},\n        }\n      }\n      console.log(\"button back:\", commandJson)\n      props.sendFieldValues(commandJson)\n      props.clearTabData(process_id)\n    }\n    else if(name === \"cancel\"){\n      const commandJson = \n      {\n        commandType: \"completeTask\",\n        process_id: process_id,\n        session_id: session_id,\n        taskID: taskID,\n        userRole: userProfile.userRole,\n        variables: {\n          authorization: {value: \"token\"},\n          userAction: {value: \"cancel\"},\n        }\n      }\n      console.log(\"button cancel: \", commandJson)\n      props.sendFieldValues(commandJson)\n      props.clearTabData(process_id)\n    }\n    else{\n      console.log(\"UNKNOWN Button \", name)\n    }\n  }\n  function handleFormLabelChange(event){\n    selectedDoc.label = event.target.value\n    setSelectedDoc(selectedDoc)\n  }\n  function handleSectionLabelChange(event){\n    for(let s=0; s<selectedDoc.sections.length; s++){\n      if(event.target.name === selectedDoc.sections[s].name){\n        selectedDoc.sections[s].label = event.target.value\n        setSelectedDoc(selectedDoc)\n        break\n      }\n    }\n    console.log(\"SECT LABEL\", selectedDoc)\n  }\n  \n  // Pick up selected row\n  function contentItemArrowUpClick(itemName){\n    for(let s=0; s<selectedDoc.sections.length; s++){\n      for(let c=0; c<selectedDoc.sections[s].contents.length; c++){\n        if(selectedDoc.sections[s].contents[c].name === itemName){\n          if(c>0){\n            let prevItem = selectedDoc.sections[s].contents[c-1]\n            let currItem = selectedDoc.sections[s].contents[c]\n            selectedDoc.sections[s].contents[c-1] = currItem\n            selectedDoc.sections[s].contents[c] = prevItem\n            // console.log(\"UP\", selectedDoc.sections[s].contents[c])\n            break\n          }\n        }\n      }\n    }\n    setUpdateState(getUUID())\n  }\n  // Put down selected row\n  function contentItemArrowDownClick(itemName){\n    for(let s=0; s<selectedDoc.sections.length; s++){\n      for(let c=0; c<selectedDoc.sections[s].contents.length; c++){\n        if(selectedDoc.sections[s].contents[c].name === itemName){\n          if(c<selectedDoc.sections[s].contents.length-1){\n            let nextItem = selectedDoc.sections[s].contents[c+1]\n            let currItem = selectedDoc.sections[s].contents[c]\n            selectedDoc.sections[s].contents[c+1] = currItem\n            selectedDoc.sections[s].contents[c] = nextItem\n            // console.log(\"DOWN\", selectedDoc.sections[s].contents[c])\n            break\n          }\n        }\n      }\n    }\n    setUpdateState(getUUID())\n  }\n  // Create sections with labels and call bodyBuilder function\n  function sectionBuilder(section){\n    return (\n      <Table>\n        <Table size=\"small\" key={keyGen(5)}>\n          <TableHead>\n            <TableRow style={{height: 30}}>\n              <TableCell\n                key={keyGen(5)}\n                style={{\n                  color: \"black\",\n                  fontSize: 14,\n                  backgroundColor: sectionColor,\n                  width: \"100%\"\n                }}>\n                  <TextField\n                    name = {section.name}\n                    onBlur = {handleSectionLabelChange}\n                    style={{\"width\": \"50%\"}}\n                    defaultValue = {section.label}\n                  />\n                  {/* {section.label} */}\n              </TableCell>\n            </TableRow>\n          </TableHead>\n        </Table>\n        {section.contents.length > 0 &&\n          bodyBuilder(section)\n        }\n      </Table>\n    )\n  }\n  function rowSelected(rowName){\n    setSelectedRow(rowName)\n    // console.log(\"rowSelected\", rowName)\n  }\n  // Create body of each section and call contentBuilder function\n  function bodyBuilder(section){\n    return(\n      <Table size=\"small\" style={{\"border-collapse\": \"collapse\"}}>\n        <TableHead>\n          <TableRow key = {keyGen(5)} style={{height: 30}}>\n            <TableCell\n              key = {keyGen(5)}\n              align=\"left\"\n              style={{height: 30, border: \"1px solid grey\"}}>\n              Наименование\n            </TableCell>\n            <TableCell\n              key = {keyGen(5)}\n              align=\"left\"\n              style={{height: 30, border: \"1px solid grey\"}}\n            >\n            Тип\n            </TableCell>\n            <TableCell\n              key = {keyGen(5)}\n              align=\"left\"\n              style={{height: 30, border: \"1px solid grey\"}}\n            >\n              Редактируемое\n            </TableCell>\n            <TableCell\n              key = {keyGen(5)}\n              align=\"left\"\n              style={{height: 30, border: \"1px solid grey\"}}\n            >\n              Отображаемое\n            </TableCell>\n            <TableCell\n              key = {keyGen(5)}\n              align=\"left\"\n              style={{height: 30, border: \"1px solid grey\"}}\n            >\n              Обязятельное\n            </TableCell>\n            <TableCell\n              key = {keyGen(5)}\n              align=\"left\"\n              style={{height: 30, border: \"1px solid grey\"}}\n            >\n              Порядок\n            </TableCell>\n          </TableRow>\n        </TableHead>\n        <TableBody>\n          {section.contents.map(contentItem=> (\n            <TableRow key = {keyGen(5)} style={{height: 30, backgroundColor: (selectedRow === contentItem.name ? \"#B8E9F8\" : \"white\")}} onClick={()=>rowSelected(contentItem.name)}>\n              <TableCell\n                key = {keyGen(5)}\n                align=\"center\"\n                style={{height: 30, border: \"1px solid grey\"}}>\n                {contentItem.label}\n              </TableCell>                           \n              <TableCell\n                key = {keyGen(5)}\n                align=\"center\"\n                style={{height: 30, border: \"1px solid grey\"}}\n              >\n              {contentItem.type}\n              </TableCell>\n              <TableCell\n                key = {keyGen(5)}\n                align=\"center\"\n                style={{height: 30, border: \"1px solid grey\"}}\n              >\n                <Checkbox\n                  key={keyGen(5)}\n                  style={{maxWidth: 20, height: 15, color: \"green\"}}\n                  name = {contentItem.name}\n                  onChange={handleCheckboxEditChange}\n                  checked = {fieldValue[contentItem.name].edit}\n                />\n              </TableCell>\n              <TableCell\n                key = {keyGen(5)}\n                align=\"center\"\n                style={{height: 30, border: \"1px solid grey\"}}\n              >\n                <Checkbox\n                  key={keyGen(5)}\n                  style={{maxWidth: 20, height: 15, color: \"green\"}}\n                  name = {contentItem.name}\n                  onChange={handleCheckboxShowChange}\n                  checked = {fieldValue[contentItem.name].show}\n                />\n              </TableCell>\n              <TableCell\n                key = {keyGen(5)}\n                align=\"center\"\n                style={{height: 30, border: \"1px solid grey\"}}\n              >\n                <Checkbox\n                  key={keyGen(5)}\n                  style={{maxWidth: 20, height: 15, color: \"green\"}}\n                  name = {contentItem.name}\n                  onChange={handleCheckboxRequiredChange}\n                  checked = {fieldValue[contentItem.name].required}\n                />\n              </TableCell>\n              <TableCell\n                key = {keyGen(5)}\n                align=\"center\"\n                style={{height: 30, border: \"1px solid grey\"}}\n              >\n                <Grid container direction=\"row\" justify=\"space-around\" alignItems=\"center\">\n                  <ArrowUpwardIcon fontSize=\"middle\" style={{color:\"green\"}} onClick={()=> contentItemArrowUpClick(contentItem.name)}/>\n                  <ArrowDownwardIcon fontSize=\"middle\" style={{color:\"orange\"}} onClick={()=> contentItemArrowDownClick(contentItem.name)}/>\n                </Grid>\n              </TableCell>\n            </TableRow>\n          ))} \n        </TableBody>\n      </Table>\n    )\n  }\n\n  if(updateState !== null && selectedDoc !== null){\n    try{\n      return(\n        <Grid>\n          {/* Create main form */}\n          <Grid container direction=\"row\" justify=\"flex-start\" spacing={1}>\n            <Grid item xs={10}>\n              <Paper>\n                <Table style={{\"border-collapse\": \"collapse\", \"align\": \"center\"}}>\n                    <TableHead>\n                      <TableRow style={{\"maxHeight\": 25}}>\n                        <TableCell style={{\"fontSize\": 16, \"color\": \"black\"}}>\n                          <TextField\n                            onBlur = {handleFormLabelChange}\n                            style={{\"width\": \"80%\"}}\n                            defaultValue = {selectedDoc.label}\n                          />\n                        </TableCell>\n                      </TableRow>\n                    </TableHead>\n                  <Grid container direction=\"row\" justify=\"center\" alignItems=\"center\">\n                    {selectedDoc.sections.map(section => {\n                      return sectionBuilder(section)\n                    })}\n                  </Grid>\n                  <Grid container  direction=\"row\" justify=\"flex-start\" alignItems=\"flex-start\">\n                    {buttons.map((button, index) => (\n                      <Button\n                        key={index}\n                        name={button.name}\n                        variant=\"outlined\"\n                        onClick = {() => buttonClick(button.name, null)}\n                        style={{\n                          margin: 3,\n                          color: button.fontColor,\n                          backgroundColor: button.backgroundColor,\n                          height: 32,\n                          fontSize: 12\n                        }}\n                      >{button.label}\n                      </Button>\n                    )\n                    )}\n                  </Grid>\n                </Table>  \n              </Paper>\n            </Grid>\n          </Grid> \n        </Grid>\n      )\n    }\n    catch(er){\n      console.log(\"ERROR\", er)\n      return <LinearProgress/>\n    }\n  }\n  else{return <LinearProgress/>}\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\SERGO\\\\Desktop\\\\depo\\\\src\\\\components\\\\Reports\\\\Reports.jsx\";\n// Import material and react components\nimport React, { useState, useEffect } from 'react';\nimport Select from 'react-select';\nimport NumberFormat from 'react-number-format';\nimport PropTypes from 'prop-types';\nimport Grid from \"@material-ui/core/Grid\";\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Table from \"@material-ui/core/Table\";\nimport TableHead from \"@material-ui/core/TableHead\";\nimport TableBody from \"@material-ui/core/TableBody\";\nimport TableRow from \"@material-ui/core/TableRow\";\nimport TableCell from \"@material-ui/core/TableCell\";\nimport Paper from '@material-ui/core/Paper';\nimport Modal from \"@material-ui/core/Modal\";\nimport FormControl from '@material-ui/core/FormControl'; // import AdapterDateFns from '@mui/lab/AdapterDateFns';\n// import { AdapterDayjs } from '@mui/x-date-pickers/AdapterDayjs';\n// import LocalizationProvider from '@mui/lab/LocalizationProvider';\n// import Stack from '@mui/material/Stack';\n// import TimePicker from '@mui/lab/TimePicker';\n// import dayjs, { Dayjs } from 'dayjs';\n\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText'; // Icons\n\nimport ArrowUpwardRoundedIcon from '@mui/icons-material/ArrowUpwardRounded'; // PIN components\n\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport OutlinedInput from '@material-ui/core/OutlinedInput';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport Visibility from '@material-ui/icons/Visibility';\nimport VisibilityOff from '@material-ui/icons/VisibilityOff';\nimport IconButton from '@material-ui/core/IconButton';\nimport { fade, makeStyles } from '@material-ui/core/styles'; // Import libraries\n\nimport swal from 'sweetalert'; // https://sweetalert.js.org/guides/\n\nimport { Markup } from 'interweave';\nimport * as rutoken from \"rutoken\"; // import is from 'date-fns/esm/locale/is/index.js';\n\nvar moment = require('moment');\n\nconst axios = require('axios');\n\nvar request = require(\"request-promise\");\n\nvar plugin;\nvar rutokenHandle, certHandle, certData, cmsData;\n\nfunction NumberFormatCustom(props) {\n  const {\n    inputRef,\n    onChange,\n    ...other\n  } = props;\n  return /*#__PURE__*/React.createElement(NumberFormat, Object.assign({}, other, {\n    getInputRef: inputRef,\n    onValueChange: values => {\n      onChange({\n        target: {\n          value: values.value\n        }\n      });\n    },\n    decimalSeparator: \",\",\n    isNumericString: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 5\n    }\n  }));\n}\n\nNumberFormatCustom.propTypes = {\n  inputRef: PropTypes.func.isRequired,\n  onChange: PropTypes.func.isRequired\n};\nconst useStyles = makeStyles(theme => ({\n  importFile: {\n    '& > *': {\n      margin: theme.spacing(1)\n    }\n  },\n  inputFile: {\n    display: 'none'\n  },\n  modal: {\n    position: 'absolute',\n    width: 500,\n    backgroundColor: theme.palette.background.paper,\n    border: '1px solid #AFAFAF',\n    boxShadow: theme.shadows[5],\n    padding: theme.spacing(2, 4, 3)\n  },\n  paper: {\n    width: \"100%\",\n    height: 200,\n    overflow: 'auto'\n  },\n  button: {\n    // width: \"5%\",\n    margin: theme.spacing(0)\n  }\n}));\n\nfunction getModalStyle() {\n  const top = 35;\n  const left = 45;\n  return {\n    top: `${top}%`,\n    left: `${left}%`,\n    transform: `translate(-${top}%, -${left}%)`\n  };\n}\n\nfunction not(a, b) {\n  return a.filter(value => b.indexOf(value) === -1);\n}\n\nfunction intersection(a, b) {\n  return a.filter(value => b.indexOf(value) !== -1);\n}\n\nexport default (props => {\n  // This.state\n  const classes = useStyles();\n  const [userProfile] = useState(props.userProfile);\n  const [process_id] = useState(props.userTask.process_id);\n  const [session_id] = useState(props.userTask.session_id);\n  const [taskID] = useState(props.userTask.taskID);\n  const [taskType] = useState(props.userTask.taskType);\n  const [enumOptions, setEnumOptions] = useState({});\n  const [Form, setForm] = useState(props.userTask.Form);\n  const [enumData] = useState(props.userTask.enumData);\n  const [selectedOptions, setSelectedOptions] = useState([]); // const [multiSelectData] = useState(props.userTask.multiSelectData)\n  // const [multiSelectDataOptions, setMultiSelectDataOptions] = useState({})\n  // const [multiSelectedOptions, setMultiSelectedOptions] = useState({})\n  // const [gridForm] = useState(props.userTask.gridForm)\n\n  const [reportName] = useState(props.userTask.reportName);\n  const [fieldValue, setFieldValue] = useState({});\n  const [docId] = useState(props.userTask.docId);\n  const [buttons] = useState(props.userTask.buttons);\n  const [formType] = useState(props.userTask.formType);\n  const [sectionColor] = useState(\"#B2E0C9\");\n  const [selectedDoc, setSelectedDoc] = useState(null);\n  const [updateState, setUpdateState] = useState(false);\n  const [reportVars, setReportVars] = useState(props.userTask.reportVars); // modals\n\n  const [showModalEnterPin, setShowModalEnterPin] = useState(false);\n  const [rutokenPin, setRutokenPin] = useState(\"\");\n  const [showPin, setShowPin] = useState(false);\n  const [wrongPin, setWrongPin] = useState(false);\n  const [modalStyle] = useState(getModalStyle); // TRANSFER LIST\n\n  const [transferList, setTransferList] = useState({\n    reg_id: [],\n    sec_id: [],\n    acc_type_code: [],\n    dep_id: [],\n    corr_dep_id: [],\n    currency_id: [],\n    service_type_id: [],\n    issuer_id: []\n  });\n  const [checked, setChecked] = useState({\n    reg_id: [],\n    sec_id: [],\n    acc_type_code: [],\n    dep_id: [],\n    corr_dep_id: [],\n    currency_id: [],\n    service_type_id: [],\n    issuer_id: []\n  });\n  const [selectedTransferList, setSelectedTransferList] = useState({\n    reg_id: [],\n    sec_id: [],\n    acc_type_code: [],\n    dep_id: [],\n    corr_dep_id: [],\n    currency_id: [],\n    service_type_id: [],\n    issuer_id: []\n  });\n  const [transferListSearchFileds, setTransferListSearchFileds] = useState({});\n  const [selectedTransferListSearchFileds, setSelectedTransferListSearchFileds] = useState({});\n  const [autofocusFieldTrList, setAutofocusFieldTrList] = useState(null);\n  const [autofocusFieldSelTrList, setAutofocusFieldSelTrList] = useState(null); // const [value, setValue] = React.useState < Dayjs | null > (dayjs('2022-04-07'));\n\n  function leftChecked(name) {\n    return intersection(checked[name], transferList[name]);\n  }\n\n  function rightChecked(name) {\n    return intersection(checked[name], selectedTransferList[name]);\n  } // Initializing\n\n\n  useEffect(() => {\n    repserverlogin();\n    console.log(\"REP PROPS\", props.userTask, props.userProfile);\n\n    if (props.userTask.enumData !== null && props.userTask.enumData !== undefined && props.userTask.enumData !== \"null\") {\n      let newEnumOptions = {};\n\n      for (let i = 0; i < props.userTask.enumData.length; i++) {\n        if (props.userTask.enumData[i] !== null) {\n          let options = [{\n            \"value\": \"\",\n            \"label\": \"Пусто\",\n            \"name\": props.userTask.enumData[i].name\n          }];\n\n          if (props.userTask.enumData[i].name === \"report_name\") {\n            if (props.userTask.taskType === \"showReportsSelectingForm\") {\n              for (let d = 0; d < props.userTask.enumData[i].data.length; d++) {\n                if (props.userProfile[props.userTask.enumData[i].data[d].report_name] === true) {\n                  options.push({\n                    \"value\": props.userTask.enumData[i].data[d].id,\n                    \"label\": props.userTask.enumData[i].data[d].label,\n                    \"name\": props.userTask.enumData[i].name\n                  });\n                }\n              }\n            }\n          } else {\n            for (let d = 0; d < props.userTask.enumData[i].data.length; d++) {\n              options.push({\n                \"value\": props.userTask.enumData[i].data[d].id,\n                \"label\": props.userTask.enumData[i].data[d].label,\n                \"name\": props.userTask.enumData[i].name\n              });\n            }\n          }\n\n          newEnumOptions[props.userTask.enumData[i].name] = options;\n        } else {\n          let options = [{\n            \"value\": \"\",\n            \"label\": \"Ошибка...\",\n            \"name\": getLostEnumName(i)\n          }];\n          newEnumOptions[getLostEnumName(i)] = options;\n          props.callErrorToast(\"Ошибка сбора справочной информации \" + getLostEnumName(i));\n        }\n      }\n\n      setEnumOptions(newEnumOptions);\n      let newTrListOpts = createTransferListOptions(props.userTask.Form, props.userTask.enumData);\n\n      if (userProfile.userRole === \"3\") {\n        // Depositor\n        for (let s = 0; s < Form.sections.length; s++) {\n          // Block depositor field\n          for (let c = 0; c < Form.sections[s].contents.length; c++) {\n            let n = Form.sections[s].contents[c].name;\n\n            if (n === \"dep_id\") {\n              Form.sections[s].contents[c].edit = false; // console.log(\"BLOCK\", Form.sections[s].contents[c])\n\n              let ed = props.userTask.enumData;\n\n              for (let e = 0; e < ed.length; e++) {\n                if (ed[e].name === \"depositors\") {\n                  for (let d = 0; d < ed[e].data.length; d++) {\n                    if (ed[e].data[d].partner === parseInt(userProfile.partner)) {\n                      // setSelectedTransferList({ ...selectedTransferList, \"dep_id\": [ed[e].data[d].id] })\n                      newTrListOpts.trList.dep_id = [ed[e].data[d].id];\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n\n        setForm(Form); // for(let i=0; i<multiSelectData.length; i++){// find accounts of depositor\n        //   let options = [{\n        //     \"value\": \"all\",\n        //     \"label\": \"Все\"\n        //   }]\n        //   if(multiSelectData[i].name === \"acc_id\"){\n        //     for(let d=0; d<multiSelectData[i].data.length; d++){\n        //       if(multiSelectData[i].data[d].partner === parseInt(userProfile.partner)){\n        //         options.push({\n        //           \"value\": multiSelectData[i].data[d].id,\n        //           \"label\": multiSelectData[i].data[d].label,\n        //         })\n        //       }\n        //     } \n        //   }\n        //   newMultiSelectDatamOptions[multiSelectData[i].name] = options\n        // }\n        // setMultiSelectDataOptions(newMultiSelectDatamOptions)\n      }\n\n      if (userProfile.userRole === \"4\") {\n        // Registrar\n        // console.log(\"REGS\", userProfile)\n        for (let s = 0; s < Form.sections.length; s++) {\n          for (let c = 0; c < Form.sections[s].contents.length; c++) {\n            let n = Form.sections[s].contents[c].name;\n\n            if (n === \"reg_id\") {\n              Form.sections[s].contents[c].edit = false; // Block registrar field\n              // console.log(\"BLOCK\", Form.sections[s].contents[c])\n\n              let ed = props.userTask.enumData;\n\n              for (let e = 0; e < ed.length; e++) {\n                if (ed[e].name === \"registrars\") {\n                  for (let d = 0; d < ed[e].data.length; d++) {\n                    if (ed[e].data[d].partner === parseInt(userProfile.partner)) {\n                      // newTrListOpts.selTrList.reg_id = [ed[e].data[d].id]\n                      newTrListOpts.trList.reg_id = [ed[e].data[d].id]; // setTransferList({ ...transferList, \"registrars\": [] })\n                      // setSelectedTransferList({ ...selectedTransferList, \"registrars\": [ed[e].data[d].id] })\n                    }\n                  }\n                }\n              }\n            } else if (n === \"sec_id\") {\n              let regId = null;\n              let filteredSecurities = [];\n              let ed = props.userTask.enumData;\n\n              for (let e = 0; e < ed.length; e++) {\n                if (ed[e].name === \"registrars\") {\n                  for (let d = 0; d < ed[e].data.length; d++) {\n                    if (ed[e].data[d].partner === parseInt(userProfile.partner)) {\n                      regId = ed[e].data[d].id;\n                    }\n                  }\n                }\n              }\n\n              for (let e = 0; e < ed.length; e++) {\n                if (ed[e].name === \"sec_id\") {\n                  for (let d = 0; d < ed[e].data.length; d++) {\n                    if (ed[e].data[d].registrar === regId) {\n                      filteredSecurities.push(ed[e].data[d].id);\n                    }\n                  }\n                }\n              }\n\n              newTrListOpts.trList.sec_id = filteredSecurities;\n            }\n          }\n        }\n\n        setForm(Form);\n      }\n\n      if (userProfile.userRole === \"8\") {\n        // CorrDepository\n        for (let s = 0; s < Form.sections.length; s++) {\n          for (let c = 0; c < Form.sections[s].contents.length; c++) {\n            let n = Form.sections[s].contents[c].name;\n\n            if (n === \"corr_dep_id\") {\n              Form.sections[s].contents[c].edit = false; // Block corrDepositories field\n              // console.log(\"BLOCK\", Form.sections[s].contents[c])\n\n              let ed = props.userTask.enumData;\n\n              for (let e = 0; e < ed.length; e++) {\n                if (ed[e].name === \"corrDepositories\") {\n                  for (let d = 0; d < ed[e].data.length; d++) {\n                    if (ed[e].data[d].partner === parseInt(userProfile.partner)) {\n                      newTrListOpts.trList.corr_dep_id = [ed[e].data[d].id]; // setSelectedTransferList({ ...selectedTransferList, \"corrDepositories\": [ed[e].data[d].id] })\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n\n        setForm(Form);\n      }\n\n      setTransferList(newTrListOpts.trList);\n      setSelectedTransferList(newTrListOpts.selTrList);\n    } // let newMultiSelectDatamOptions = {}\n    // if(props.userTask.multiSelectData !== null && props.userTask.multiSelectData !== undefined && props.userTask.multiSelectData !== \"null\"){\n    //   for(let i=0; i<multiSelectData.length; i++){\n    //     let options = [{\n    //       \"value\": \"all\",\n    //       \"label\": \"Все\"\n    //     }]\n    //     if(multiSelectData[i].name !== \"acc_id\"){\n    //       for(let d=0; d<multiSelectData[i].data.length; d++){\n    //         options.push({\n    //           \"value\": multiSelectData[i].data[d].id,\n    //           \"label\": multiSelectData[i].data[d].label,\n    //         })\n    //       }\n    //     }\n    //     else{\n    //       for(let d=0; d<multiSelectData[i].data.length; d++){\n    //         if(multiSelectData[i].data[d].partner === parseInt(userProfile.partner)){\n    //           options.push({\n    //             \"value\": multiSelectData[i].data[d].id,\n    //             \"label\": multiSelectData[i].data[d].label,\n    //           })\n    //         }\n    //       }\n    //     }\n    //     newMultiSelectDatamOptions[multiSelectData[i].name] = options\n    //   }\n    //   setMultiSelectDataOptions(newMultiSelectDatamOptions)\n    //   console.log(\"MS DATA OPTS\", newMultiSelectDatamOptions)\n    // }\n\n\n    if (props.userTask.selectedDoc !== \"null\" && props.userTask.selectedDoc !== undefined) {\n      // console.log(\"SDOC\", props.userTask.selectedDoc)\n      setSelectedDoc(props.userTask.selectedDoc);\n    }\n\n    if (props.userTask.reportVars !== \"null\" && props.userTask.reportVars !== undefined) {\n      try {\n        let parsedVars = JSON.parse(props.userTask.reportVars);\n        setReportVars(parsedVars);\n        console.log(\"VARS\", parsedVars);\n      } catch (er) {\n        console.log(\"VARS\", props.userTask.reportVars);\n      }\n    }\n\n    let newFields = {};\n\n    for (let s = 0; s < Form.sections.length; s++) {\n      // Set current date to DateTime fields\n      for (let c = 0; c < Form.sections[s].contents.length; c++) {\n        if (Form.sections[s].contents[c].type === \"FullDateTime\") newFields[Form.sections[s].contents[c].name] = new Date();\n      }\n    }\n\n    console.log(\"NEW F\", newFields);\n    setFieldValue(newFields);\n    setUpdateState(getUUID());\n  }, []);\n\n  function getLostEnumName(i) {\n    let enumI = 0;\n\n    for (let s = 0; s < Form.sections.length; s++) {\n      for (let c = 0; c < Form.sections[s].contents.length; c++) {\n        if (Form.sections[s].contents[c].type === \"Enum\") {\n          if (enumI === i) {\n            return Form.sections[s].contents[c].name;\n          } else {\n            enumI += 1;\n          }\n        }\n      }\n    }\n  }\n\n  function createTransferListOptions(form, enums) {\n    let newTransferList = {};\n    let newSelectedTransferList = {};\n\n    for (let s = 0; s < form.sections.length; s++) {\n      for (let c = 0; c < form.sections[s].contents.length; c++) {\n        if (form.sections[s].contents[c].type === \"TransferList\") {\n          let newTrItems = [];\n          let newSelTrItems = [];\n          let cName = form.sections[s].contents[c].name;\n\n          for (let e = 0; e < enums.length; e++) {\n            if (enums[e] !== null) {\n              if (enums[e].name === cName) {\n                for (let d = 0; d < enums[e].data.length; d++) {\n                  newTrItems.push(enums[e].data[d].id);\n                }\n              }\n            } else {\n              props.callErrorToast(\"Ошибка сбора справочной информации \" + cName);\n            }\n          }\n\n          newTransferList[cName] = newTrItems;\n          newSelectedTransferList[cName] = newSelTrItems;\n        }\n      }\n    }\n\n    return {\n      trList: newTransferList,\n      selTrList: newSelectedTransferList\n    }; // setTransferList(newTransferList)\n    // setSelectedTransferList(newSelectedTransferList)\n  } // RuToken functions\n\n\n  rutoken.ready // Проверка установки расширение 'Адаптера Рутокен Плагина' в Google Chrome\n  .then(function () {\n    if (window.chrome || typeof InstallTrigger !== 'undefined') {\n      return rutoken.isExtensionInstalled();\n    } else {\n      return Promise.resolve(true);\n    }\n  }) // Проверка установки Рутокен Плагина\n  .then(function (result) {\n    if (result) {\n      return rutoken.isPluginInstalled();\n    } else {// alert(\"Не удаётся найти расширение 'Адаптер Рутокен Плагина'\")\n    }\n  }) // Загрузка плагина\n  .then(function (result) {\n    if (result) {\n      return rutoken.loadPlugin();\n    } else {// alert(\"Не удаётся найти Плагин\");\n    }\n  }) //Можно начинать работать с плагином\n  .then(function (result) {\n    if (!result) {\n      return; // alert(\"Не удаётся загрузить Плагин\");\n    } else {\n      plugin = result;\n      return Promise.resolve();\n    }\n  });\n\n  function getUUID() {\n    const uuidv1 = require(\"uuid/v1\");\n\n    return uuidv1();\n  } // Rutoken MODAL\n\n\n  const handleCloseModalEnterPin = () => {\n    setShowModalEnterPin(false);\n  };\n\n  function handlePinChange(event) {\n    // console.log(\"EVENT\", event.target.name, event.target.value)\n    setRutokenPin(event.target.value);\n    console.log(\"PIN\", event.target.value);\n  }\n\n  function handleClickShowPin() {\n    setShowPin(!showPin);\n  } // Sign transfer order with rutoken\n\n\n  function sign() {\n    // Перебор подключенных Рутокенов\n    if (plugin !== undefined) {\n      plugin.enumerateDevices().then(function (devices) {\n        if (devices.length > 0) {\n          return Promise.resolve(devices[0]);\n        } else {\n          alert(\"Рутокен не обнаружен\");\n        }\n      }) // Проверка залогиненности\n      .then(function (firstDevice) {\n        rutokenHandle = firstDevice;\n        return plugin.getDeviceInfo(rutokenHandle, plugin.TOKEN_INFO_IS_LOGGED_IN);\n      }) // Логин на первый токен в списке устройств PIN-кодом по умолчанию\n      .then(function (isLoggedIn) {\n        if (isLoggedIn) {\n          return Promise.resolve();\n        } else {\n          return plugin.login(rutokenHandle, rutokenPin); // 240699\n        }\n      }) // Перебор пользовательских сертификатов на токене\n      .then(function () {\n        return plugin.enumerateCertificates(rutokenHandle, plugin.CERT_CATEGORY_UNSPEC);\n      }).then(function (certs) {\n        if (certs.length > 0) {\n          certHandle = certs[0];\n          return plugin.parseCertificate(rutokenHandle, certs[0]);\n        } else {\n          alert(\"Сертификат на Рутокен не обнаружен\");\n        }\n      }) // Подписание данных из текстового поля на первом найденом сертификате\n      .then(function (certs) {\n        certData = certs;\n\n        if (certHandle.length > 0) {\n          var options = {};\n          let inn = \"\";\n          let fullName = \"\";\n\n          for (let i = 0; i < certData.subject.length; i++) {\n            if (certData.subject[i].rdn === \"serialNumber\") {\n              inn = certData.subject[i].value;\n            }\n\n            if (certData.subject[i].rdn === \"commonName\") {\n              fullName = certData.subject[i].value;\n            }\n          }\n\n          props.setEsInn(inn);\n          props.setEsUserFullName(fullName);\n          props.setEsExpiredDate(certData.validNotAfter.substring(0, certData.validNotAfter.length - 1));\n          handleCloseModalEnterPin(); // swAllert(\"Отчет успешно подписан!\", \"success\")\n\n          reportToPDFES(fullName, inn, certData.validNotAfter.substring(0, certData.validNotAfter.length - 1));\n          return plugin.sign(rutokenHandle, certHandle, \"textToSign\", plugin.DATA_FORMAT_PLAIN, options);\n        } else {\n          alert(\"Сертификат на Рутокен не обнаружен\");\n        }\n      }) // Закрытие сессии\n      .then(function () {\n        plugin.logout(rutokenHandle);\n      }, handleError);\n    } else {\n      props.callErrorToast(\"Вставьте рутокен, либо установите расширение для вашего браузера\", \"warning\");\n    }\n  } // catch errors while signing docs\n\n\n  function handleError(reason) {\n    if (isNaN(reason.message)) {\n      console.log(reason);\n    } else {\n      var errorCodes = plugin.errorCodes;\n\n      switch (parseInt(reason.message)) {\n        case errorCodes.PIN_INCORRECT:\n          // alert(\"Неверный PIN\");\n          setWrongPin(true);\n          break;\n\n        default:\n          console.log(\"Неизвестная ошибка\");\n      }\n    }\n  }\n\n  function onKeyPressModalEnterPin(event) {\n    let code = event.charCode;\n\n    if (code === 13) {\n      buttonClick(\"SignReportSaveButton\", null);\n    }\n  } // Integer input handlers\n\n\n  function handleChange(event) {\n    console.log(\"EV\", event);\n    fieldValue[event.target.name] = event.target.value;\n    setFieldValue(fieldValue);\n    console.log(\"FIELDVALUE\", fieldValue);\n  }\n\n  function handleDateChange(event) {\n    // let fullDate = new Date(event.target.value)\n    // // console.log(\"DATE CHANGE\", fullDate)\n    // if (fieldValue[event.target.name] !== undefined && fieldValue[event.target.name] !== null) {\n    //   let fullDate = moment(fullDate).format(\"YYYY-MM-DDTHH:mm:ss\")\n    // }\n    // fieldValue[event.target.name] = fullDate\n    // setFieldValue(fieldValue)\n    // console.log(\"DATE CHANGE\", fullDate)\n    // console.log(\"FVAL\", fieldValue)\n    // // setUpdateState(getUUID())\n    // console.log(\"EV\", event)\n    fieldValue[event.target.name] = event.target.value;\n    setFieldValue(fieldValue);\n    console.log(\"FIELDVALUE\", fieldValue);\n  }\n\n  function handleTimeChange(name, value) {\n    let fullDate = new Date(value);\n\n    if (fieldValue[name] !== undefined && fieldValue[name] !== null) {\n      // let nDate = props.parseDate(fieldValue[name])\n      // let hours = new Date(value).getHours()\n      // let minutes = new Date(value).getMinutes()\n      // let seconds = new Date(value).getSeconds()\n      // fullDate = new Date(nDate + \"T\" + hours + \":\" + minutes + \":\" + seconds)\n      let date = moment(fieldValue[name]).format(\"YYYY-MM-DD\");\n      let time = moment(value).format(\"HH:mm:ss\");\n      fullDate = date + \"T\" + time;\n    }\n\n    fieldValue[name] = fullDate;\n    setFieldValue(fieldValue);\n    console.log(\"FULL DATE CHANGE\", name, value, fieldValue);\n    console.log(\"FVAL\", fieldValue);\n    setUpdateState(getUUID());\n  }\n\n  function handleDateTimeChange(event) {\n    // console.log(\"FULL DATE TIME CHANGE\", event.target.name, event.target.value)\n    setFieldValue({ ...fieldValue,\n      [event.target.name]: event.target.value\n    });\n  }\n\n  const handleCheckboxChange = event => {\n    setFieldValue({ ...fieldValue,\n      [event.target.name]: event.target.checked\n    });\n  };\n\n  function swAllert(text, icon) {\n    return swal({\n      text: text,\n      icon: icon,\n      buttons: {\n        ok: \"Ок\"\n      }\n    });\n  } // Handler of select copmponet changes\n\n\n  function handleSelectChange(option) {\n    console.log(\"SEL CHANGE\", option.name, option.value);\n    fieldValue[option.name] = option.value;\n    let updateSelectedOptions = selectedOptions.slice();\n    let noSuchOption = true;\n\n    for (let i = 0; i < updateSelectedOptions.length; i++) {\n      if (option.name === updateSelectedOptions[i].name) {\n        updateSelectedOptions[i] = option;\n        setSelectedOptions(updateSelectedOptions); // console.log(\"SO\", selectedOptions)\n\n        noSuchOption = false;\n        break;\n      } else {\n        noSuchOption = true;\n      }\n    }\n\n    if (noSuchOption === true) {\n      updateSelectedOptions.push(option);\n      setSelectedOptions(updateSelectedOptions);\n    }\n\n    setFieldValue(fieldValue);\n  } // function handleMultiSelectChange(value, {action, removedValue, name}) {\n  //   // console.log(\"MSOP\", multiSelectedOptions)\n  //   console.log(\"NAME\",name)\n  //   if(action === \"select-option\"){\n  //     let putAll = false\n  //     for(let i=0; i<value.length; i++){\n  //       if(value[i].value === \"all\"){\n  //         putAll = true\n  //       }\n  //     }\n  //     if(putAll === true){\n  //       multiSelectedOptions[name] = multiSelectDataOptions[name]\n  //     }\n  //     else{\n  //       multiSelectedOptions[name] = value\n  //     }\n  //   }\n  //   else if(action === \"remove-value\"){\n  //     // console.log(\"RV\", removedValue, \"NAME\", name)\n  //     if(removedValue.value === \"all\"){\n  //       multiSelectedOptions[name] = null\n  //     }\n  //     else{\n  //       multiSelectedOptions[name] = value\n  //     }\n  //   }\n  //   else if(action === \"clear\"){\n  //     multiSelectedOptions[name] = null\n  //   }\n  //   if(name === \"dep_id\"){\n  //     if(multiSelectedOptions[name] !== null){\n  //       console.log(\"MS\", multiSelectedOptions[\"acc_id\"])\n  //       let partnersList = []\n  //       let depositors = []\n  //       for(let i=0; i<enumData.length; i++){\n  //         if(enumData[i].name === \"depositors\"){\n  //           depositors = enumData[i].data // Find partner for each selected depositor\n  //         }\n  //       }\n  //       for(let m=0; m<multiSelectedOptions[name].length; m++){\n  //         for(let d=0; d<depositors.length; d++){\n  //           if(depositors[d].id === multiSelectedOptions[name][m].value){\n  //             partnersList.push(depositors[d].partner)\n  //           }\n  //         }\n  //       }\n  //       // for(let ms=0; ms<multiSelectData.length; ms++){\n  //       //   if(multiSelectData[ms].name === \"acc_id\"){\n  //       //     let options = [{\n  //       //       \"value\": \"all\",\n  //       //       \"label\": \"Все\"\n  //       //     }]\n  //       //     for(let msd=0; msd<multiSelectData[ms].data.length; msd++){\n  //       //       for(let p=0; p<partnersList.length; p++){\n  //       //         if(partnersList[p] === multiSelectData[ms].data[msd].partner){\n  //       //           options.push({\n  //       //             \"value\": multiSelectData[ms].data[msd].id,\n  //       //             \"label\": multiSelectData[ms].data[msd].label,\n  //       //           })\n  //       //         }  \n  //       //       }\n  //       //     }\n  //       //     multiSelectDataOptions[\"acc_id\"] = options\n  //       //   }\n  //       // }\n  //     }\n  //     else{\n  //       multiSelectedOptions[\"acc_id\"] = null\n  //       // multiSelectDataOptions[\"acc_id\"] = null\n  //     }\n  //   }\n  //   if(name === \"corr_dep_id\"){\n  //     if(multiSelectedOptions[name] !== null){\n  //       console.log(\"MS\", multiSelectedOptions[\"acc_id\"])\n  //       let partnersList = []\n  //       let corr_depositors = []\n  //       for(let i=0; i<enumData.length; i++){\n  //         if(enumData[i].name === \"corrDepositories\"){\n  //           corr_depositors = enumData[i].data // Find partner for each selected corr depositories\n  //         }\n  //       }\n  //       for(let m=0; m<multiSelectedOptions[name].length; m++){\n  //         for(let d=0; d<corr_depositors.length; d++){\n  //           if(corr_depositors[d].id === multiSelectedOptions[name][m].value){\n  //             partnersList.push(corr_depositors[d].partner)\n  //           }\n  //         }\n  //       }\n  //       // for(let ms=0; ms<multiSelectData.length; ms++){\n  //       //   if(multiSelectData[ms].name === \"acc_id\"){\n  //       //     let options = [{\n  //       //       \"value\": \"all\",\n  //       //       \"label\": \"Все\"\n  //       //     }]\n  //       //     for(let msd=0; msd<multiSelectData[ms].data.length; msd++){\n  //       //       for(let p=0; p<partnersList.length; p++){\n  //       //         if(partnersList[p] === multiSelectData[ms].data[msd].partner){\n  //       //           options.push({\n  //       //             \"value\": multiSelectData[ms].data[msd].id,\n  //       //             \"label\": multiSelectData[ms].data[msd].label,\n  //       //           })\n  //       //         }  \n  //       //       }\n  //       //     }\n  //       //     multiSelectDataOptions[\"acc_id\"] = options\n  //       //   }\n  //       // }\n  //     }\n  //     else{\n  //       multiSelectedOptions[\"acc_id\"] = null\n  //       multiSelectDataOptions[\"acc_id\"] = null\n  //     }\n  //   }\n  //   if(name === \"reg_id\"){\n  //     if(multiSelectedOptions[name] !== null){\n  //       console.log(\"MS\", multiSelectedOptions[\"acc_id\"])\n  //       let partnersList = []\n  //       let registrars = []\n  //       for(let i=0; i<enumData.length; i++){\n  //         if(enumData[i].name === \"registrars\"){\n  //           registrars = enumData[i].data // Find partner for each selected corr depositories\n  //         }\n  //       }\n  //       for(let m=0; m<multiSelectedOptions[name].length; m++){\n  //         for(let d=0; d<registrars.length; d++){\n  //           if(registrars[d].id === multiSelectedOptions[name][m].value){\n  //             partnersList.push(registrars[d].partner)\n  //           }\n  //         }\n  //       }\n  //       // for(let ms=0; ms<multiSelectData.length; ms++){\n  //       //   if(multiSelectData[ms].name === \"acc_id\"){\n  //       //     let options = [{\n  //       //       \"value\": \"all\",\n  //       //       \"label\": \"Все\"\n  //       //     }]\n  //       //     for(let msd=0; msd<multiSelectData[ms].data.length; msd++){\n  //       //       for(let p=0; p<partnersList.length; p++){\n  //       //         if(partnersList[p] === multiSelectData[ms].data[msd].partner){\n  //       //           options.push({\n  //       //             \"value\": multiSelectData[ms].data[msd].id,\n  //       //             \"label\": multiSelectData[ms].data[msd].label,\n  //       //           })\n  //       //         }  \n  //       //       }\n  //       //     }\n  //       //     multiSelectDataOptions[\"acc_id\"] = options\n  //       //   }\n  //       // }\n  //     }\n  //     else{\n  //       multiSelectedOptions[\"acc_id\"] = null\n  //       // multiSelectDataOptions[\"acc_id\"] = null\n  //     }\n  //   }\n  //   setMultiSelectedOptions(multiSelectedOptions)\n  //   setUpdateState(getUUID())\n  // }\n\n\n  const handleIntChange = event => {\n    // console.log(\"EVENT\", event.target.name, event.target.value)\n    let stringNum = event.target.value.toString().replace(/ /g, '');\n    let int = parseInt(stringNum);\n    setFieldValue({ ...fieldValue,\n      [event.target.name]: int\n    });\n  }; // function handleIntChange(event) {\n  //   console.log(\"EVENT\", event.target.name, event.target.value)\n  //   fieldValue[event.target.name] = parseInt(event.target.value)\n  //   setFieldValue(fieldValue)\n  // }\n  // Create sections with labels and call bodyBuilder function\n\n\n  function sectionBuilder(section, index) {\n    return /*#__PURE__*/React.createElement(Table, {\n      size: \"small\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 847,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(TableHead, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 848,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(TableRow, {\n      style: {\n        height: 30\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 849,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(TableCell, {\n      style: {\n        color: \"black\",\n        fontSize: 14,\n        backgroundColor: sectionColor,\n        width: \"100%\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 850,\n        columnNumber: 13\n      }\n    }, section.label))), bodyBuilder(section));\n  } // Create body of each section and call contentBuilder function\n\n\n  function bodyBuilder(section) {\n    return /*#__PURE__*/React.createElement(Table, {\n      size: \"small\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 868,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(TableBody, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 869,\n        columnNumber: 9\n      }\n    }, section.contents.map((contentItem, index) => contentItem.show === true && contentItem.type === \"TransferList\" ? /*#__PURE__*/React.createElement(\"table\", {\n      size: \"small\",\n      align: \"center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 873,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 874,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      colSpan: \"3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 875,\n        columnNumber: 19\n      }\n    }, contentItem.label)), /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 877,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      width: \"43%\",\n      style: {\n        padding: \"10px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 878,\n        columnNumber: 19\n      }\n    }, \"\\u043F\\u043E\\u0438\\u0441\\u043A \", /*#__PURE__*/React.createElement(\"input\", {\n      autoFocus: autofocusFieldTrList === contentItem.name ? true : false,\n      name: contentItem.name,\n      onChange: handleSearchTransferListChange,\n      value: transferListSearchFileds[contentItem.name] // disabled={!contentItem.edit}\n      ,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 878,\n        columnNumber: 69\n      }\n    })), /*#__PURE__*/React.createElement(\"td\", {\n      width: \"4%\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 886,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(\"td\", {\n      width: \"43%\",\n      style: {\n        padding: \"10px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 887,\n        columnNumber: 19\n      }\n    }, \"\\u043F\\u043E\\u0438\\u0441\\u043A \", /*#__PURE__*/React.createElement(\"input\", {\n      autoFocus: autofocusFieldSelTrList === contentItem.name ? true : false,\n      name: contentItem.name,\n      onChange: handleSearchSelectedTransferListChange,\n      value: selectedTransferListSearchFileds[contentItem.name] // disabled={!contentItem.edit}\n      ,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 887,\n        columnNumber: 69\n      }\n    }))), /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 895,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      width: \"43%\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 896,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Grid, {\n      item: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 897,\n        columnNumber: 21\n      }\n    }, getTransferList(transferList[contentItem.name], contentItem.name, contentItem.edit))), /*#__PURE__*/React.createElement(\"td\", {\n      width: \"4%\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 899,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Grid, {\n      item: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 900,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Grid, {\n      container: true,\n      direction: \"column\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 901,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      variant: \"outlined\",\n      size: \"small\",\n      className: classes.button,\n      onClick: () => handleAllRight(contentItem.name),\n      disabled: transferList[contentItem.name].length === 0 ? true : false // disabled={(transferList[contentItem.name].length === 0 || contentItem.edit === false) ? true : false}  \n      ,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 902,\n        columnNumber: 25\n      }\n    }, \"\\u226B\"), /*#__PURE__*/React.createElement(Button, {\n      variant: \"outlined\",\n      size: \"small\",\n      className: classes.button,\n      onClick: () => handleCheckedRight(contentItem.name),\n      disabled: leftChecked(contentItem.name).length === 0 ? true : false // disabled={(leftChecked(contentItem.name).length === 0 || contentItem.edit === false) ? true : false}\n      ,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 912,\n        columnNumber: 25\n      }\n    }, \">\"), /*#__PURE__*/React.createElement(Button, {\n      variant: \"outlined\",\n      size: \"small\",\n      className: classes.button,\n      onClick: () => handleCheckedLeft(contentItem.name),\n      disabled: rightChecked(contentItem.name).length === 0 ? true : false // disabled={(rightChecked(contentItem.name).length === 0 || contentItem.edit === false) ? true : false}\n      ,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 922,\n        columnNumber: 25\n      }\n    }, \"<\"), /*#__PURE__*/React.createElement(Button, {\n      variant: \"outlined\",\n      size: \"small\",\n      className: classes.button,\n      onClick: () => handleAllLeft(contentItem.name),\n      disabled: selectedTransferList[contentItem.name].length === 0 ? true : false // disabled={(selectedTransferList[contentItem.name].length === 0 || contentItem.edit === false) ? true : false}\n      ,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 932,\n        columnNumber: 25\n      }\n    }, \"\\u226A\")))), /*#__PURE__*/React.createElement(\"td\", {\n      width: \"43%\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 945,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Grid, {\n      item: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 946,\n        columnNumber: 21\n      }\n    }, getTransferList(selectedTransferList[contentItem.name], contentItem.name, contentItem.edit))))) : /*#__PURE__*/React.createElement(Table, {\n      size: \"small\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 951,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(TableRow, {\n      style: {\n        height: 30\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 952,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(TableCell, {\n      align: \"left\",\n      style: {\n        width: \"40%\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 953,\n        columnNumber: 19\n      }\n    }, contentItem.label), /*#__PURE__*/React.createElement(TableCell, {\n      align: \"left\",\n      style: {\n        width: \"60%\",\n        height: 30\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 958,\n        columnNumber: 19\n      }\n    }, contentBuilder(contentItem)))))));\n  } // Create component by it's type\n\n\n  function contentBuilder(contentItem) {\n    if (contentItem.type === \"Text\") {\n      return /*#__PURE__*/React.createElement(TextField, {\n        multiline: true,\n        onBlur: handleChange,\n        name: contentItem.name,\n        style: {\n          width: \"100%\"\n        },\n        disabled: formType === \"view\" || contentItem.edit === false ? true : false,\n        defaultValue: fieldValue[contentItem.name] !== undefined ? fieldValue[contentItem.name] : \"\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 974,\n          columnNumber: 9\n        }\n      });\n    } else if (contentItem.type === \"Int\") {\n      return /*#__PURE__*/React.createElement(TextField, {\n        disabled: formType === \"view\" || contentItem.edit === false ? true : false,\n        style: {\n          width: \"100%\"\n        } // defaultValue={(fieldValue[contentItem.name] !== undefined) ? fieldValue[contentItem.name] : \"\"}\n        // value = {(fieldValue[contentItem.name] !== undefined) ? fieldValue[contentItem.name]: \"\"}\n        // onBlur={handleIntChange}\n        ,\n        value: fieldValue[contentItem.name] !== undefined ? fieldValue[contentItem.name] : \"\",\n        onChange: handleIntChange,\n        name: contentItem.name,\n        InputProps: {\n          inputComponent: NumberFormatCustom\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 986,\n          columnNumber: 9\n        }\n      });\n    } else if (contentItem.type === \"DateTime\" || contentItem.type === \"JasperDate\") {\n      return /*#__PURE__*/React.createElement(TextField, {\n        type: \"date\",\n        name: contentItem.name,\n        onBlur: handleDateChange,\n        style: {\n          width: \"100%\"\n        },\n        defaultValue: fieldValue[contentItem.name] !== undefined && fieldValue[contentItem.name] !== null ? fieldValue[contentItem.name] : \"NaN.NaN.NaN\" // defaultValue = {fieldValue[contentItem.name]}\n        ,\n        disabled: formType === \"view\" || contentItem.edit === false ? true : false,\n        InputLabelProps: {\n          shrink: true\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1001,\n          columnNumber: 9\n        }\n      });\n    } else if (contentItem.type === \"FullDateTime\") {\n      return (\n        /*#__PURE__*/\n        // <table>\n        //   <tr>\n        //     <td style={{width: \"45%\"}}>\n        //       <TextField\n        //         key={fieldValue[contentItem.name]}\n        //         type=\"date\"\n        //         name={contentItem.name}\n        //         onChange={handleDateChange}\n        //         style={{width: \"100%\"}}\n        //         defaultValue={(fieldValue[contentItem.name] !== undefined && fieldValue[contentItem.name] !== null) ? props.parseDate(fieldValue[contentItem.name]) : \"NaN.NaN.NaN\" }\n        //         disabled={(formType === \"view\" || contentItem.edit === false) ? true : false}\n        //         InputLabelProps={{\n        //           shrink: true,\n        //         }}\n        //       />\n        //     </td>\n        //     <td style={{width: \"45%\"}}>\n        //       <LocalizationProvider dateAdapter={AdapterDayjs}>\n        //         <Stack>\n        //           <TimePicker\n        //             // key={fieldValue[contentItem.name]}\n        //             ampm={false}\n        //             openTo=\"hours\"\n        //             views={['hours', 'minutes', 'seconds']}\n        //             inputFormat=\"HH:mm:ss\"\n        //             mask=\"__:__:__\"\n        //             // value={dVal}\n        //             value={(fieldValue[contentItem.name] !== undefined && fieldValue[contentItem.name] !== null) ? fieldValue[contentItem.name] : \"NaN.NaN.NaN\" }\n        //             onChange={(newValue) => {handleTimeChange(contentItem.name, newValue)}}\n        //             renderInput={(params) => <TextField {...params} />}\n        //           />\n        //         </Stack>\n        //     </LocalizationProvider>\n        //   </td>\n        //   </tr>\n        // </table>\n        React.createElement(TextField, {\n          name: contentItem.name,\n          onChange: handleDateTimeChange,\n          type: \"datetime-local\" // defaultValue=\"2017-05-24T10:30\"\n          ,\n          defaultValue: fieldValue[contentItem.name] !== undefined && fieldValue[contentItem.name] !== null ? moment(fieldValue[contentItem.name]).format(\"YYYY-MM-DDTHH:MM\") : moment(new Date()).format(\"YYYY-MM-DDTHH:MM\"),\n          InputLabelProps: {\n            shrink: true\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 1055,\n            columnNumber: 9\n          }\n        }) //   <LocalizationProvider dateAdapter={AdapterDateFns}>\n        //     <TimePicker\n        //       ampm={false}\n        //       openTo=\"hours\"\n        //       views={['hours', 'minutes', 'seconds']}\n        //       inputFormat=\"HH:mm:ss\"\n        //       mask=\"__:__:__\"\n        //       value={value}\n        //       // onChange={(newValue) => {\n        //       //   setValue(newValue);\n        //       // }}\n        //       renderInput={(params) => <TextField {...params} />}\n        //     />\n        // </LocalizationProvider>\n\n      );\n    } else if (contentItem.type === \"Enum\") {\n      let selectedOption = {\n        \"value\": \"\",\n        \"label\": \"Пусто\",\n        \"name\": contentItem.name\n      };\n\n      if (fieldValue[contentItem.name] !== undefined) {\n        for (let i = 0; i < enumOptions[contentItem.name].length; i++) {\n          if (fieldValue[contentItem.name] === enumOptions[contentItem.name][i].value) {\n            selectedOption = enumOptions[contentItem.name][i];\n            break;\n          }\n        }\n      }\n\n      if (selectedOptions.length !== 0) {\n        for (let i = 0; i < selectedOptions.length; i++) {\n          if (contentItem.name === selectedOptions[i].name) {\n            selectedOption = selectedOptions[i];\n          }\n        }\n      }\n\n      return /*#__PURE__*/React.createElement(Select, {\n        name: contentItem.name,\n        value: selectedOption,\n        onChange: handleSelectChange,\n        options: enumOptions[contentItem.name],\n        isDisabled: formType === \"view\" || contentItem.edit === false ? true : false,\n        menuPortalTarget: document.body,\n        styles: {\n          menuPortal: base => ({ ...base,\n            zIndex: 9999\n          })\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1106,\n          columnNumber: 9\n        }\n      });\n    } // else if (contentItem.type === \"MultiSelect\"){\n    //   return (\n    //     // <div style={{height: \"40px\", overflow: \"auto\"}}>\n    //       <Select\n    //         name={contentItem.name}\n    //         className=\"basic-multi-select\"\n    //         classNamePrefix=\"select\"\n    //         value={multiSelectedOptions[contentItem.name]}\n    //         onChange={handleMultiSelectChange}\n    //         closeMenuOnSelect={false}\n    //         isMulti\n    //         options={multiSelectDataOptions[contentItem.name]}\n    //         isDisabled ={(formType === \"view\" || contentItem.edit === false) ? true : false}\n    //         style={{height: \"120px\"}}\n    //       />\n    //     // </div>\n    //   )\n    // }\n    else if (contentItem.type === \"Currency\") {\n      return /*#__PURE__*/React.createElement(TextField, {\n        value: fieldValue[contentItem.name] ? fieldValue[contentItem.name] : \"\",\n        onBlur: handleChange,\n        name: contentItem.name,\n        style: {\n          minWidth: 300\n        },\n        disabled: formType === \"view\" || contentItem.edit === false ? true : false,\n        InputProps: {\n          inputComponent: NumberFormatCustom\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1137,\n          columnNumber: 9\n        }\n      });\n    } else if (contentItem.type === \"Bool\") {\n      return /*#__PURE__*/React.createElement(Checkbox, {\n        style: {\n          maxWidth: 20,\n          height: 15,\n          color: formType === \"view\" || contentItem.edit === false ? \"grey\" : \"green\"\n        },\n        name: contentItem.name,\n        onChange: handleCheckboxChange,\n        disabled: formType === \"view\" || contentItem.edit === false ? true : false,\n        checked: fieldValue[contentItem.name] === \"True\" || fieldValue[contentItem.name] === true ? true : false,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1149,\n          columnNumber: 9\n        }\n      });\n    }\n  } // Main button click handler\n\n\n  function buttonClick(buttonName) {\n    console.log(\"Button\", buttonName);\n\n    if (buttonName === \"selectReportType\") {\n      let reportFormDefId = null;\n      let reportName = null;\n\n      for (let i = 0; i < enumData.length; i++) {\n        if (props.userTask.enumData[i] !== null) {\n          if (enumData[i].name === \"report_name\") {\n            for (let d = 0; d < enumData[i].data.length; d++) {\n              if (enumData[i].data[d].id === fieldValue[\"report_name\"]) {\n                reportFormDefId = enumData[i].data[d].form_def_id;\n                reportName = enumData[i].data[d].report_name;\n              }\n            }\n          }\n        } else {\n          props.callErrorToast(\"Ошибка сбора справочной информации \" + getLostEnumName(i));\n        }\n      }\n\n      let commandJson = {\n        commandType: \"completeTask\",\n        session_id: session_id,\n        process_id: process_id,\n        taskID: taskID,\n        userId: userProfile.userId,\n        userRole: userProfile.userRole,\n        variables: {\n          userAction: {\n            value: \"selectReportType\"\n          },\n          reportName: {\n            value: reportName\n          },\n          reportFormDefId: {\n            value: reportFormDefId\n          }\n        }\n      };\n      console.log(\"button selectReportType:\", commandJson);\n      props.sendFieldValues(commandJson);\n      props.clearTabData(process_id);\n    } else if (buttonName === \"createReport\") {\n      let checkResult = checkForRequieredFields();\n\n      if (checkResult === true) {\n        // let reportVars = getFieldValuesCreateReport()\n        let reportExecutions = getFieldValuesReportExecutions();\n        let reportExecutionsXML = getFieldValuesCreateReportXML();\n        let reportVars = getFieldValuesCreateReport(); // let parser = new DOMParser();\n        // let xmlDoc = parser.parseFromString(reportExecutionsXML, \"text/xml\");\n\n        repExecution();\n        let commandJson = {\n          // commandType: \"downloadReport\",\n          commandType: \"completeTask\",\n          session_id: session_id,\n          process_id: process_id,\n          taskID: taskID,\n          userId: userProfile.userId,\n          userRole: userProfile.userRole,\n          reportVars,\n          variables: {\n            reportExecutions: {\n              value: JSON.stringify(reportExecutions)\n            },\n            reportExecutionsXML: {\n              value: reportExecutionsXML\n            },\n            userAction: {\n              value: \"createReport\"\n            }\n          }\n        };\n        console.log(\"button createReport:\", commandJson); // props.sendFieldValues(commandJson)\n        // props.clearTabData(process_id)\n      }\n    } else if (buttonName === \"createChargeForCDServiceReport\") {\n      let checkResult = checkForRequieredFields();\n\n      if (checkResult === true) {\n        let reportVars = getFieldValuesCreateReport();\n        let chargeBody = {\n          startDate: fieldValue.start_date,\n          endDate: fieldValue.end_date,\n          depositorId: selectedTransferList.dep_id,\n          serviceTypeId: selectedTransferList.service_type_id\n        };\n        let commandJson = {\n          commandType: \"completeTask\",\n          session_id: session_id,\n          process_id: process_id,\n          taskID: taskID,\n          userId: userProfile.userId,\n          userRole: userProfile.userRole,\n          variables: {\n            reportVars: {\n              value: reportVars\n            },\n            userAction: {\n              value: \"createReport\"\n            },\n            chargeBody: {\n              value: JSON.stringify(chargeBody)\n            }\n          }\n        };\n        console.log(\"button createChargeForCDServiceReport:\", commandJson);\n        props.sendFieldValues(commandJson);\n        props.clearTabData(process_id);\n      }\n    } else if (buttonName === \"createCharge\") {\n      let commandJson = {\n        commandType: \"completeTask\",\n        session_id: session_id,\n        process_id: process_id,\n        taskID: taskID,\n        userId: userProfile.userId,\n        userRole: userProfile.userRole,\n        variables: {\n          userAction: {\n            value: \"createCharge\"\n          }\n        }\n      };\n      console.log(\"button createCharge:\", commandJson);\n      props.sendFieldValues(commandJson);\n      props.clearTabData(process_id);\n    } else if (buttonName === \"reportToExcel\") {\n      downloadReport(\".xlsx\");\n      console.log(\"button reportToExcel: \");\n    } else if (buttonName === \"reportToPDF\") {\n      downloadReport(\".pdf\");\n      console.log(\"button reportToPDF: \");\n    } else if (buttonName === \"reportToWord\") {\n      downloadReport(\".docx\");\n      console.log(\"button reportToWord: \");\n    } else if (buttonName === \"reportToPDFES\") {\n      if (props.esInn === null) {\n        setShowModalEnterPin(true);\n      } else {\n        reportToPDFES(props.esUserFullName, props.esInn, props.esExpiredDate);\n      }\n    } else if (buttonName === \"SignReportSaveButton\") {\n      sign();\n    } else if (buttonName === \"cancel\") {\n      const commandJson = {\n        commandType: \"completeTask\",\n        process_id: process_id,\n        session_id: session_id,\n        taskID: taskID,\n        variables: {\n          userAction: {\n            value: \"cancel\"\n          }\n        }\n      };\n      console.log(\"button cancel: \", commandJson);\n      props.sendFieldValues(commandJson);\n      props.clearTabData(process_id);\n    } else if (buttonName === \"back\") {\n      const commandJson = {\n        commandType: \"completeTask\",\n        process_id: process_id,\n        session_id: session_id,\n        taskID: taskID,\n        variables: {\n          userAction: {\n            value: \"back\"\n          }\n        }\n      };\n      console.log(\"button back: \", commandJson);\n      props.sendFieldValues(commandJson);\n      props.clearTabData(process_id);\n    } else if (buttonName === \"finish\") {\n      const commandJson = {\n        commandType: \"completeTask\",\n        process_id: process_id,\n        session_id: session_id,\n        taskID: taskID,\n        variables: {\n          userAction: {\n            value: \"finish\"\n          }\n        }\n      };\n      console.log(\"button finish: \", commandJson);\n      props.sendFieldValues(commandJson);\n      props.clearTabData(process_id);\n    }\n  } // Transfer List functions\n\n\n  const handleToggle = (value, name) => () => {\n    const currentIndex = checked[name].indexOf(value);\n    const newChecked = [...checked[name]];\n\n    if (currentIndex === -1) {\n      newChecked.push(value);\n    } else {\n      newChecked.splice(currentIndex, 1);\n    }\n\n    setChecked({ ...checked,\n      [name]: newChecked\n    });\n  };\n\n  const handleAllRight = name => {\n    setSelectedTransferList({ ...selectedTransferList,\n      [name]: selectedTransferList[name].concat(transferList[name])\n    });\n    setTransferList({ ...transferList,\n      [name]: []\n    });\n  };\n\n  function handleCheckedRight(name) {\n    // console.log(\"CHECKED RIGHT\", name)\n    setSelectedTransferList({ ...selectedTransferList,\n      [name]: selectedTransferList[name].concat(leftChecked(name))\n    });\n    setTransferList({ ...transferList,\n      [name]: not(transferList[name], leftChecked(name))\n    });\n    setChecked({ ...checked,\n      [name]: not(checked[name], leftChecked(name))\n    });\n  }\n\n  function handleCheckedLeft(name) {\n    setTransferList({ ...transferList,\n      [name]: transferList[name].concat(rightChecked(name))\n    });\n    setSelectedTransferList({ ...selectedTransferList,\n      [name]: not(selectedTransferList[name], rightChecked(name))\n    });\n    setChecked({ ...checked,\n      [name]: not(checked[name], rightChecked(name))\n    });\n  }\n\n  const handleAllLeft = name => {\n    setTransferList({ ...transferList,\n      [name]: transferList[name].concat(selectedTransferList[name])\n    });\n    setSelectedTransferList({ ...selectedTransferList,\n      [name]: []\n    });\n  };\n\n  function getTransferList(items, name, edit) {\n    // console.log(\"G TR L\", items, name)\n    return /*#__PURE__*/React.createElement(Paper, {\n      className: classes.paper,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1383,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(List, {\n      dense: true,\n      component: \"div\",\n      role: \"list\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1384,\n        columnNumber: 9\n      }\n    }, items.map(value => {\n      const labelId = `transfer-list-item-${value}-label`;\n      return /*#__PURE__*/React.createElement(ListItem, {\n        size: \"small\",\n        key: value,\n        role: \"listitem\",\n        button: true,\n        onClick: handleToggle(value, name),\n        style: {\n          height: 40\n        } // disabled={edit === false ? true : false}\n        ,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1388,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(Checkbox, {\n        size: \"small\",\n        checked: checked[name].indexOf(value) !== -1,\n        tabIndex: -1,\n        disableRipple: true,\n        inputProps: {\n          'aria-labelledby': labelId\n        },\n        style: {\n          height: 40\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1396,\n          columnNumber: 17\n        }\n      }), /*#__PURE__*/React.createElement(ListItemText, {\n        id: labelId,\n        primary: getTranserListItemLabel(name, value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1405,\n          columnNumber: 17\n        }\n      }));\n    }), /*#__PURE__*/React.createElement(ListItem, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1409,\n        columnNumber: 11\n      }\n    })));\n  }\n\n  function getTranserListItemLabel(name, value) {\n    // console.log(\"G TRL LABEL\", name, value)\n    for (let e = 0; e < enumData.length; e++) {\n      if (enumData[e].name === name) {\n        for (let d = 0; d < enumData[e].data.length; d++) {\n          if (enumData[e].data[d].id === value) {\n            return enumData[e].data[d].label;\n          }\n        }\n      }\n    }\n  }\n\n  function handleSearchTransferListChange(event) {\n    let name = event.target.name;\n    let value = event.target.value;\n    setAutofocusFieldTrList(name);\n    setTransferListSearchFileds({ ...transferListSearchFileds,\n      [name]: value\n    });\n    let filteredTrListOpts = [];\n\n    for (let e = 0; e < enumData.length; e++) {\n      if (enumData[e].name === name) {\n        for (let d = 0; d < enumData[e].data.length; d++) {\n          let label = enumData[e].data[d].label.toLowerCase();\n          let searchField = value.toLowerCase();\n          let includeSearch = label.includes(searchField);\n\n          if (includeSearch === true) {\n            filteredTrListOpts.push(enumData[e].data[d].id);\n          }\n        }\n      }\n    } // console.log(\"N TR L\", newTrListOpts)\n\n\n    let newTrListOpts = [];\n\n    if (selectedTransferList[name].length > 0) {\n      for (let i = 0; i < filteredTrListOpts.length; i++) {\n        let include = true;\n\n        for (let s = 0; s < selectedTransferList[name].length; s++) {\n          if (filteredTrListOpts[i] === selectedTransferList[name][s]) {\n            include = false;\n            break;\n          }\n        }\n\n        if (include === true) {\n          newTrListOpts.push(filteredTrListOpts[i]);\n        }\n      }\n    } else {\n      newTrListOpts = filteredTrListOpts;\n    }\n\n    setTransferList({ ...transferList,\n      [name]: newTrListOpts\n    });\n  }\n\n  function handleSearchSelectedTransferListChange(event) {\n    let name = event.target.name;\n    let value = event.target.value;\n    setAutofocusFieldSelTrList(name);\n    setSelectedTransferListSearchFileds({ ...selectedTransferListSearchFileds,\n      [name]: value\n    });\n    let filteredTrListOpts = [];\n\n    for (let e = 0; e < enumData.length; e++) {\n      if (enumData[e].name === name) {\n        for (let d = 0; d < enumData[e].data.length; d++) {\n          let label = enumData[e].data[d].label.toLowerCase();\n          let searchField = value.toLowerCase();\n          let includeSearch = label.includes(searchField);\n\n          if (includeSearch === true) {\n            filteredTrListOpts.push(enumData[e].data[d].id);\n          }\n        }\n      }\n    }\n\n    let newSelTrListOpts = [];\n\n    if (transferList[name].length > 0) {\n      for (let i = 0; i < filteredTrListOpts.length; i++) {\n        let include = true;\n\n        for (let s = 0; s < transferList[name].length; s++) {\n          if (filteredTrListOpts[i] === transferList[name][s]) {\n            include = false;\n            break;\n          }\n        }\n\n        if (include === true) {\n          newSelTrListOpts.push(filteredTrListOpts[i]);\n        }\n      }\n    } else {\n      newSelTrListOpts = filteredTrListOpts;\n    }\n\n    setSelectedTransferList({ ...selectedTransferList,\n      [name]: newSelTrListOpts\n    });\n  }\n\n  function getFieldValuesCreateReport() {\n    let reportVars = {};\n    let strReportVars = \"\";\n\n    for (let s = 0; s < Form.sections.length; s++) {\n      for (let c = 0; c < Form.sections[s].contents.length; c++) {\n        let fieldName = Form.sections[s].contents[c].name;\n        let type = Form.sections[s].contents[c].type;\n\n        if (type === \"DateTime\") {\n          reportVars[fieldName] = moment(fieldValue[fieldName]).format(\"DD.MM.YYYY\");\n        } else if (type === \"FullDateTime\") {\n          let convertedDate = moment(fieldValue[fieldName]).format(\"DD.MM.YYYYTHH:mm:ss\");\n          reportVars[fieldName] = convertedDate;\n        } else if (type === \"JasperDate\") {\n          reportVars[fieldName] = moment(fieldValue[fieldName]).format(\"YYYY-MM-DD\");\n        } else if (type === \"TransferList\") {\n          // console.log(\"TTTTTT\", selectedTransferList[fieldName])\n          let strVals = \"\";\n\n          if (selectedTransferList[fieldName].length > 0) {\n            for (let i = 0; i < selectedTransferList[fieldName].length; i++) {\n              let value = selectedTransferList[fieldName][i];\n\n              if (i === selectedTransferList[fieldName].length - 1) {\n                strVals += value;\n              } else {\n                strVals += value + \",\";\n              }\n            }\n          }\n\n          reportVars[fieldName] = strVals; // console.log(\"TR LIST\", strVals)\n        } // else if(type === \"MultiSelect\"){\n        //   if(Object.keys(multiSelectedOptions).length > 0){\n        //     let strVals = \"\"\n        //     for(let i=0; i<multiSelectedOptions[fieldName].length; i++){\n        //       let value = multiSelectedOptions[fieldName][i].value\n        //       if(value !== \"all\"){\n        //         if(i === multiSelectedOptions[fieldName].length-1){\n        //           strVals += value\n        //         }\n        //         else{\n        //           strVals += value + \",\"\n        //         }\n        //       }\n        //     }\n        //     reportVars[fieldName] = strVals\n        //     console.log(\"MULTI\", strVals)\n        //   }\n        // }\n        else {\n          reportVars[fieldName] = fieldValue[fieldName];\n        }\n      }\n    } // console.log(\"REP VARS\", reportVars)\n\n\n    if (Object.keys(reportVars).length > 0) {\n      strReportVars = \"?\";\n\n      for (let key in reportVars) {\n        let newVar = key + \"=\" + reportVars[key] + \"&\";\n        strReportVars = strReportVars + newVar;\n      }\n\n      strReportVars = strReportVars.substring(0, strReportVars.length - 1);\n    }\n\n    return strReportVars;\n  }\n\n  function getFieldValuesReportExecutions() {\n    let reportParams = [];\n\n    for (let s = 0; s < Form.sections.length; s++) {\n      for (let c = 0; c < Form.sections[s].contents.length; c++) {\n        let fieldName = Form.sections[s].contents[c].name;\n        let type = Form.sections[s].contents[c].type;\n\n        if (type === \"DateTime\") {\n          reportParams.push({\n            name: fieldName,\n            value: [moment(fieldValue[fieldName]).format(\"DD.MM.YYYY\")]\n          });\n        } else if (type === \"FullDateTime\") {\n          reportParams.push({\n            name: fieldName,\n            value: [moment(fieldValue[fieldName]).format(\"DD.MM.YYYYTHH:mm:ss\")]\n          });\n        } else if (type === \"JasperDate\") {\n          reportParams.push({\n            name: fieldName,\n            value: [moment(fieldValue[fieldName]).format(\"YYYY-MM-DD\")]\n          });\n        } else if (type === \"TransferList\") {\n          // console.log(\"TTTTTT\", selectedTransferList[fieldName])\n          // let vals = []\n          let strVals = \"\";\n\n          if (selectedTransferList[fieldName].length > 0) {\n            for (let i = 0; i < selectedTransferList[fieldName].length; i++) {\n              let value = selectedTransferList[fieldName][i];\n\n              if (i === selectedTransferList[fieldName].length - 1) {\n                strVals += value; // vals.push(selectedTransferList[fieldName][i])\n              } else {\n                strVals += value + \",\";\n              }\n            }\n          }\n\n          reportParams.push({\n            name: fieldName,\n            value: [strVals]\n          }); // console.log(\"TR LIST\", strVals)\n        } else {\n          reportParams.push({\n            name: fieldName,\n            value: [fieldValue[fieldName]]\n          });\n        }\n      }\n    }\n\n    let obj = {\n      \"reportUnitUri\": \"/reports/interactive/\" + props.userTask.reportName,\n      \"async\": true,\n      \"interactive\": true,\n      \"freshData\": false,\n      \"saveDataSnapshot\": false,\n      \"outputFormat\": \"xlsx\",\n      \"parameters\": {\n        \"reportParameter\": reportParams\n      }\n    }; // let xml = OBJtoXML(obj)\n\n    return obj;\n  }\n\n  function getFieldValuesCreateReportXML() {\n    let reportVars = [];\n\n    for (let s = 0; s < Form.sections.length; s++) {\n      for (let c = 0; c < Form.sections[s].contents.length; c++) {\n        let fieldName = Form.sections[s].contents[c].name;\n        let type = Form.sections[s].contents[c].type;\n\n        if (type === \"DateTime\") {\n          reportVars.push({\n            reportParameter: fieldName,\n            value: {\n              value: moment(fieldValue[fieldName]).format(\"DD.MM.YYYY\")\n            }\n          });\n        } else if (type === \"FullDateTime\") {\n          reportVars.push({\n            reportParameter: fieldName,\n            value: {\n              value: moment(fieldValue[fieldName]).format(\"DD.MM.YYYYTHH:mm:ss\")\n            }\n          });\n        } else if (type === \"JasperDate\") {\n          reportVars.push({\n            reportParameter: fieldName,\n            value: {\n              value: moment(fieldValue[fieldName]).format(\"YYYY-MM-DD\")\n            }\n          });\n        } else if (type === \"TransferList\") {\n          // console.log(\"TTTTTT\", selectedTransferList[fieldName])\n          let strVals = \"\";\n\n          if (selectedTransferList[fieldName].length > 0) {\n            for (let i = 0; i < selectedTransferList[fieldName].length; i++) {\n              let value = selectedTransferList[fieldName][i];\n\n              if (i === selectedTransferList[fieldName].length - 1) {\n                strVals += value;\n              } else {\n                strVals += value + \",\";\n              }\n            }\n          }\n\n          reportVars.push({\n            reportParameter: fieldName,\n            value: {\n              value: strVals\n            }\n          }); // console.log(\"TR LIST\", strVals)\n        } else {\n          reportVars.push({\n            reportParameter: fieldName,\n            value: {\n              value: fieldValue[fieldName]\n            }\n          });\n        }\n      }\n    }\n\n    let obj = {\n      \"reportExecutionRequest\": {\n        \"reportUnitUri\": \"/reports/interactive/\" + props.userTask.reportName,\n        \"async\": \"true\",\n        \"freshData\": \"false\",\n        \"saveDataSnapshot\": \"false\",\n        \"outputFormat\": \"pdf\",\n        \"interactive\": \"true\",\n        \"parameters\": {\n          \"reportParameter\": reportVars\n        }\n      }\n    };\n    let xml = OBJtoXML(obj);\n    return xml;\n  }\n\n  function OBJtoXML(obj) {\n    var xml = '';\n\n    for (var prop in obj) {\n      xml += obj[prop] instanceof Array ? '' : \"<\" + prop + \">\";\n\n      if (obj[prop] instanceof Array) {\n        // for (var array in obj[prop]) {\n        for (let array = 0; array < obj[prop].length; array++) {\n          xml += \"<\" + prop + \" name=\\\"\" + obj[prop][array].reportParameter + \"\\\">\";\n          xml += OBJtoXML(new Object(obj[prop][array].value));\n          xml += \"</\" + prop + \">\";\n        }\n      } else if (typeof obj[prop] == \"object\") {\n        xml += OBJtoXML(new Object(obj[prop]));\n      } else {\n        xml += obj[prop];\n      }\n\n      xml += obj[prop] instanceof Array ? '' : \"</\" + prop + \">\";\n    }\n\n    var xml = xml.replace(/<\\/?[0-9]{1,}>/g, '');\n    return xml;\n  }\n\n  function checkForRequieredFields() {\n    // console.log(\"MOPTS\", multiSelectedOptions)\n    let checkedSuccessfuly = null;\n\n    for (let s = 0; s < Form.sections.length; s++) {\n      for (let c = 0; c < Form.sections[s].contents.length; c++) {\n        let fieldName = Form.sections[s].contents[c].name;\n\n        if (Form.sections[s].contents[c].required === true) {\n          // if(Form.sections[s].contents[c].type === \"MultiSelect\"){\n          //   if(multiSelectedOptions[fieldName] === undefined || multiSelectedOptions[fieldName] === null ||\n          //     multiSelectedOptions[fieldName].length === 0){\n          //     checkedSuccessfuly = false\n          //     swAllert(\"Внимание заполните поле \\\"\" +  Form.sections[s].contents[c].label + \"\\\"\", \"warning\")\n          //     return checkedSuccessfuly\n          //   }\n          //   else{\n          //     checkedSuccessfuly = true\n          //   }\n          // }\n          if (Form.sections[s].contents[c].type === \"TransferList\") {\n            if (selectedTransferList[fieldName] === undefined || selectedTransferList[fieldName] === null || selectedTransferList[fieldName].length === 0) {\n              checkedSuccessfuly = false; // swAllert(\"Внимание заполните поле \\\"\" + Form.sections[s].contents[c].label + \"\\\"\", \"warning\")\n\n              props.callErrorToast(\"Внимание заполните поле \\\"\" + Form.sections[s].contents[c].label + \"\\\"\");\n              return checkedSuccessfuly;\n            } else {\n              checkedSuccessfuly = true;\n            }\n          } else {\n            if (fieldValue[fieldName] === undefined || fieldValue[fieldName] === null || fieldValue[fieldName] === \"NaN.NaN.NaN\" || fieldValue[fieldName] === \"\") {\n              checkedSuccessfuly = false; // swAllert(\"Внимание заполните поле \\\"\" + Form.sections[s].contents[c].label + \"\\\"\", \"warning\")\n\n              props.callErrorToast(\"Внимание заполните поле \\\"\" + Form.sections[s].contents[c].label + \"\\\"\");\n              return checkedSuccessfuly;\n            } else {\n              checkedSuccessfuly = true;\n            }\n          }\n        } else {\n          checkedSuccessfuly = true;\n        }\n      }\n    }\n\n    return checkedSuccessfuly;\n  }\n\n  async function repserverlogin() {\n    await fetch(`/jasperserver/rest_v2/login?j_username=jasperadmin&j_password=jasperadmin`, {\n      mode: 'no-cors',\n      method: 'GET',\n      withCredentials: true,\n      credentials: 'include',\n      headers: {\n        'Content-Type': 'text/html; charset=utf-8'\n      }\n    }).then(response => {\n      // response.text().then(string => {\n      console.log(\"JASPERT AUTH\", response); // })\n    }).catch(error => console.error(error));\n  }\n\n  async function downloadReport(type) {\n    await repserverlogin(); // await fetch(\"/jasperserver/rest_v2/reports/reports/interactive/\" + reportName + type + reportVars,\n    //   {\n    //     method: 'GET',\n    //     // mode: 'no-cors',\n    //     // withCredentials: true,\n    //     credentials: 'include',\n    //     headers: {\n    //       'Content-Type': 'text/html; charset=utf-8',\n    //       'Authorization': 'Basic amFzcGVyYWRtaW46amFzcGVyYWRtaW4=' // + btoa(unescape(encodeURIComponent(\"jasperadmin:jasperadmin\")))\n    //     }\n    //   }\n    // )\n    //   .then(response => response.blob())\n    //   .then(blob => {\n    //     console.log(\"RESP\", blob)\n    //     var url = window.URL.createObjectURL(blob)\n    //     var a = document.createElement('a')\n    //     a.href = url\n    //     a.download = reportName + type\n    //     document.body.appendChild(a) // we need to append the element to the dom -> otherwise it will not work in firefox\n    //     a.click()\n    //     a.remove()  //afterwards we remove the element again         \n    //   })\n    //   .catch(error => console.error(error));\n\n    let requestId = reportVars.requestId;\n    let exportId = reportVars.exports[0].id; // console.log(\"REQID\", requestId, \"EXPID\", exportId)\n\n    await fetch(\"/jasperserver/rest_v2/reportExecutions/\" + requestId + \"/exports/\" + exportId + \"/outputResource\", {\n      method: 'GET',\n      mode: 'no-cors',\n      withCredentials: true,\n      credentials: 'include',\n      headers: {\n        'Content-Type': 'text/html; charset=utf-8',\n        'Authorization': 'Basic amFzcGVyYWRtaW46amFzcGVyYWRtaW4=' // + btoa(unescape(encodeURIComponent(\"jasperadmin:jasperadmin\")))\n\n      }\n    }).then(response => response.text()).then(text => {\n      console.log(\"RESP\", text); // var url = window.URL.createObjectURL(blob)\n      // var a = document.createElement('a')\n      // a.href = url\n      // a.download = reportName + type\n      // document.body.appendChild(a) // we need to append the element to the dom -> otherwise it will not work in firefox\n      // a.click()\n      // a.remove()  //afterwards we remove the element again\n\n      setSelectedDoc(text);\n    }).catch(error => console.error(error));\n  }\n\n  async function repExecution() {\n    await repserverlogin();\n    let body = getFieldValuesReportExecutions(); // let body = getFieldValuesCreateReportXML()\n\n    await fetch(\"/jasperserver/rest_v2/reportExecutions\", {\n      method: 'POST',\n      mode: 'no-cors',\n      // withCredentials: true,\n      // credentials: 'include',\n      credentials: 'same-origin',\n      headers: {\n        // \"content-type\": \"API-Key\",\n        'Content-Type': 'application/json',\n        'Authorization': 'Basic amFzcGVyYWRtaW46amFzcGVyYWRtaW4='\n      },\n      body: JSON.stringify(body)\n    }).then(response => console.log(\"RESP\", response)).catch(error => console.error(error)); // await request(\n    //   {\n    //     \"url\": 'http://192.168.2.150:8080/jasperserver/rest_v2/reportExecutions',\n    //     \"headers\": { \"content-type\": \"application/json\", 'Authorization': 'Basic amFzcGVyYWRtaW46amFzcGVyYWRtaW4='},\n    //     // \"body\": JSON.stringify(body),\n    //     \"body\": body,\n    //     \"json\": true,\n    //     \"method\": 'POST',\n    //     \"mode\": 'no-cors',\n    //     \"cache\": 'no-cache',\n    //     \"withCredentials\": true,\n    //     \"credentials\": 'include',\n    //   }\n    // )\n    //   .then(async function (response) {\n    //     console.log(\"RESP\", response)     \n    //   })\n    //   .catch(function (error) {\n    //     console.log(\"ERR\", error)\n    //   })\n    // let headers = { \"content-type\": \"application/json\", 'Authorization': 'Basic amFzcGVyYWRtaW46amFzcGVyYWRtaW4='}\n    // axios\n    //   .post(\"http://192.168.2.150:8080/jasperserver/rest_v2/reportExecutions\", body, headers)\n    //   .then(function(response) {\n    //     console.log(response.data);\n    //   })\n    //   .catch(function(error) {\n    //     console.log(error);\n    //   });\n  }\n\n  async function reportToPDFES(fullName, inn, expiredDate) {\n    // await repserverlogin()\n    await fetch(\"/jasperserver/rest_v2/reports/reports/interactive/\" + reportName + \".pdf\" + reportVars, {\n      mode: 'no-cors',\n      method: 'GET',\n      withCredentials: true,\n      credentials: 'include',\n      headers: {\n        'Content-Type': 'text/html; charset=utf-8',\n        // 'Authorization': 'Basic ' + btoa(unescape(encodeURIComponent(\"jasperadmin:jasperadmin\")))\n        'Authorization': 'Basic amFzcGVyYWRtaW46amFzcGVyYWRtaW4='\n      }\n    }).then(response => response.blob()).then(blob => {\n      // console.log(\"REPORT\", blob);\n      blob.name = reportName + \".pdf\";\n      let formData = new FormData();\n      formData.append(\"formFile\", blob, reportName + \".pdf\"); // for (var value of formData.values()) {\n      //   console.log(\"FVAL\", value)\n      // }\n\n      let url = props.api + \"/Template/AddWatermark?text=ФИО: \" + fullName + \" ПИН: \" + inn + \" \" + expiredDate;\n      var requestOptions = {\n        method: 'POST',\n        body: formData,\n        redirect: 'follow'\n      };\n      fetch(url, requestOptions).then(response => response.blob()).then(bl => {\n        console.log(\"RES\", bl);\n        var pdf = new Blob([bl], {\n          type: \"application/pdf\"\n        });\n        var docUrl = window.URL.createObjectURL(pdf);\n        var a = document.createElement('a');\n        a.href = docUrl;\n        a.download = `${reportName}.pdf`;\n        document.body.appendChild(a);\n        a.click();\n        a.remove();\n      }).catch(error => console.log('error', error));\n    }).catch(error => console.error(error));\n  }\n\n  try {\n    return /*#__PURE__*/React.createElement(Grid, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1932,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      name: \"top\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1933,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(Grid, {\n      container: true,\n      direction: \"row\",\n      justify: \"flex-start\",\n      spacing: 1,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1934,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Grid, {\n      item: true,\n      xs: 11,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1935,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Paper, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1936,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Grid, {\n      container: true,\n      direction: \"row\",\n      justify: \"center\",\n      alignItems: \"center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1937,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(TableHead, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1938,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(TableRow, {\n      style: {\n        maxHeight: 25\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1939,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(TableCell, {\n      style: {\n        fontSize: 16,\n        color: \"black\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1940,\n        columnNumber: 21\n      }\n    }, Form.label)))), /*#__PURE__*/React.createElement(Grid, {\n      container: true,\n      direction: \"row\",\n      justify: \"center\",\n      alignItems: \"center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1944,\n        columnNumber: 15\n      }\n    }, Form.sections.map((section, index) => {\n      return sectionBuilder(section, index);\n    })), /*#__PURE__*/React.createElement(Grid, {\n      container: true,\n      direction: \"row\",\n      justify: \"flex-start\",\n      alignItems: \"flex-start\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1949,\n        columnNumber: 15\n      }\n    }, buttons.map((button, index) => /*#__PURE__*/React.createElement(Button, {\n      variant: \"outlined\",\n      name: button.name,\n      onClick: () => buttonClick(button.name),\n      style: {\n        margin: 3,\n        backgroundColor: button.backgroundColor,\n        height: 32,\n        fontSize: 12,\n        color: button.fontColor\n      },\n      value: button.name,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1951,\n        columnNumber: 19\n      }\n    }, button.label)))), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1969,\n        columnNumber: 13\n      }\n    }), selectedDoc !== null && /*#__PURE__*/React.createElement(Markup, {\n      id: \"reportContainer\",\n      content: selectedDoc,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1975,\n        columnNumber: 15\n      }\n    }))), /*#__PURE__*/React.createElement(Modal, {\n      open: showModalEnterPin,\n      onClose: handleCloseModalEnterPin,\n      \"aria-labelledby\": \"simple-modal-title\",\n      \"aria-describedby\": \"simple-modal-description\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1979,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: modalStyle,\n      className: classes.modal,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1985,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      id: \"simple-modal-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1986,\n        columnNumber: 13\n      }\n    }, \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u041F\\u0418\\u041D \\u043A\\u043E\\u0434 \\u0420\\u0443\\u0442\\u043E\\u043A\\u0435\\u043D\\u0430\"), /*#__PURE__*/React.createElement(FormControl, {\n      variant: \"outlined\",\n      style: {\n        width: \"100%\"\n      },\n      error: wrongPin,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1987,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(InputLabel, {\n      htmlFor: \"outlined-adornment-password\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1988,\n        columnNumber: 15\n      }\n    }, \"PIN\"), /*#__PURE__*/React.createElement(OutlinedInput, {\n      type: showPin ? 'text' : 'password',\n      defaultValue: rutokenPin,\n      onChange: handlePinChange,\n      onKeyPress: onKeyPressModalEnterPin,\n      autoFocus: true,\n      endAdornment: /*#__PURE__*/React.createElement(InputAdornment, {\n        position: \"end\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1996,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(IconButton, {\n        \"aria-label\": \"toggle password visibility\",\n        onClick: handleClickShowPin,\n        edge: \"end\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1997,\n          columnNumber: 21\n        }\n      }, showPin ? /*#__PURE__*/React.createElement(Visibility, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2002,\n          columnNumber: 34\n        }\n      }) : /*#__PURE__*/React.createElement(VisibilityOff, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2002,\n          columnNumber: 51\n        }\n      }))),\n      labelWidth: 25,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1989,\n        columnNumber: 15\n      }\n    })), wrongPin === true && /*#__PURE__*/React.createElement(\"p\", {\n      color: \"red\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 2009,\n        columnNumber: 35\n      }\n    }, \"\\u041D\\u0435 \\u0432\\u0435\\u0440\\u043D\\u044B\\u0439 PIN\"), /*#__PURE__*/React.createElement(Button, {\n      variant: \"contained\",\n      onClick: () => buttonClick(\"SignReportSaveButton\"),\n      style: {\n        margin: 3,\n        height: 32,\n        fontSize: 12,\n        color: \"white\",\n        backgroundColor: \"#2862F4\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 2010,\n        columnNumber: 13\n      }\n    }, \"\\u041E\\u043A\"), /*#__PURE__*/React.createElement(Button, {\n      variant: \"contained\",\n      onClick: handleCloseModalEnterPin,\n      style: {\n        margin: 3,\n        height: 32,\n        fontSize: 12,\n        color: \"white\",\n        backgroundColor: \"#E73639\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 2022,\n        columnNumber: 13\n      }\n    }, \"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\"))));\n  } catch (error) {\n    console.log(\"ERROR\", error);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 2041,\n        columnNumber: 12\n      }\n    }, \"error\");\n  }\n});","map":{"version":3,"names":["React","useState","useEffect","Select","NumberFormat","PropTypes","Grid","TextField","Button","Checkbox","Table","TableHead","TableBody","TableRow","TableCell","Paper","Modal","FormControl","List","ListItem","ListItemIcon","ListItemText","ArrowUpwardRoundedIcon","FormControlLabel","OutlinedInput","InputLabel","InputAdornment","Visibility","VisibilityOff","IconButton","fade","makeStyles","swal","Markup","rutoken","moment","require","axios","request","plugin","rutokenHandle","certHandle","certData","cmsData","NumberFormatCustom","props","inputRef","onChange","other","values","target","value","propTypes","func","isRequired","useStyles","theme","importFile","margin","spacing","inputFile","display","modal","position","width","backgroundColor","palette","background","paper","border","boxShadow","shadows","padding","height","overflow","button","getModalStyle","top","left","transform","not","a","b","filter","indexOf","intersection","classes","userProfile","process_id","userTask","session_id","taskID","taskType","enumOptions","setEnumOptions","Form","setForm","enumData","selectedOptions","setSelectedOptions","reportName","fieldValue","setFieldValue","docId","buttons","formType","sectionColor","selectedDoc","setSelectedDoc","updateState","setUpdateState","reportVars","setReportVars","showModalEnterPin","setShowModalEnterPin","rutokenPin","setRutokenPin","showPin","setShowPin","wrongPin","setWrongPin","modalStyle","transferList","setTransferList","reg_id","sec_id","acc_type_code","dep_id","corr_dep_id","currency_id","service_type_id","issuer_id","checked","setChecked","selectedTransferList","setSelectedTransferList","transferListSearchFileds","setTransferListSearchFileds","selectedTransferListSearchFileds","setSelectedTransferListSearchFileds","autofocusFieldTrList","setAutofocusFieldTrList","autofocusFieldSelTrList","setAutofocusFieldSelTrList","leftChecked","name","rightChecked","repserverlogin","console","log","undefined","newEnumOptions","i","length","options","d","data","report_name","push","id","label","getLostEnumName","callErrorToast","newTrListOpts","createTransferListOptions","userRole","s","sections","c","contents","n","edit","ed","e","partner","parseInt","trList","regId","filteredSecurities","registrar","selTrList","parsedVars","JSON","parse","er","newFields","type","Date","getUUID","enumI","form","enums","newTransferList","newSelectedTransferList","newTrItems","newSelTrItems","cName","ready","then","window","chrome","InstallTrigger","isExtensionInstalled","Promise","resolve","result","isPluginInstalled","loadPlugin","uuidv1","handleCloseModalEnterPin","handlePinChange","event","handleClickShowPin","sign","enumerateDevices","devices","alert","firstDevice","getDeviceInfo","TOKEN_INFO_IS_LOGGED_IN","isLoggedIn","login","enumerateCertificates","CERT_CATEGORY_UNSPEC","certs","parseCertificate","inn","fullName","subject","rdn","setEsInn","setEsUserFullName","setEsExpiredDate","validNotAfter","substring","reportToPDFES","DATA_FORMAT_PLAIN","logout","handleError","reason","isNaN","message","errorCodes","PIN_INCORRECT","onKeyPressModalEnterPin","code","charCode","buttonClick","handleChange","handleDateChange","handleTimeChange","fullDate","date","format","time","handleDateTimeChange","handleCheckboxChange","swAllert","text","icon","ok","handleSelectChange","option","updateSelectedOptions","slice","noSuchOption","handleIntChange","stringNum","toString","replace","int","sectionBuilder","section","index","color","fontSize","bodyBuilder","map","contentItem","show","handleSearchTransferListChange","handleSearchSelectedTransferListChange","getTransferList","handleAllRight","handleCheckedRight","handleCheckedLeft","handleAllLeft","contentBuilder","inputComponent","shrink","selectedOption","document","body","menuPortal","base","zIndex","minWidth","maxWidth","buttonName","reportFormDefId","form_def_id","commandJson","commandType","userId","variables","userAction","sendFieldValues","clearTabData","checkResult","checkForRequieredFields","reportExecutions","getFieldValuesReportExecutions","reportExecutionsXML","getFieldValuesCreateReportXML","getFieldValuesCreateReport","repExecution","stringify","chargeBody","startDate","start_date","endDate","end_date","depositorId","serviceTypeId","downloadReport","esInn","esUserFullName","esExpiredDate","handleToggle","currentIndex","newChecked","splice","concat","items","labelId","getTranserListItemLabel","filteredTrListOpts","toLowerCase","searchField","includeSearch","includes","include","newSelTrListOpts","strReportVars","fieldName","convertedDate","strVals","Object","keys","key","newVar","reportParams","obj","reportParameter","xml","OBJtoXML","prop","Array","array","checkedSuccessfuly","required","fetch","mode","method","withCredentials","credentials","headers","response","catch","error","requestId","exportId","exports","expiredDate","blob","formData","FormData","append","url","api","requestOptions","redirect","bl","pdf","Blob","docUrl","URL","createObjectURL","createElement","href","download","appendChild","click","remove","maxHeight","fontColor"],"sources":["C:/Users/SERGO/Desktop/depo/src/components/Reports/Reports.jsx"],"sourcesContent":["// Import material and react components\nimport React, { useState, useEffect } from 'react';\nimport Select from 'react-select';\nimport NumberFormat from 'react-number-format';\nimport PropTypes from 'prop-types';\nimport Grid from \"@material-ui/core/Grid\";\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Table from \"@material-ui/core/Table\";\nimport TableHead from \"@material-ui/core/TableHead\";\nimport TableBody from \"@material-ui/core/TableBody\";\nimport TableRow from \"@material-ui/core/TableRow\";\nimport TableCell from \"@material-ui/core/TableCell\";\nimport Paper from '@material-ui/core/Paper';\nimport Modal from \"@material-ui/core/Modal\";\nimport FormControl from '@material-ui/core/FormControl';\n\n// import AdapterDateFns from '@mui/lab/AdapterDateFns';\n// import { AdapterDayjs } from '@mui/x-date-pickers/AdapterDayjs';\n// import LocalizationProvider from '@mui/lab/LocalizationProvider';\n// import Stack from '@mui/material/Stack';\n// import TimePicker from '@mui/lab/TimePicker';\n// import dayjs, { Dayjs } from 'dayjs';\n\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\n// Icons\nimport ArrowUpwardRoundedIcon from '@mui/icons-material/ArrowUpwardRounded';\n// PIN components\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport OutlinedInput from '@material-ui/core/OutlinedInput';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport Visibility from '@material-ui/icons/Visibility';\nimport VisibilityOff from '@material-ui/icons/VisibilityOff';\nimport IconButton from '@material-ui/core/IconButton';\n\nimport { fade, makeStyles } from '@material-ui/core/styles';\n// Import libraries\nimport swal from 'sweetalert' // https://sweetalert.js.org/guides/\nimport { Markup } from 'interweave';\nimport * as rutoken from \"rutoken\";\n// import is from 'date-fns/esm/locale/is/index.js';\nvar moment = require('moment');\nconst axios = require('axios');\nvar request = require(\"request-promise\");\nvar plugin;\nvar rutokenHandle, certHandle, certData, cmsData;\n\nfunction NumberFormatCustom(props) {\n  const { inputRef, onChange, ...other } = props;\n  return (\n    <NumberFormat\n      {...other}\n      getInputRef={inputRef}\n      onValueChange={values => {\n        onChange({\n          target: {\n            value: values.value,\n          },\n        });\n      }}\n      decimalSeparator={\",\"}\n      isNumericString\n    />\n  );\n}\nNumberFormatCustom.propTypes = {\n  inputRef: PropTypes.func.isRequired,\n  onChange: PropTypes.func.isRequired,\n}\nconst useStyles = makeStyles((theme) => ({\n  importFile: {\n    '& > *': {\n      margin: theme.spacing(1),\n    },\n  },\n  inputFile: {\n    display: 'none',\n  },\n  modal: {\n    position: 'absolute',\n    width: 500,\n    backgroundColor: theme.palette.background.paper,\n    border: '1px solid #AFAFAF',\n    boxShadow: theme.shadows[5],\n    padding: theme.spacing(2, 4, 3),\n  },\n  paper: {\n    width: \"100%\",\n    height: 200,\n    overflow: 'auto',\n  },\n  button: {\n    // width: \"5%\",\n    margin: theme.spacing(0),\n  }\n}))\nfunction getModalStyle() {\n  const top = 35;\n  const left = 45;\n  return {\n    top: `${top}%`,\n    left: `${left}%`,\n    transform: `translate(-${top}%, -${left}%)`,\n  };\n}\nfunction not(a, b) {\n  return a.filter((value) => b.indexOf(value) === -1);\n}\nfunction intersection(a, b) {\n  return a.filter((value) => b.indexOf(value) !== -1);\n}\nexport default (props) => {\n  // This.state\n  const classes = useStyles();\n  const [userProfile] = useState(props.userProfile)\n  const [process_id] = useState(props.userTask.process_id)\n  const [session_id] = useState(props.userTask.session_id)\n  const [taskID] = useState(props.userTask.taskID)\n  const [taskType] = useState(props.userTask.taskType)\n  const [enumOptions, setEnumOptions] = useState({})\n  const [Form, setForm] = useState(props.userTask.Form)\n  const [enumData] = useState(props.userTask.enumData)\n  const [selectedOptions, setSelectedOptions] = useState([])\n\n  // const [multiSelectData] = useState(props.userTask.multiSelectData)\n  // const [multiSelectDataOptions, setMultiSelectDataOptions] = useState({})\n  // const [multiSelectedOptions, setMultiSelectedOptions] = useState({})\n  // const [gridForm] = useState(props.userTask.gridForm)\n  const [reportName] = useState(props.userTask.reportName)\n  const [fieldValue, setFieldValue] = useState({})\n  const [docId] = useState(props.userTask.docId)\n  const [buttons] = useState(props.userTask.buttons)\n  const [formType] = useState(props.userTask.formType)\n\n  const [sectionColor] = useState(\"#B2E0C9\")\n  const [selectedDoc, setSelectedDoc] = useState(null)\n  const [updateState, setUpdateState] = useState(false)\n  const [reportVars, setReportVars] = useState(props.userTask.reportVars)\n\n  // modals\n  const [showModalEnterPin, setShowModalEnterPin] = useState(false)\n  const [rutokenPin, setRutokenPin] = useState(\"\")\n  const [showPin, setShowPin] = useState(false)\n  const [wrongPin, setWrongPin] = useState(false)\n  const [modalStyle] = useState(getModalStyle)\n  // TRANSFER LIST\n  const [transferList, setTransferList] = useState({ reg_id: [], sec_id: [], acc_type_code: [], dep_id: [], corr_dep_id: [], currency_id: [], service_type_id: [], issuer_id: [] })\n  const [checked, setChecked] = useState({ reg_id: [], sec_id: [], acc_type_code: [], dep_id: [], corr_dep_id: [], currency_id: [], service_type_id: [], issuer_id: [] })\n  const [selectedTransferList, setSelectedTransferList] = useState({ reg_id: [], sec_id: [], acc_type_code: [], dep_id: [], corr_dep_id: [], currency_id: [], service_type_id: [], issuer_id: [] })\n  const [transferListSearchFileds, setTransferListSearchFileds] = useState({})\n  const [selectedTransferListSearchFileds, setSelectedTransferListSearchFileds] = useState({})\n  const [autofocusFieldTrList, setAutofocusFieldTrList] = useState(null)\n  const [autofocusFieldSelTrList, setAutofocusFieldSelTrList] = useState(null)\n\n  // const [value, setValue] = React.useState < Dayjs | null > (dayjs('2022-04-07'));\n\n  function leftChecked(name) {\n    return intersection(checked[name], transferList[name])\n  }\n  function rightChecked(name) {\n    return intersection(checked[name], selectedTransferList[name])\n  }\n\n  // Initializing\n  useEffect(() => {\n    repserverlogin()\n    console.log(\"REP PROPS\", props.userTask, props.userProfile)\n    if (props.userTask.enumData !== null && props.userTask.enumData !== undefined && props.userTask.enumData !== \"null\") {\n      let newEnumOptions = {}\n      for (let i = 0; i < props.userTask.enumData.length; i++) {\n        if (props.userTask.enumData[i] !== null) {\n          let options = [{\n            \"value\": \"\",\n            \"label\": \"Пусто\",\n            \"name\": props.userTask.enumData[i].name\n          }]\n          if (props.userTask.enumData[i].name === \"report_name\") {\n            if (props.userTask.taskType === \"showReportsSelectingForm\") {\n              for (let d = 0; d < props.userTask.enumData[i].data.length; d++) {\n                if (props.userProfile[props.userTask.enumData[i].data[d].report_name] === true) {\n                  options.push({\n                    \"value\": props.userTask.enumData[i].data[d].id,\n                    \"label\": props.userTask.enumData[i].data[d].label,\n                    \"name\": props.userTask.enumData[i].name\n                  })\n                }\n              }\n            }\n          }\n          else {\n            for (let d = 0; d < props.userTask.enumData[i].data.length; d++) {\n              options.push({\n                \"value\": props.userTask.enumData[i].data[d].id,\n                \"label\": props.userTask.enumData[i].data[d].label,\n                \"name\": props.userTask.enumData[i].name\n              })\n            }\n          }\n          newEnumOptions[props.userTask.enumData[i].name] = options\n        }\n        else {\n          let options = [{\n            \"value\": \"\",\n            \"label\": \"Ошибка...\",\n            \"name\": getLostEnumName(i)\n          }]\n          newEnumOptions[getLostEnumName(i)] = options\n          props.callErrorToast(\"Ошибка сбора справочной информации \" + getLostEnumName(i))\n        }\n      }\n      setEnumOptions(newEnumOptions)\n      let newTrListOpts = createTransferListOptions(props.userTask.Form, props.userTask.enumData)\n\n      if (userProfile.userRole === \"3\") { // Depositor\n        for (let s = 0; s < Form.sections.length; s++) {  // Block depositor field\n          for (let c = 0; c < Form.sections[s].contents.length; c++) {\n            let n = Form.sections[s].contents[c].name\n            if (n === \"dep_id\") {\n              Form.sections[s].contents[c].edit = false\n              // console.log(\"BLOCK\", Form.sections[s].contents[c])\n              let ed = props.userTask.enumData\n              for (let e = 0; e < ed.length; e++) {\n                if (ed[e].name === \"depositors\") {\n                  for (let d = 0; d < ed[e].data.length; d++) {\n                    if (ed[e].data[d].partner === parseInt(userProfile.partner)) {\n                      // setSelectedTransferList({ ...selectedTransferList, \"dep_id\": [ed[e].data[d].id] })\n                      newTrListOpts.trList.dep_id = [ed[e].data[d].id]\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n        setForm(Form)\n        // for(let i=0; i<multiSelectData.length; i++){// find accounts of depositor\n        //   let options = [{\n        //     \"value\": \"all\",\n        //     \"label\": \"Все\"\n        //   }]\n        //   if(multiSelectData[i].name === \"acc_id\"){\n        //     for(let d=0; d<multiSelectData[i].data.length; d++){\n        //       if(multiSelectData[i].data[d].partner === parseInt(userProfile.partner)){\n        //         options.push({\n        //           \"value\": multiSelectData[i].data[d].id,\n        //           \"label\": multiSelectData[i].data[d].label,\n        //         })\n        //       }\n        //     } \n        //   }\n        //   newMultiSelectDatamOptions[multiSelectData[i].name] = options\n        // }\n        // setMultiSelectDataOptions(newMultiSelectDatamOptions)\n      }\n      if (userProfile.userRole === \"4\") { // Registrar\n        // console.log(\"REGS\", userProfile)\n        for (let s = 0; s < Form.sections.length; s++) {\n          for (let c = 0; c < Form.sections[s].contents.length; c++) {\n            let n = Form.sections[s].contents[c].name\n            if (n === \"reg_id\") {\n              Form.sections[s].contents[c].edit = false // Block registrar field\n              // console.log(\"BLOCK\", Form.sections[s].contents[c])\n              let ed = props.userTask.enumData\n              for (let e = 0; e < ed.length; e++) {\n                if (ed[e].name === \"registrars\") {\n                  for (let d = 0; d < ed[e].data.length; d++) {\n                    if (ed[e].data[d].partner === parseInt(userProfile.partner)) {\n                      // newTrListOpts.selTrList.reg_id = [ed[e].data[d].id]\n                      newTrListOpts.trList.reg_id = [ed[e].data[d].id]\n                      // setTransferList({ ...transferList, \"registrars\": [] })\n                      // setSelectedTransferList({ ...selectedTransferList, \"registrars\": [ed[e].data[d].id] })\n                    }\n                  }\n                }\n              }\n\n            }\n            else if (n === \"sec_id\") {\n              let regId = null\n              let filteredSecurities = []\n              let ed = props.userTask.enumData\n              for (let e = 0; e < ed.length; e++) {\n                if (ed[e].name === \"registrars\") {\n                  for (let d = 0; d < ed[e].data.length; d++) {\n                    if (ed[e].data[d].partner === parseInt(userProfile.partner)) {\n                      regId = ed[e].data[d].id\n                    }\n                  }\n                }\n              }\n              for (let e = 0; e < ed.length; e++) {\n                if (ed[e].name === \"sec_id\") {\n                  for (let d = 0; d < ed[e].data.length; d++) {\n                    if (ed[e].data[d].registrar === regId) {\n                      filteredSecurities.push(ed[e].data[d].id)\n                    }\n                  }\n                }\n              }\n              newTrListOpts.trList.sec_id = filteredSecurities\n            }\n          }\n        }\n        setForm(Form)\n      }\n      if (userProfile.userRole === \"8\") { // CorrDepository\n        for (let s = 0; s < Form.sections.length; s++) {\n          for (let c = 0; c < Form.sections[s].contents.length; c++) {\n            let n = Form.sections[s].contents[c].name\n            if (n === \"corr_dep_id\") {\n              Form.sections[s].contents[c].edit = false // Block corrDepositories field\n              // console.log(\"BLOCK\", Form.sections[s].contents[c])\n              let ed = props.userTask.enumData\n              for (let e = 0; e < ed.length; e++) {\n                if (ed[e].name === \"corrDepositories\") {\n                  for (let d = 0; d < ed[e].data.length; d++) {\n                    if (ed[e].data[d].partner === parseInt(userProfile.partner)) {\n                      newTrListOpts.trList.corr_dep_id = [ed[e].data[d].id]\n                      // setSelectedTransferList({ ...selectedTransferList, \"corrDepositories\": [ed[e].data[d].id] })\n                    }\n                  }\n                }\n              }\n\n            }\n          }\n        }\n        setForm(Form)\n      }\n      setTransferList(newTrListOpts.trList)\n      setSelectedTransferList(newTrListOpts.selTrList)\n    }\n    // let newMultiSelectDatamOptions = {}\n    // if(props.userTask.multiSelectData !== null && props.userTask.multiSelectData !== undefined && props.userTask.multiSelectData !== \"null\"){\n    //   for(let i=0; i<multiSelectData.length; i++){\n    //     let options = [{\n    //       \"value\": \"all\",\n    //       \"label\": \"Все\"\n    //     }]\n    //     if(multiSelectData[i].name !== \"acc_id\"){\n    //       for(let d=0; d<multiSelectData[i].data.length; d++){\n    //         options.push({\n    //           \"value\": multiSelectData[i].data[d].id,\n    //           \"label\": multiSelectData[i].data[d].label,\n    //         })\n    //       }\n    //     }\n    //     else{\n    //       for(let d=0; d<multiSelectData[i].data.length; d++){\n    //         if(multiSelectData[i].data[d].partner === parseInt(userProfile.partner)){\n    //           options.push({\n    //             \"value\": multiSelectData[i].data[d].id,\n    //             \"label\": multiSelectData[i].data[d].label,\n    //           })\n    //         }\n    //       }\n    //     }\n    //     newMultiSelectDatamOptions[multiSelectData[i].name] = options\n    //   }\n    //   setMultiSelectDataOptions(newMultiSelectDatamOptions)\n    //   console.log(\"MS DATA OPTS\", newMultiSelectDatamOptions)\n    // }\n    if (props.userTask.selectedDoc !== \"null\" && props.userTask.selectedDoc !== undefined) {\n      // console.log(\"SDOC\", props.userTask.selectedDoc)\n      setSelectedDoc(props.userTask.selectedDoc)\n    }\n    if (props.userTask.reportVars !== \"null\" && props.userTask.reportVars !== undefined) {\n      try {\n        let parsedVars = JSON.parse(props.userTask.reportVars)\n        setReportVars(parsedVars)\n        console.log(\"VARS\", parsedVars)\n      }\n      catch (er) {\n        console.log(\"VARS\", props.userTask.reportVars)\n      }\n\n    }\n\n    let newFields = {}\n    for (let s = 0; s < Form.sections.length; s++) { // Set current date to DateTime fields\n      for (let c = 0; c < Form.sections[s].contents.length; c++) {\n        if (Form.sections[s].contents[c].type === \"FullDateTime\")\n          newFields[Form.sections[s].contents[c].name] = new Date()\n      }\n    }\n    console.log(\"NEW F\", newFields)\n    setFieldValue(newFields)\n    setUpdateState(getUUID())\n  }, [])\n  function getLostEnumName(i) {\n    let enumI = 0\n    for (let s = 0; s < Form.sections.length; s++) {\n      for (let c = 0; c < Form.sections[s].contents.length; c++) {\n        if (Form.sections[s].contents[c].type === \"Enum\") {\n          if (enumI === i) {\n            return Form.sections[s].contents[c].name\n          }\n          else { enumI += 1 }\n        }\n      }\n    }\n  }\n  function createTransferListOptions(form, enums) {\n    let newTransferList = {}\n    let newSelectedTransferList = {}\n    for (let s = 0; s < form.sections.length; s++) {\n      for (let c = 0; c < form.sections[s].contents.length; c++) {\n        if (form.sections[s].contents[c].type === \"TransferList\") {\n          let newTrItems = []\n          let newSelTrItems = []\n          let cName = form.sections[s].contents[c].name\n          for (let e = 0; e < enums.length; e++) {\n            if (enums[e] !== null) {\n              if (enums[e].name === cName) {\n                for (let d = 0; d < enums[e].data.length; d++) {\n                  newTrItems.push(enums[e].data[d].id)\n                }\n              }\n            }\n            else {\n              props.callErrorToast(\"Ошибка сбора справочной информации \" + cName)\n            }\n          }\n          newTransferList[cName] = newTrItems\n          newSelectedTransferList[cName] = newSelTrItems\n        }\n      }\n    }\n    return (\n      {\n        trList: newTransferList,\n        selTrList: newSelectedTransferList\n      }\n    )\n    // setTransferList(newTransferList)\n    // setSelectedTransferList(newSelectedTransferList)\n  }\n  // RuToken functions\n  rutoken.ready\n    // Проверка установки расширение 'Адаптера Рутокен Плагина' в Google Chrome\n    .then(function () {\n      if (window.chrome || typeof InstallTrigger !== 'undefined') {\n        return rutoken.isExtensionInstalled()\n      } else {\n        return Promise.resolve(true)\n      }\n    })\n    // Проверка установки Рутокен Плагина\n    .then(function (result) {\n      if (result) {\n        return rutoken.isPluginInstalled()\n      } else {\n        // alert(\"Не удаётся найти расширение 'Адаптер Рутокен Плагина'\")\n      }\n    })\n    // Загрузка плагина\n    .then(function (result) {\n      if (result) {\n        return rutoken.loadPlugin();\n      } else {\n        // alert(\"Не удаётся найти Плагин\");\n      }\n    })\n    //Можно начинать работать с плагином\n    .then(function (result) {\n      if (!result) {\n        return // alert(\"Не удаётся загрузить Плагин\");\n      } else {\n        plugin = result;\n        return Promise.resolve();\n      }\n    })\n  function getUUID() {\n    const uuidv1 = require(\"uuid/v1\")\n    return uuidv1()\n  }\n\n  // Rutoken MODAL\n  const handleCloseModalEnterPin = () => {\n    setShowModalEnterPin(false)\n  }\n  function handlePinChange(event) {\n    // console.log(\"EVENT\", event.target.name, event.target.value)\n    setRutokenPin(event.target.value)\n    console.log(\"PIN\", event.target.value)\n  }\n  function handleClickShowPin() {\n    setShowPin(!showPin)\n  }\n\n  // Sign transfer order with rutoken\n  function sign() {\n    // Перебор подключенных Рутокенов\n    if (plugin !== undefined) {\n      plugin.enumerateDevices()\n        .then(function (devices) {\n          if (devices.length > 0) {\n            return Promise.resolve(devices[0])\n          } else {\n            alert(\"Рутокен не обнаружен\")\n          }\n        })\n        // Проверка залогиненности\n        .then(function (firstDevice) {\n          rutokenHandle = firstDevice\n          return plugin.getDeviceInfo(rutokenHandle, plugin.TOKEN_INFO_IS_LOGGED_IN)\n        })\n        // Логин на первый токен в списке устройств PIN-кодом по умолчанию\n        .then(function (isLoggedIn) {\n          if (isLoggedIn) {\n            return Promise.resolve()\n          } else {\n            return plugin.login(rutokenHandle, rutokenPin) // 240699\n          }\n        })\n        // Перебор пользовательских сертификатов на токене\n        .then(function () {\n          return plugin.enumerateCertificates(rutokenHandle, plugin.CERT_CATEGORY_UNSPEC)\n        })\n        .then(function (certs) {\n          if (certs.length > 0) {\n            certHandle = certs[0]\n            return plugin.parseCertificate(rutokenHandle, certs[0])\n          } else {\n            alert(\"Сертификат на Рутокен не обнаружен\");\n          }\n        })\n        // Подписание данных из текстового поля на первом найденом сертификате\n        .then(function (certs) {\n          certData = certs\n          if (certHandle.length > 0) {\n            var options = {}\n            let inn = \"\"\n            let fullName = \"\"\n            for (let i = 0; i < certData.subject.length; i++) {\n              if (certData.subject[i].rdn === \"serialNumber\") {\n                inn = certData.subject[i].value\n              }\n              if (certData.subject[i].rdn === \"commonName\") {\n                fullName = certData.subject[i].value\n              }\n            }\n            props.setEsInn(inn)\n            props.setEsUserFullName(fullName)\n            props.setEsExpiredDate(certData.validNotAfter.substring(0, certData.validNotAfter.length - 1))\n            handleCloseModalEnterPin()\n            // swAllert(\"Отчет успешно подписан!\", \"success\")\n            reportToPDFES(fullName, inn, certData.validNotAfter.substring(0, certData.validNotAfter.length - 1))\n            return plugin.sign(rutokenHandle, certHandle, \"textToSign\", plugin.DATA_FORMAT_PLAIN, options)\n          } else {\n            alert(\"Сертификат на Рутокен не обнаружен\")\n          }\n        })\n        // Закрытие сессии\n        .then(function () {\n          plugin.logout(rutokenHandle)\n        }, handleError)\n    }\n    else { props.callErrorToast(\"Вставьте рутокен, либо установите расширение для вашего браузера\", \"warning\") }\n  }\n  // catch errors while signing docs\n  function handleError(reason) {\n    if (isNaN(reason.message)) {\n      console.log(reason);\n    } else {\n      var errorCodes = plugin.errorCodes;\n      switch (parseInt(reason.message)) {\n        case errorCodes.PIN_INCORRECT:\n          // alert(\"Неверный PIN\");\n          setWrongPin(true)\n          break;\n        default:\n          console.log(\"Неизвестная ошибка\");\n      }\n    }\n  }\n  function onKeyPressModalEnterPin(event) {\n    let code = event.charCode\n    if (code === 13) {\n      buttonClick(\"SignReportSaveButton\", null)\n    }\n  }\n  // Integer input handlers\n  function handleChange(event) {\n    console.log(\"EV\", event)\n    fieldValue[event.target.name] = event.target.value\n    setFieldValue(fieldValue)\n    console.log(\"FIELDVALUE\", fieldValue)\n  }\n  function handleDateChange(event) {\n    // let fullDate = new Date(event.target.value)\n    // // console.log(\"DATE CHANGE\", fullDate)\n    // if (fieldValue[event.target.name] !== undefined && fieldValue[event.target.name] !== null) {\n    //   let fullDate = moment(fullDate).format(\"YYYY-MM-DDTHH:mm:ss\")\n    // }\n    // fieldValue[event.target.name] = fullDate\n    // setFieldValue(fieldValue)\n    // console.log(\"DATE CHANGE\", fullDate)\n    // console.log(\"FVAL\", fieldValue)\n    // // setUpdateState(getUUID())\n\n    // console.log(\"EV\", event)\n    fieldValue[event.target.name] = event.target.value\n    setFieldValue(fieldValue)\n    console.log(\"FIELDVALUE\", fieldValue)\n  }\n  function handleTimeChange(name, value) {\n    let fullDate = new Date(value)\n    if (fieldValue[name] !== undefined && fieldValue[name] !== null) {\n      // let nDate = props.parseDate(fieldValue[name])\n      // let hours = new Date(value).getHours()\n      // let minutes = new Date(value).getMinutes()\n      // let seconds = new Date(value).getSeconds()\n      // fullDate = new Date(nDate + \"T\" + hours + \":\" + minutes + \":\" + seconds)\n      let date = moment(fieldValue[name]).format(\"YYYY-MM-DD\")\n      let time = moment(value).format(\"HH:mm:ss\")\n      fullDate = date + \"T\" + time\n    }\n    fieldValue[name] = fullDate\n    setFieldValue(fieldValue)\n    console.log(\"FULL DATE CHANGE\", name, value, fieldValue)\n    console.log(\"FVAL\", fieldValue)\n    setUpdateState(getUUID())\n  }\n  function handleDateTimeChange(event) {\n    // console.log(\"FULL DATE TIME CHANGE\", event.target.name, event.target.value)\n    setFieldValue({ ...fieldValue, [event.target.name]: event.target.value })\n  }\n  const handleCheckboxChange = (event) => {\n    setFieldValue({ ...fieldValue, [event.target.name]: event.target.checked })\n  }\n  function swAllert(text, icon) {\n    return (\n      swal({\n        text: text,\n        icon: icon,\n        buttons: { ok: \"Ок\" },\n      })\n    )\n  }\n  // Handler of select copmponet changes\n  function handleSelectChange(option) {\n    console.log(\"SEL CHANGE\", option.name, option.value)\n    fieldValue[option.name] = option.value\n    let updateSelectedOptions = selectedOptions.slice()\n    let noSuchOption = true\n    for (let i = 0; i < updateSelectedOptions.length; i++) {\n      if (option.name === updateSelectedOptions[i].name) {\n        updateSelectedOptions[i] = option\n        setSelectedOptions(updateSelectedOptions)\n        // console.log(\"SO\", selectedOptions)\n        noSuchOption = false\n        break\n      }\n      else {\n        noSuchOption = true\n      }\n    }\n    if (noSuchOption === true) {\n      updateSelectedOptions.push(option)\n      setSelectedOptions(updateSelectedOptions)\n    }\n    setFieldValue(fieldValue)\n  }\n  // function handleMultiSelectChange(value, {action, removedValue, name}) {\n  //   // console.log(\"MSOP\", multiSelectedOptions)\n  //   console.log(\"NAME\",name)\n  //   if(action === \"select-option\"){\n  //     let putAll = false\n  //     for(let i=0; i<value.length; i++){\n  //       if(value[i].value === \"all\"){\n  //         putAll = true\n  //       }\n  //     }\n  //     if(putAll === true){\n  //       multiSelectedOptions[name] = multiSelectDataOptions[name]\n  //     }\n  //     else{\n  //       multiSelectedOptions[name] = value\n  //     }\n  //   }\n  //   else if(action === \"remove-value\"){\n  //     // console.log(\"RV\", removedValue, \"NAME\", name)\n  //     if(removedValue.value === \"all\"){\n  //       multiSelectedOptions[name] = null\n  //     }\n  //     else{\n  //       multiSelectedOptions[name] = value\n  //     }\n  //   }\n  //   else if(action === \"clear\"){\n  //     multiSelectedOptions[name] = null\n  //   }\n  //   if(name === \"dep_id\"){\n  //     if(multiSelectedOptions[name] !== null){\n  //       console.log(\"MS\", multiSelectedOptions[\"acc_id\"])\n  //       let partnersList = []\n  //       let depositors = []\n  //       for(let i=0; i<enumData.length; i++){\n  //         if(enumData[i].name === \"depositors\"){\n  //           depositors = enumData[i].data // Find partner for each selected depositor\n  //         }\n  //       }\n  //       for(let m=0; m<multiSelectedOptions[name].length; m++){\n  //         for(let d=0; d<depositors.length; d++){\n  //           if(depositors[d].id === multiSelectedOptions[name][m].value){\n  //             partnersList.push(depositors[d].partner)\n  //           }\n  //         }\n  //       }\n  //       // for(let ms=0; ms<multiSelectData.length; ms++){\n  //       //   if(multiSelectData[ms].name === \"acc_id\"){\n  //       //     let options = [{\n  //       //       \"value\": \"all\",\n  //       //       \"label\": \"Все\"\n  //       //     }]\n  //       //     for(let msd=0; msd<multiSelectData[ms].data.length; msd++){\n  //       //       for(let p=0; p<partnersList.length; p++){\n  //       //         if(partnersList[p] === multiSelectData[ms].data[msd].partner){\n\n  //       //           options.push({\n  //       //             \"value\": multiSelectData[ms].data[msd].id,\n  //       //             \"label\": multiSelectData[ms].data[msd].label,\n  //       //           })\n  //       //         }  \n  //       //       }\n  //       //     }\n  //       //     multiSelectDataOptions[\"acc_id\"] = options\n  //       //   }\n  //       // }\n  //     }\n  //     else{\n  //       multiSelectedOptions[\"acc_id\"] = null\n  //       // multiSelectDataOptions[\"acc_id\"] = null\n  //     }\n  //   }\n  //   if(name === \"corr_dep_id\"){\n  //     if(multiSelectedOptions[name] !== null){\n  //       console.log(\"MS\", multiSelectedOptions[\"acc_id\"])\n  //       let partnersList = []\n  //       let corr_depositors = []\n  //       for(let i=0; i<enumData.length; i++){\n  //         if(enumData[i].name === \"corrDepositories\"){\n  //           corr_depositors = enumData[i].data // Find partner for each selected corr depositories\n  //         }\n  //       }\n  //       for(let m=0; m<multiSelectedOptions[name].length; m++){\n  //         for(let d=0; d<corr_depositors.length; d++){\n  //           if(corr_depositors[d].id === multiSelectedOptions[name][m].value){\n  //             partnersList.push(corr_depositors[d].partner)\n  //           }\n  //         }\n  //       }\n  //       // for(let ms=0; ms<multiSelectData.length; ms++){\n  //       //   if(multiSelectData[ms].name === \"acc_id\"){\n  //       //     let options = [{\n  //       //       \"value\": \"all\",\n  //       //       \"label\": \"Все\"\n  //       //     }]\n  //       //     for(let msd=0; msd<multiSelectData[ms].data.length; msd++){\n  //       //       for(let p=0; p<partnersList.length; p++){\n  //       //         if(partnersList[p] === multiSelectData[ms].data[msd].partner){\n\n  //       //           options.push({\n  //       //             \"value\": multiSelectData[ms].data[msd].id,\n  //       //             \"label\": multiSelectData[ms].data[msd].label,\n  //       //           })\n  //       //         }  \n  //       //       }\n  //       //     }\n  //       //     multiSelectDataOptions[\"acc_id\"] = options\n  //       //   }\n  //       // }\n  //     }\n  //     else{\n  //       multiSelectedOptions[\"acc_id\"] = null\n  //       multiSelectDataOptions[\"acc_id\"] = null\n  //     }\n  //   }\n  //   if(name === \"reg_id\"){\n  //     if(multiSelectedOptions[name] !== null){\n  //       console.log(\"MS\", multiSelectedOptions[\"acc_id\"])\n  //       let partnersList = []\n  //       let registrars = []\n  //       for(let i=0; i<enumData.length; i++){\n  //         if(enumData[i].name === \"registrars\"){\n  //           registrars = enumData[i].data // Find partner for each selected corr depositories\n  //         }\n  //       }\n  //       for(let m=0; m<multiSelectedOptions[name].length; m++){\n  //         for(let d=0; d<registrars.length; d++){\n  //           if(registrars[d].id === multiSelectedOptions[name][m].value){\n  //             partnersList.push(registrars[d].partner)\n  //           }\n  //         }\n  //       }\n  //       // for(let ms=0; ms<multiSelectData.length; ms++){\n  //       //   if(multiSelectData[ms].name === \"acc_id\"){\n  //       //     let options = [{\n  //       //       \"value\": \"all\",\n  //       //       \"label\": \"Все\"\n  //       //     }]\n  //       //     for(let msd=0; msd<multiSelectData[ms].data.length; msd++){\n  //       //       for(let p=0; p<partnersList.length; p++){\n  //       //         if(partnersList[p] === multiSelectData[ms].data[msd].partner){\n\n  //       //           options.push({\n  //       //             \"value\": multiSelectData[ms].data[msd].id,\n  //       //             \"label\": multiSelectData[ms].data[msd].label,\n  //       //           })\n  //       //         }  \n  //       //       }\n  //       //     }\n  //       //     multiSelectDataOptions[\"acc_id\"] = options\n  //       //   }\n  //       // }\n  //     }\n  //     else{\n  //       multiSelectedOptions[\"acc_id\"] = null\n  //       // multiSelectDataOptions[\"acc_id\"] = null\n  //     }\n  //   }\n  //   setMultiSelectedOptions(multiSelectedOptions)\n  //   setUpdateState(getUUID())\n  // }\n\n\n  const handleIntChange = (event) => {\n    // console.log(\"EVENT\", event.target.name, event.target.value)\n    let stringNum = event.target.value.toString().replace(/ /g, '')\n    let int = parseInt(stringNum)\n    setFieldValue({ ...fieldValue, [event.target.name]: int })\n  }\n  // function handleIntChange(event) {\n  //   console.log(\"EVENT\", event.target.name, event.target.value)\n  //   fieldValue[event.target.name] = parseInt(event.target.value)\n  //   setFieldValue(fieldValue)\n  // }\n  // Create sections with labels and call bodyBuilder function\n  function sectionBuilder(section, index) {\n    return (\n      <Table size=\"small\">\n        <TableHead>\n          <TableRow style={{ height: 30 }}>\n            <TableCell\n              style={{\n                color: \"black\",\n                fontSize: 14,\n                backgroundColor: sectionColor,\n                width: \"100%\"\n              }}>\n              {section.label}\n            </TableCell>\n          </TableRow>\n        </TableHead>\n        {bodyBuilder(section)}\n      </Table>\n    )\n  }\n  // Create body of each section and call contentBuilder function\n  function bodyBuilder(section) {\n    return (\n      <Table size=\"small\">\n        <TableBody>\n          {section.contents.map((contentItem, index) => (\n            contentItem.show === true &&\n              contentItem.type === \"TransferList\" ?\n              <table size=\"small\" align=\"center\">\n                <tr>\n                  <th colSpan=\"3\">{contentItem.label}</th>\n                </tr>\n                <tr>\n                  <td width=\"43%\" style={{ padding: \"10px\" }}>поиск <input\n                    autoFocus={autofocusFieldTrList === contentItem.name ? true : false}\n                    name={contentItem.name}\n                    onChange={handleSearchTransferListChange}\n                    value={transferListSearchFileds[contentItem.name]}\n                  // disabled={!contentItem.edit}\n                  />\n                  </td>\n                  <td width=\"4%\"></td>\n                  <td width=\"43%\" style={{ padding: \"10px\" }}>поиск <input\n                    autoFocus={autofocusFieldSelTrList === contentItem.name ? true : false}\n                    name={contentItem.name}\n                    onChange={handleSearchSelectedTransferListChange}\n                    value={selectedTransferListSearchFileds[contentItem.name]}\n                  // disabled={!contentItem.edit}\n                  /></td>\n                </tr>\n                <tr>\n                  <td width=\"43%\">\n                    <Grid item>{getTransferList(transferList[contentItem.name], contentItem.name, contentItem.edit)}</Grid>\n                  </td>\n                  <td width=\"4%\">\n                    <Grid item>\n                      <Grid container direction=\"column\">\n                        <Button\n                          variant=\"outlined\"\n                          size=\"small\"\n                          className={classes.button}\n                          onClick={() => handleAllRight(contentItem.name)}\n                          disabled={transferList[contentItem.name].length === 0 ? true : false}\n                        // disabled={(transferList[contentItem.name].length === 0 || contentItem.edit === false) ? true : false}  \n                        >\n                          ≫\n                        </Button>\n                        <Button\n                          variant=\"outlined\"\n                          size=\"small\"\n                          className={classes.button}\n                          onClick={() => handleCheckedRight(contentItem.name)}\n                          disabled={leftChecked(contentItem.name).length === 0 ? true : false}\n                        // disabled={(leftChecked(contentItem.name).length === 0 || contentItem.edit === false) ? true : false}\n                        >\n                          &gt;\n                        </Button>\n                        <Button\n                          variant=\"outlined\"\n                          size=\"small\"\n                          className={classes.button}\n                          onClick={() => handleCheckedLeft(contentItem.name)}\n                          disabled={rightChecked(contentItem.name).length === 0 ? true : false}\n                        // disabled={(rightChecked(contentItem.name).length === 0 || contentItem.edit === false) ? true : false}\n                        >\n                          &lt;\n                        </Button>\n                        <Button\n                          variant=\"outlined\"\n                          size=\"small\"\n                          className={classes.button}\n                          onClick={() => handleAllLeft(contentItem.name)}\n                          disabled={selectedTransferList[contentItem.name].length === 0 ? true : false}\n                        // disabled={(selectedTransferList[contentItem.name].length === 0 || contentItem.edit === false) ? true : false}\n                        >\n                          ≪\n                        </Button>\n                      </Grid>\n                    </Grid>\n                  </td>\n                  <td width=\"43%\">\n                    <Grid item>{getTransferList(selectedTransferList[contentItem.name], contentItem.name, contentItem.edit)}</Grid>\n                  </td>\n                </tr>\n              </table>\n              :\n              <Table size=\"small\">\n                <TableRow style={{ height: 30 }}>\n                  <TableCell\n                    align=\"left\"\n                    style={{ width: \"40%\" }}>\n                    {contentItem.label}\n                  </TableCell>\n                  <TableCell\n                    align=\"left\"\n                    style={{ width: \"60%\", height: 30 }}\n                  >{contentBuilder(contentItem)}\n                  </TableCell>\n                </TableRow>\n              </Table>\n          ))}\n        </TableBody>\n      </Table>\n    )\n  }\n  // Create component by it's type\n  function contentBuilder(contentItem) {\n    if (contentItem.type === \"Text\") {\n      return (\n        <TextField\n          multiline\n          onBlur={handleChange}\n          name={contentItem.name}\n          style={{ width: \"100%\" }}\n          disabled={(formType === \"view\" || contentItem.edit === false) ? true : false}\n          defaultValue={(fieldValue[contentItem.name] !== undefined) ? fieldValue[contentItem.name] : \"\"}\n        />\n      )\n    }\n    else if (contentItem.type === \"Int\") {\n      return (\n        <TextField\n          disabled={(formType === \"view\" || contentItem.edit === false) ? true : false}\n          style={{ width: \"100%\" }}\n          // defaultValue={(fieldValue[contentItem.name] !== undefined) ? fieldValue[contentItem.name] : \"\"}\n          // value = {(fieldValue[contentItem.name] !== undefined) ? fieldValue[contentItem.name]: \"\"}\n          // onBlur={handleIntChange}\n          value={(fieldValue[contentItem.name] !== undefined) ? fieldValue[contentItem.name] : \"\"}\n          onChange={handleIntChange}\n          name={contentItem.name}\n          InputProps={{ inputComponent: NumberFormatCustom }}\n        />\n      )\n    }\n    else if (contentItem.type === \"DateTime\" || contentItem.type === \"JasperDate\") {\n      return (\n        <TextField\n          type=\"date\"\n          name={contentItem.name}\n          onBlur={handleDateChange}\n          style={{ width: \"100%\" }}\n          defaultValue={(fieldValue[contentItem.name] !== undefined && fieldValue[contentItem.name] !== null) ? fieldValue[contentItem.name] : \"NaN.NaN.NaN\"}\n          // defaultValue = {fieldValue[contentItem.name]}\n          disabled={(formType === \"view\" || contentItem.edit === false) ? true : false}\n          InputLabelProps={{\n            shrink: true,\n          }}\n        />\n      )\n    }\n    else if (contentItem.type === \"FullDateTime\") {\n      return (\n        // <table>\n        //   <tr>\n        //     <td style={{width: \"45%\"}}>\n        //       <TextField\n        //         key={fieldValue[contentItem.name]}\n        //         type=\"date\"\n        //         name={contentItem.name}\n        //         onChange={handleDateChange}\n        //         style={{width: \"100%\"}}\n        //         defaultValue={(fieldValue[contentItem.name] !== undefined && fieldValue[contentItem.name] !== null) ? props.parseDate(fieldValue[contentItem.name]) : \"NaN.NaN.NaN\" }\n        //         disabled={(formType === \"view\" || contentItem.edit === false) ? true : false}\n        //         InputLabelProps={{\n        //           shrink: true,\n        //         }}\n        //       />\n        //     </td>\n        //     <td style={{width: \"45%\"}}>\n        //       <LocalizationProvider dateAdapter={AdapterDayjs}>\n        //         <Stack>\n        //           <TimePicker\n        //             // key={fieldValue[contentItem.name]}\n        //             ampm={false}\n        //             openTo=\"hours\"\n        //             views={['hours', 'minutes', 'seconds']}\n        //             inputFormat=\"HH:mm:ss\"\n        //             mask=\"__:__:__\"\n        //             // value={dVal}\n        //             value={(fieldValue[contentItem.name] !== undefined && fieldValue[contentItem.name] !== null) ? fieldValue[contentItem.name] : \"NaN.NaN.NaN\" }\n        //             onChange={(newValue) => {handleTimeChange(contentItem.name, newValue)}}\n        //             renderInput={(params) => <TextField {...params} />}\n        //           />\n        //         </Stack>\n        //     </LocalizationProvider>\n        //   </td>\n        //   </tr>\n        // </table>\n\n\n        <TextField\n          name={contentItem.name}\n          onChange={handleDateTimeChange}\n          type=\"datetime-local\"\n          // defaultValue=\"2017-05-24T10:30\"\n          defaultValue={(fieldValue[contentItem.name] !== undefined && fieldValue[contentItem.name] !== null) ? moment(fieldValue[contentItem.name]).format(\"YYYY-MM-DDTHH:MM\") : moment(new Date()).format(\"YYYY-MM-DDTHH:MM\")}\n          InputLabelProps={{\n            shrink: true,\n          }}\n        />\n\n        //   <LocalizationProvider dateAdapter={AdapterDateFns}>\n\n        //     <TimePicker\n        //       ampm={false}\n        //       openTo=\"hours\"\n        //       views={['hours', 'minutes', 'seconds']}\n        //       inputFormat=\"HH:mm:ss\"\n        //       mask=\"__:__:__\"\n        //       value={value}\n        //       // onChange={(newValue) => {\n        //       //   setValue(newValue);\n        //       // }}\n        //       renderInput={(params) => <TextField {...params} />}\n        //     />\n        // </LocalizationProvider>\n\n      )\n    }\n    else if (contentItem.type === \"Enum\") {\n      let selectedOption = {\n        \"value\": \"\",\n        \"label\": \"Пусто\",\n        \"name\": contentItem.name\n      }\n      if (fieldValue[contentItem.name] !== undefined) {\n        for (let i = 0; i < enumOptions[contentItem.name].length; i++) {\n          if (fieldValue[contentItem.name] === enumOptions[contentItem.name][i].value) {\n            selectedOption = enumOptions[contentItem.name][i]\n            break\n          }\n        }\n      }\n      if (selectedOptions.length !== 0) {\n        for (let i = 0; i < selectedOptions.length; i++) {\n          if (contentItem.name === selectedOptions[i].name) {\n            selectedOption = selectedOptions[i]\n          }\n        }\n      }\n      return (\n        <Select\n          name={contentItem.name}\n          value={selectedOption}\n          onChange={handleSelectChange}\n          options={enumOptions[contentItem.name]}\n          isDisabled={(formType === \"view\" || contentItem.edit === false) ? true : false}\n          menuPortalTarget={document.body}\n          styles={{ menuPortal: base => ({ ...base, zIndex: 9999 }) }}\n        />\n      )\n    }\n    // else if (contentItem.type === \"MultiSelect\"){\n    //   return (\n    //     // <div style={{height: \"40px\", overflow: \"auto\"}}>\n    //       <Select\n    //         name={contentItem.name}\n    //         className=\"basic-multi-select\"\n    //         classNamePrefix=\"select\"\n    //         value={multiSelectedOptions[contentItem.name]}\n    //         onChange={handleMultiSelectChange}\n    //         closeMenuOnSelect={false}\n    //         isMulti\n    //         options={multiSelectDataOptions[contentItem.name]}\n    //         isDisabled ={(formType === \"view\" || contentItem.edit === false) ? true : false}\n    //         style={{height: \"120px\"}}\n    //       />\n    //     // </div>\n    //   )\n    // }\n    else if (contentItem.type === \"Currency\") {\n      return (\n        <TextField\n          value={fieldValue[contentItem.name] ? fieldValue[contentItem.name] : \"\"}\n          onBlur={handleChange}\n          name={contentItem.name}\n          style={{ minWidth: 300 }}\n          disabled={(formType === \"view\" || contentItem.edit === false) ? true : false}\n          InputProps={{ inputComponent: NumberFormatCustom }}\n        />\n      )\n    }\n    else if (contentItem.type === \"Bool\") {\n      return (\n        <Checkbox\n          style={{ maxWidth: 20, height: 15, color: (formType === \"view\" || contentItem.edit === false) ? \"grey\" : \"green\" }}\n          name={contentItem.name}\n          onChange={handleCheckboxChange}\n          disabled={(formType === \"view\" || contentItem.edit === false) ? true : false}\n          checked={(fieldValue[contentItem.name] === \"True\" || fieldValue[contentItem.name] === true) ? true : false}\n        />\n      )\n    }\n  }\n  // Main button click handler\n  function buttonClick(buttonName) {\n    console.log(\"Button\", buttonName)\n    if (buttonName === \"selectReportType\") {\n      let reportFormDefId = null\n      let reportName = null\n      for (let i = 0; i < enumData.length; i++) {\n        if (props.userTask.enumData[i] !== null) {\n          if (enumData[i].name === \"report_name\") {\n            for (let d = 0; d < enumData[i].data.length; d++) {\n              if (enumData[i].data[d].id === fieldValue[\"report_name\"]) {\n                reportFormDefId = enumData[i].data[d].form_def_id\n                reportName = enumData[i].data[d].report_name\n              }\n            }\n          }\n        }\n        else {\n          props.callErrorToast(\"Ошибка сбора справочной информации \" + getLostEnumName(i))\n        }\n      }\n      let commandJson =\n      {\n        commandType: \"completeTask\",\n        session_id: session_id,\n        process_id: process_id,\n        taskID: taskID,\n        userId: userProfile.userId,\n        userRole: userProfile.userRole,\n        variables: {\n          userAction: { value: \"selectReportType\" },\n          reportName: { value: reportName },\n          reportFormDefId: { value: reportFormDefId }\n        }\n      }\n      console.log(\"button selectReportType:\", commandJson)\n      props.sendFieldValues(commandJson)\n      props.clearTabData(process_id)\n    }\n    else if (buttonName === \"createReport\") {\n      let checkResult = checkForRequieredFields()\n      if (checkResult === true) {\n        // let reportVars = getFieldValuesCreateReport()\n        let reportExecutions = getFieldValuesReportExecutions()\n        let reportExecutionsXML = getFieldValuesCreateReportXML()\n        let reportVars = getFieldValuesCreateReport()\n        // let parser = new DOMParser();\n        // let xmlDoc = parser.parseFromString(reportExecutionsXML, \"text/xml\");\n        repExecution()\n        let commandJson =\n        {\n          // commandType: \"downloadReport\",\n          commandType: \"completeTask\",\n          session_id: session_id,\n          process_id: process_id,\n          taskID: taskID,\n          userId: userProfile.userId,\n          userRole: userProfile.userRole,\n          reportVars,\n          variables: {\n            reportExecutions: { value: JSON.stringify(reportExecutions) },\n            reportExecutionsXML: { value: reportExecutionsXML },\n            userAction: { value: \"createReport\" }\n          }\n        }\n        console.log(\"button createReport:\", commandJson)\n        // props.sendFieldValues(commandJson)\n        // props.clearTabData(process_id)\n      }\n    }\n    else if (buttonName === \"createChargeForCDServiceReport\") {\n      let checkResult = checkForRequieredFields()\n      if (checkResult === true) {\n        let reportVars = getFieldValuesCreateReport()\n        let chargeBody = {\n          startDate: fieldValue.start_date,\n          endDate: fieldValue.end_date,\n          depositorId: selectedTransferList.dep_id,\n          serviceTypeId: selectedTransferList.service_type_id\n        }\n        let commandJson =\n        {\n          commandType: \"completeTask\",\n          session_id: session_id,\n          process_id: process_id,\n          taskID: taskID,\n          userId: userProfile.userId,\n          userRole: userProfile.userRole,\n          variables: {\n            reportVars: { value: reportVars },\n            userAction: { value: \"createReport\" },\n            chargeBody: { value: JSON.stringify(chargeBody) }\n          }\n        }\n        console.log(\"button createChargeForCDServiceReport:\", commandJson)\n        props.sendFieldValues(commandJson)\n        props.clearTabData(process_id)\n      }\n    }\n    else if (buttonName === \"createCharge\") {\n      \n      let commandJson =\n      {\n        commandType: \"completeTask\",\n        session_id: session_id,\n        process_id: process_id,\n        taskID: taskID,\n        userId: userProfile.userId,\n        userRole: userProfile.userRole,\n        variables: {\n          userAction: { value: \"createCharge\" },\n        }\n      }\n      console.log(\"button createCharge:\", commandJson)\n      props.sendFieldValues(commandJson)\n      props.clearTabData(process_id)\n    }\n\n\n    else if (buttonName === \"reportToExcel\") {\n      downloadReport(\".xlsx\")\n      console.log(\"button reportToExcel: \")\n    }\n    else if (buttonName === \"reportToPDF\") {\n      downloadReport(\".pdf\")\n      console.log(\"button reportToPDF: \")\n    }\n    else if (buttonName === \"reportToWord\") {\n      downloadReport(\".docx\")\n      console.log(\"button reportToWord: \")\n    }\n    else if (buttonName === \"reportToPDFES\") {\n      if (props.esInn === null) {\n        setShowModalEnterPin(true)\n      }\n      else {\n        reportToPDFES(props.esUserFullName, props.esInn, props.esExpiredDate)\n      }\n    }\n    else if (buttonName === \"SignReportSaveButton\") {\n      sign()\n    }\n\n    else if (buttonName === \"cancel\") {\n      const commandJson =\n      {\n        commandType: \"completeTask\",\n        process_id: process_id,\n        session_id: session_id,\n        taskID: taskID,\n        variables: {\n          userAction: { value: \"cancel\" },\n        }\n      }\n      console.log(\"button cancel: \", commandJson)\n      props.sendFieldValues(commandJson)\n      props.clearTabData(process_id)\n    }\n    else if (buttonName === \"back\") {\n      const commandJson =\n      {\n        commandType: \"completeTask\",\n        process_id: process_id,\n        session_id: session_id,\n        taskID: taskID,\n        variables: {\n          userAction: { value: \"back\" },\n        }\n      }\n      console.log(\"button back: \", commandJson)\n      props.sendFieldValues(commandJson)\n      props.clearTabData(process_id)\n    }\n    else if (buttonName === \"finish\") {\n      const commandJson =\n      {\n        commandType: \"completeTask\",\n        process_id: process_id,\n        session_id: session_id,\n        taskID: taskID,\n        variables: {\n          userAction: { value: \"finish\" },\n        }\n      }\n      console.log(\"button finish: \", commandJson)\n      props.sendFieldValues(commandJson)\n      props.clearTabData(process_id)\n    }\n  }\n  // Transfer List functions\n  const handleToggle = (value, name) => () => {\n    const currentIndex = checked[name].indexOf(value)\n    const newChecked = [...checked[name]]\n\n    if (currentIndex === -1) {\n      newChecked.push(value)\n    }\n    else {\n      newChecked.splice(currentIndex, 1)\n    }\n    setChecked({ ...checked, [name]: newChecked })\n  }\n  const handleAllRight = (name) => {\n    setSelectedTransferList({ ...selectedTransferList, [name]: selectedTransferList[name].concat(transferList[name]) })\n    setTransferList({ ...transferList, [name]: [] })\n  }\n  function handleCheckedRight(name) {\n    // console.log(\"CHECKED RIGHT\", name)\n    setSelectedTransferList({ ...selectedTransferList, [name]: selectedTransferList[name].concat(leftChecked(name)) })\n    setTransferList({ ...transferList, [name]: not(transferList[name], leftChecked(name)) })\n    setChecked({ ...checked, [name]: not(checked[name], leftChecked(name)) })\n  }\n  function handleCheckedLeft(name) {\n    setTransferList({ ...transferList, [name]: transferList[name].concat(rightChecked(name)) })\n    setSelectedTransferList({ ...selectedTransferList, [name]: not(selectedTransferList[name], rightChecked(name)) })\n    setChecked({ ...checked, [name]: not(checked[name], rightChecked(name)) })\n  }\n  const handleAllLeft = (name) => {\n    setTransferList({ ...transferList, [name]: transferList[name].concat(selectedTransferList[name]) })\n    setSelectedTransferList({ ...selectedTransferList, [name]: [] })\n  }\n  function getTransferList(items, name, edit) {\n    // console.log(\"G TR L\", items, name)\n    return (\n      <Paper className={classes.paper}>\n        <List dense component=\"div\" role=\"list\">\n          {items.map((value) => {\n            const labelId = `transfer-list-item-${value}-label`;\n            return (\n              <ListItem\n                size=\"small\"\n                key={value}\n                role=\"listitem\"\n                button onClick={handleToggle(value, name)}\n                style={{ height: 40 }}\n              // disabled={edit === false ? true : false}\n              >\n                <Checkbox\n                  size=\"small\"\n                  checked={checked[name].indexOf(value) !== -1}\n                  tabIndex={-1}\n                  disableRipple\n                  inputProps={{ 'aria-labelledby': labelId }}\n                  style={{ height: 40 }}\n                />\n                {/* <ListItemText id={labelId} primary={value} /> */}\n                <ListItemText id={labelId} primary={getTranserListItemLabel(name, value)} />\n              </ListItem>\n            )\n          })}\n          <ListItem />\n        </List>\n      </Paper>\n    )\n  }\n  function getTranserListItemLabel(name, value) {\n    // console.log(\"G TRL LABEL\", name, value)\n    for (let e = 0; e < enumData.length; e++) {\n      if (enumData[e].name === name) {\n        for (let d = 0; d < enumData[e].data.length; d++) {\n          if (enumData[e].data[d].id === value) {\n            return enumData[e].data[d].label\n          }\n        }\n      }\n    }\n  }\n  function handleSearchTransferListChange(event) {\n    let name = event.target.name\n    let value = event.target.value\n    setAutofocusFieldTrList(name)\n    setTransferListSearchFileds({ ...transferListSearchFileds, [name]: value })\n    let filteredTrListOpts = []\n    for (let e = 0; e < enumData.length; e++) {\n      if (enumData[e].name === name) {\n        for (let d = 0; d < enumData[e].data.length; d++) {\n          let label = enumData[e].data[d].label.toLowerCase()\n          let searchField = value.toLowerCase()\n          let includeSearch = label.includes(searchField)\n          if (includeSearch === true) {\n            filteredTrListOpts.push(enumData[e].data[d].id)\n          }\n        }\n      }\n    }\n    // console.log(\"N TR L\", newTrListOpts)\n    let newTrListOpts = []\n    if (selectedTransferList[name].length > 0) {\n      for (let i = 0; i < filteredTrListOpts.length; i++) {\n        let include = true\n        for (let s = 0; s < selectedTransferList[name].length; s++) {\n          if (filteredTrListOpts[i] === selectedTransferList[name][s]) {\n            include = false\n            break\n          }\n        }\n        if (include === true) {\n          newTrListOpts.push(filteredTrListOpts[i])\n        }\n      }\n    }\n    else {\n      newTrListOpts = filteredTrListOpts\n    }\n    setTransferList({ ...transferList, [name]: newTrListOpts })\n  }\n  function handleSearchSelectedTransferListChange(event) {\n    let name = event.target.name\n    let value = event.target.value\n    setAutofocusFieldSelTrList(name)\n    setSelectedTransferListSearchFileds({ ...selectedTransferListSearchFileds, [name]: value })\n    let filteredTrListOpts = []\n    for (let e = 0; e < enumData.length; e++) {\n      if (enumData[e].name === name) {\n        for (let d = 0; d < enumData[e].data.length; d++) {\n          let label = enumData[e].data[d].label.toLowerCase()\n          let searchField = value.toLowerCase()\n          let includeSearch = label.includes(searchField)\n          if (includeSearch === true) {\n            filteredTrListOpts.push(enumData[e].data[d].id)\n          }\n        }\n      }\n    }\n    let newSelTrListOpts = []\n    if (transferList[name].length > 0) {\n      for (let i = 0; i < filteredTrListOpts.length; i++) {\n        let include = true\n        for (let s = 0; s < transferList[name].length; s++) {\n          if (filteredTrListOpts[i] === transferList[name][s]) {\n            include = false\n            break\n          }\n        }\n        if (include === true) {\n          newSelTrListOpts.push(filteredTrListOpts[i])\n        }\n      }\n    }\n    else {\n      newSelTrListOpts = filteredTrListOpts\n    }\n    setSelectedTransferList({ ...selectedTransferList, [name]: newSelTrListOpts })\n  }\n  function getFieldValuesCreateReport() {\n    let reportVars = {}\n    let strReportVars = \"\"\n    for (let s = 0; s < Form.sections.length; s++) {\n      for (let c = 0; c < Form.sections[s].contents.length; c++) {\n        let fieldName = Form.sections[s].contents[c].name\n        let type = Form.sections[s].contents[c].type\n        if (type === \"DateTime\") {\n          reportVars[fieldName] = moment(fieldValue[fieldName]).format(\"DD.MM.YYYY\")\n        }\n        else if (type === \"FullDateTime\") {\n          let convertedDate = moment(fieldValue[fieldName]).format(\"DD.MM.YYYYTHH:mm:ss\")\n          reportVars[fieldName] = convertedDate\n        }\n        else if (type === \"JasperDate\") {\n          reportVars[fieldName] = moment(fieldValue[fieldName]).format(\"YYYY-MM-DD\")\n        }\n        else if (type === \"TransferList\") {\n          // console.log(\"TTTTTT\", selectedTransferList[fieldName])\n          let strVals = \"\"\n          if (selectedTransferList[fieldName].length > 0) {\n            for (let i = 0; i < selectedTransferList[fieldName].length; i++) {\n              let value = selectedTransferList[fieldName][i]\n              if (i === selectedTransferList[fieldName].length - 1) {\n                strVals += value\n              }\n              else {\n                strVals += value + \",\"\n              }\n            }\n          }\n          reportVars[fieldName] = strVals\n          // console.log(\"TR LIST\", strVals)\n        }\n        // else if(type === \"MultiSelect\"){\n        //   if(Object.keys(multiSelectedOptions).length > 0){\n        //     let strVals = \"\"\n        //     for(let i=0; i<multiSelectedOptions[fieldName].length; i++){\n        //       let value = multiSelectedOptions[fieldName][i].value\n        //       if(value !== \"all\"){\n        //         if(i === multiSelectedOptions[fieldName].length-1){\n        //           strVals += value\n        //         }\n        //         else{\n        //           strVals += value + \",\"\n        //         }\n        //       }\n        //     }\n        //     reportVars[fieldName] = strVals\n        //     console.log(\"MULTI\", strVals)\n        //   }\n        // }\n        else {\n          reportVars[fieldName] = fieldValue[fieldName]\n        }\n\n\n      }\n    }\n    // console.log(\"REP VARS\", reportVars)\n    if (Object.keys(reportVars).length > 0) {\n      strReportVars = \"?\"\n      for (let key in reportVars) {\n        let newVar = key + \"=\" + reportVars[key] + \"&\"\n        strReportVars = strReportVars + newVar\n      }\n      strReportVars = strReportVars.substring(0, strReportVars.length - 1)\n    }\n    return strReportVars\n  }\n  function getFieldValuesReportExecutions() {\n    let reportParams = []\n    for (let s = 0; s < Form.sections.length; s++) {\n      for (let c = 0; c < Form.sections[s].contents.length; c++) {\n        let fieldName = Form.sections[s].contents[c].name\n        let type = Form.sections[s].contents[c].type\n        if (type === \"DateTime\") {\n          reportParams.push({ name: fieldName, value: [moment(fieldValue[fieldName]).format(\"DD.MM.YYYY\")] })\n        }\n        else if (type === \"FullDateTime\") {\n          reportParams.push({ name: fieldName, value: [moment(fieldValue[fieldName]).format(\"DD.MM.YYYYTHH:mm:ss\")] })\n        }\n        else if (type === \"JasperDate\") {\n          reportParams.push({ name: fieldName, value: [moment(fieldValue[fieldName]).format(\"YYYY-MM-DD\")] })\n        }\n        else if (type === \"TransferList\") {\n          // console.log(\"TTTTTT\", selectedTransferList[fieldName])\n          // let vals = []\n          let strVals = \"\"\n          if (selectedTransferList[fieldName].length > 0) {\n            for (let i = 0; i < selectedTransferList[fieldName].length; i++) {\n              let value = selectedTransferList[fieldName][i]\n              if (i === selectedTransferList[fieldName].length - 1) {\n                strVals += value\n                // vals.push(selectedTransferList[fieldName][i])\n              }\n              else {\n                strVals += value + \",\"\n              }\n            }\n          }\n          reportParams.push({ name: fieldName, value: [strVals] })\n          // console.log(\"TR LIST\", strVals)\n        }\n        else {\n          reportParams.push({ name: fieldName, value: [fieldValue[fieldName]] })\n        }\n      }\n    }\n    let obj = {\n      \"reportUnitUri\": \"/reports/interactive/\" + props.userTask.reportName,\n      \"async\": true,\n      \"interactive\": true,\n      \"freshData\": false,\n      \"saveDataSnapshot\": false,\n      \"outputFormat\": \"xlsx\",\n      \"parameters\": {\n        \"reportParameter\": reportParams\n      }\n    }\n    // let xml = OBJtoXML(obj)\n    return obj\n  }\n  function getFieldValuesCreateReportXML() {\n    let reportVars = []\n    for (let s = 0; s < Form.sections.length; s++) {\n      for (let c = 0; c < Form.sections[s].contents.length; c++) {\n        let fieldName = Form.sections[s].contents[c].name\n        let type = Form.sections[s].contents[c].type\n        if (type === \"DateTime\") {\n          reportVars.push({ reportParameter: fieldName, value: { value: moment(fieldValue[fieldName]).format(\"DD.MM.YYYY\") } })\n        }\n        else if (type === \"FullDateTime\") {\n          reportVars.push({ reportParameter: fieldName, value: { value: moment(fieldValue[fieldName]).format(\"DD.MM.YYYYTHH:mm:ss\") } })\n        }\n        else if (type === \"JasperDate\") {\n          reportVars.push({ reportParameter: fieldName, value: { value: moment(fieldValue[fieldName]).format(\"YYYY-MM-DD\") } })\n        }\n        else if (type === \"TransferList\") {\n          // console.log(\"TTTTTT\", selectedTransferList[fieldName])\n          let strVals = \"\"\n          if (selectedTransferList[fieldName].length > 0) {\n            for (let i = 0; i < selectedTransferList[fieldName].length; i++) {\n              let value = selectedTransferList[fieldName][i]\n              if (i === selectedTransferList[fieldName].length - 1) {\n                strVals += value\n              }\n              else {\n                strVals += value + \",\"\n              }\n            }\n          }\n          reportVars.push({ reportParameter: fieldName, value: { value: strVals } })\n          // console.log(\"TR LIST\", strVals)\n        }\n        else {\n          reportVars.push({ reportParameter: fieldName, value: { value: fieldValue[fieldName] } })\n        }\n      }\n    }\n    let obj = {\n      \"reportExecutionRequest\": {\n        \"reportUnitUri\": \"/reports/interactive/\" + props.userTask.reportName,\n        \"async\": \"true\",\n        \"freshData\": \"false\",\n        \"saveDataSnapshot\": \"false\",\n        \"outputFormat\": \"pdf\",\n        \"interactive\": \"true\",\n        \"parameters\": { \"reportParameter\": reportVars }\n      }\n    }\n    let xml = OBJtoXML(obj)\n    return xml\n  }\n  function OBJtoXML(obj) {\n    var xml = '';\n    for (var prop in obj) {\n      xml += obj[prop] instanceof Array ? '' : \"<\" + prop + \">\";\n      if (obj[prop] instanceof Array) {\n        // for (var array in obj[prop]) {\n        for (let array = 0; array < obj[prop].length; array++) {\n          xml += \"<\" + prop + \" name=\\\"\" + obj[prop][array].reportParameter + \"\\\">\";\n          xml += OBJtoXML(new Object(obj[prop][array].value));\n          xml += \"</\" + prop + \">\";\n        }\n      } else if (typeof obj[prop] == \"object\") {\n        xml += OBJtoXML(new Object(obj[prop]));\n      } else {\n        xml += obj[prop];\n      }\n      xml += obj[prop] instanceof Array ? '' : \"</\" + prop + \">\";\n    }\n    var xml = xml.replace(/<\\/?[0-9]{1,}>/g, '');\n    return xml\n  }\n  function checkForRequieredFields() {\n    // console.log(\"MOPTS\", multiSelectedOptions)\n    let checkedSuccessfuly = null\n    for (let s = 0; s < Form.sections.length; s++) {\n      for (let c = 0; c < Form.sections[s].contents.length; c++) {\n        let fieldName = Form.sections[s].contents[c].name\n        if (Form.sections[s].contents[c].required === true) {\n          // if(Form.sections[s].contents[c].type === \"MultiSelect\"){\n          //   if(multiSelectedOptions[fieldName] === undefined || multiSelectedOptions[fieldName] === null ||\n          //     multiSelectedOptions[fieldName].length === 0){\n          //     checkedSuccessfuly = false\n          //     swAllert(\"Внимание заполните поле \\\"\" +  Form.sections[s].contents[c].label + \"\\\"\", \"warning\")\n          //     return checkedSuccessfuly\n          //   }\n          //   else{\n          //     checkedSuccessfuly = true\n          //   }\n          // }\n          if (Form.sections[s].contents[c].type === \"TransferList\") {\n            if (selectedTransferList[fieldName] === undefined || selectedTransferList[fieldName] === null ||\n              selectedTransferList[fieldName].length === 0) {\n              checkedSuccessfuly = false\n              // swAllert(\"Внимание заполните поле \\\"\" + Form.sections[s].contents[c].label + \"\\\"\", \"warning\")\n              props.callErrorToast(\"Внимание заполните поле \\\"\" + Form.sections[s].contents[c].label + \"\\\"\")\n              return checkedSuccessfuly\n            }\n            else {\n              checkedSuccessfuly = true\n            }\n          }\n          else {\n            if (fieldValue[fieldName] === undefined || fieldValue[fieldName] === null ||\n              fieldValue[fieldName] === \"NaN.NaN.NaN\" || fieldValue[fieldName] === \"\") {\n              checkedSuccessfuly = false\n              // swAllert(\"Внимание заполните поле \\\"\" + Form.sections[s].contents[c].label + \"\\\"\", \"warning\")\n              props.callErrorToast(\"Внимание заполните поле \\\"\" + Form.sections[s].contents[c].label + \"\\\"\")\n              return checkedSuccessfuly\n            }\n            else {\n              checkedSuccessfuly = true\n            }\n          }\n        }\n        else {\n          checkedSuccessfuly = true\n        }\n      }\n    }\n    return checkedSuccessfuly\n  }\n\n  async function repserverlogin() {\n    await fetch(\n      `/jasperserver/rest_v2/login?j_username=jasperadmin&j_password=jasperadmin`,\n      {\n        mode: 'no-cors',\n        method: 'GET',\n        withCredentials: true,\n        credentials: 'include',\n        headers: {\n          'Content-Type': 'text/html; charset=utf-8'\n        }\n      }\n    )\n      .then(response => {\n        // response.text().then(string => {\n        console.log(\"JASPERT AUTH\", response)\n        // })\n      })\n      .catch(error => console.error(error));\n  }\n  async function downloadReport(type) {\n    await repserverlogin()\n    // await fetch(\"/jasperserver/rest_v2/reports/reports/interactive/\" + reportName + type + reportVars,\n    //   {\n    //     method: 'GET',\n    //     // mode: 'no-cors',\n    //     // withCredentials: true,\n    //     credentials: 'include',\n    //     headers: {\n    //       'Content-Type': 'text/html; charset=utf-8',\n    //       'Authorization': 'Basic amFzcGVyYWRtaW46amFzcGVyYWRtaW4=' // + btoa(unescape(encodeURIComponent(\"jasperadmin:jasperadmin\")))\n    //     }\n    //   }\n    // )\n    //   .then(response => response.blob())\n    //   .then(blob => {\n    //     console.log(\"RESP\", blob)\n    //     var url = window.URL.createObjectURL(blob)\n    //     var a = document.createElement('a')\n    //     a.href = url\n    //     a.download = reportName + type\n    //     document.body.appendChild(a) // we need to append the element to the dom -> otherwise it will not work in firefox\n    //     a.click()\n    //     a.remove()  //afterwards we remove the element again         \n    //   })\n    //   .catch(error => console.error(error));\n\n    let requestId = reportVars.requestId\n    let exportId = reportVars.exports[0].id\n    // console.log(\"REQID\", requestId, \"EXPID\", exportId)\n    await fetch(\"/jasperserver/rest_v2/reportExecutions/\" + requestId + \"/exports/\" + exportId + \"/outputResource\",\n      {\n        method: 'GET',\n        mode: 'no-cors',\n        withCredentials: true,\n        credentials: 'include',\n        headers: {\n          'Content-Type': 'text/html; charset=utf-8',\n          'Authorization': 'Basic amFzcGVyYWRtaW46amFzcGVyYWRtaW4=' // + btoa(unescape(encodeURIComponent(\"jasperadmin:jasperadmin\")))\n        }\n      }\n    )\n      .then(response => response.text())\n      .then(text => {\n        console.log(\"RESP\", text)\n        // var url = window.URL.createObjectURL(blob)\n        // var a = document.createElement('a')\n        // a.href = url\n        // a.download = reportName + type\n        // document.body.appendChild(a) // we need to append the element to the dom -> otherwise it will not work in firefox\n        // a.click()\n        // a.remove()  //afterwards we remove the element again\n        setSelectedDoc(text)\n      })\n      .catch(error => console.error(error));\n  }\n\n  async function repExecution(){\n    await repserverlogin()\n    let body = getFieldValuesReportExecutions()\n    // let body = getFieldValuesCreateReportXML()\n    await fetch(\"/jasperserver/rest_v2/reportExecutions\",\n      {\n        method: 'POST',\n        mode: 'no-cors',\n        // withCredentials: true,\n        // credentials: 'include',\n        credentials: 'same-origin',\n        headers: {\n          // \"content-type\": \"API-Key\",\n          'Content-Type': 'application/json',\n          'Authorization': 'Basic amFzcGVyYWRtaW46amFzcGVyYWRtaW4='\n        },\n        body: JSON.stringify(body)\n      }\n    )\n      .then(response => console.log(\"RESP\", response))\n      .catch(error => console.error(error));\n\n    // await request(\n    //   {\n    //     \"url\": 'http://192.168.2.150:8080/jasperserver/rest_v2/reportExecutions',\n    //     \"headers\": { \"content-type\": \"application/json\", 'Authorization': 'Basic amFzcGVyYWRtaW46amFzcGVyYWRtaW4='},\n    //     // \"body\": JSON.stringify(body),\n    //     \"body\": body,\n    //     \"json\": true,\n    //     \"method\": 'POST',\n    //     \"mode\": 'no-cors',\n    //     \"cache\": 'no-cache',\n    //     \"withCredentials\": true,\n    //     \"credentials\": 'include',\n    //   }\n    // )\n    //   .then(async function (response) {\n    //     console.log(\"RESP\", response)     \n    //   })\n    //   .catch(function (error) {\n    //     console.log(\"ERR\", error)\n    //   })\n\n    // let headers = { \"content-type\": \"application/json\", 'Authorization': 'Basic amFzcGVyYWRtaW46amFzcGVyYWRtaW4='}\n    // axios\n    //   .post(\"http://192.168.2.150:8080/jasperserver/rest_v2/reportExecutions\", body, headers)\n    //   .then(function(response) {\n    //     console.log(response.data);\n    //   })\n    //   .catch(function(error) {\n    //     console.log(error);\n    //   });\n  }\n\n  async function reportToPDFES(fullName, inn, expiredDate) {\n    // await repserverlogin()\n    await fetch(\"/jasperserver/rest_v2/reports/reports/interactive/\" + reportName + \".pdf\" + reportVars,\n      {\n        mode: 'no-cors',\n        method: 'GET',\n        withCredentials: true,\n        credentials: 'include',\n        headers: {\n          'Content-Type': 'text/html; charset=utf-8',\n          // 'Authorization': 'Basic ' + btoa(unescape(encodeURIComponent(\"jasperadmin:jasperadmin\")))\n          'Authorization': 'Basic amFzcGVyYWRtaW46amFzcGVyYWRtaW4='\n        }\n      }\n    )\n      .then(response => response.blob())\n      .then(blob => {\n        // console.log(\"REPORT\", blob);\n        blob.name = reportName + \".pdf\"\n        let formData = new FormData()\n        formData.append(\"formFile\", blob, reportName + \".pdf\")\n\n        // for (var value of formData.values()) {\n        //   console.log(\"FVAL\", value)\n        // }\n        let url = props.api + \"/Template/AddWatermark?text=ФИО: \" + fullName + \" ПИН: \" + inn + \" \" + expiredDate\n        var requestOptions = {\n          method: 'POST',\n          body: formData,\n          redirect: 'follow'\n        }\n\n        fetch(url, requestOptions)\n          .then(response => response.blob())\n          .then(bl => {\n            console.log(\"RES\", bl)\n            var pdf = new Blob([bl], { type: \"application/pdf\" })\n            var docUrl = window.URL.createObjectURL(pdf)\n            var a = document.createElement('a')\n            a.href = docUrl\n            a.download = `${reportName}.pdf`\n            document.body.appendChild(a)\n            a.click()\n            a.remove()\n          })\n          .catch(error => console.log('error', error))\n      })\n      .catch(error => console.error(error));\n  }\n\n  try {\n    return (\n      <Grid>\n        <a name=\"top\" />\n        <Grid container direction=\"row\" justify=\"flex-start\" spacing={1}>\n          <Grid item xs={11}>\n            <Paper>\n              <Grid container direction=\"row\" justify=\"center\" alignItems=\"center\">\n                <TableHead>\n                  <TableRow style={{ maxHeight: 25 }}>\n                    <TableCell style={{ fontSize: 16, color: \"black\" }}>{Form.label}</TableCell>\n                  </TableRow>\n                </TableHead>\n              </Grid>\n              <Grid container direction=\"row\" justify=\"center\" alignItems=\"center\">\n                {Form.sections.map((section, index) => {\n                  return sectionBuilder(section, index)\n                })}\n              </Grid>\n              <Grid container direction=\"row\" justify=\"flex-start\" alignItems=\"flex-start\">\n                {buttons.map((button, index) => (\n                  <Button\n                    variant=\"outlined\"\n                    name={button.name}\n                    onClick={() => buttonClick(button.name)}\n                    style={{\n                      margin: 3,\n                      backgroundColor: button.backgroundColor,\n                      height: 32,\n                      fontSize: 12,\n                      color: button.fontColor\n                    }}\n                    value={button.name}\n                  >\n                    {button.label}\n                  </Button>\n                ))}\n              </Grid>\n            </Paper>\n            <br></br>\n            {/* {selectedDoc !== null &&\n              <div>{getReport()}</div>\n            } */}\n\n            {selectedDoc !== null &&\n              <Markup id=\"reportContainer\" content={selectedDoc} />\n            }\n          </Grid>\n        </Grid>\n        <Modal\n          open={showModalEnterPin}\n          onClose={handleCloseModalEnterPin}\n          aria-labelledby=\"simple-modal-title\"\n          aria-describedby=\"simple-modal-description\"\n        >\n          <div style={modalStyle} className={classes.modal}>\n            <h3 id=\"simple-modal-title\">Введите ПИН код Рутокена</h3>\n            <FormControl variant=\"outlined\" style={{ width: \"100%\" }} error={wrongPin}>\n              <InputLabel htmlFor=\"outlined-adornment-password\">PIN</InputLabel>\n              <OutlinedInput\n                type={showPin ? 'text' : 'password'}\n                defaultValue={rutokenPin}\n                onChange={handlePinChange}\n                onKeyPress={onKeyPressModalEnterPin}\n                autoFocus\n                endAdornment={\n                  <InputAdornment position=\"end\">\n                    <IconButton\n                      aria-label=\"toggle password visibility\"\n                      onClick={handleClickShowPin}\n                      edge=\"end\"\n                    >\n                      {showPin ? <Visibility /> : <VisibilityOff />}\n                    </IconButton>\n                  </InputAdornment>\n                }\n                labelWidth={25}\n              />\n            </FormControl>\n            {wrongPin === true && <p color=\"red\">Не верный PIN</p>}\n            <Button\n              variant=\"contained\"\n              onClick={() => buttonClick(\"SignReportSaveButton\")}\n              style={{\n                margin: 3,\n                height: 32,\n                fontSize: 12,\n                color: \"white\",\n                backgroundColor: \"#2862F4\"\n              }}\n            >Ок\n            </Button>\n            <Button\n              variant=\"contained\"\n              onClick={handleCloseModalEnterPin}\n              style={{\n                margin: 3,\n                height: 32,\n                fontSize: 12,\n                color: \"white\",\n                backgroundColor: \"#E73639\"\n              }}\n            >Отмена\n            </Button>\n          </div>\n        </Modal>\n      </Grid>\n    )\n  }\n  catch (error) {\n    console.log(\"ERROR\", error)\n    return <div>error</div>\n  }\n}"],"mappings":"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A;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;;EAGA,MAAMqK,eAAe,GAAIvD,KAAD,IAAW;IACjC;IACA,IAAIwD,SAAS,GAAGxD,KAAK,CAACjK,MAAN,CAAaC,KAAb,CAAmByN,QAAnB,GAA8BC,OAA9B,CAAsC,IAAtC,EAA4C,EAA5C,CAAhB;IACA,IAAIC,GAAG,GAAG/F,QAAQ,CAAC4F,SAAD,CAAlB;IACArK,aAAa,CAAC,EAAE,GAAGD,UAAL;MAAiB,CAAC8G,KAAK,CAACjK,MAAN,CAAa+F,IAAd,GAAqB6H;IAAtC,CAAD,CAAb;EACD,CALD,CA5sBwB,CAktBxB;EACA;EACA;EACA;EACA;EACA;;;EACA,SAASC,cAAT,CAAwBC,OAAxB,EAAiCC,KAAjC,EAAwC;IACtC,oBACE,oBAAC,KAAD;MAAO,IAAI,EAAC,OAAZ;MAAA;MAAA;QAA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"},"metadata":{},"sourceType":"module"}
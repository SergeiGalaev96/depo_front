{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Serj\\\\Desktop\\\\depo\\\\src\\\\components\\\\TreansferOrders\\\\TreansferOrders.jsx\";\nimport React, { useState, useEffect } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Table from \"@material-ui/core/Table\"; // Material ui table for usual form\n\nimport TableHead from \"@material-ui/core/TableHead\";\nimport TableRow from \"@material-ui/core/TableRow\";\nimport TableBody from \"@material-ui/core/TableBody\";\nimport TableCell from \"@material-ui/core/TableCell\";\nimport Button from '@material-ui/core/Button';\nimport { Grid } from '@material-ui/core';\nimport Paper from '@material-ui/core/Paper';\nimport FormControl from '@material-ui/core/FormControl';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport NumberFormat from 'react-number-format';\nimport PropTypes from 'prop-types';\nimport Card from '@material-ui/core/Card';\nimport Modal from \"@material-ui/core/Modal\";\nimport Menu from '@mui/material/Menu'; // Accordion\n\nimport Accordion from '@material-ui/core/Accordion';\nimport AccordionDetails from '@material-ui/core/AccordionDetails';\nimport AccordionSummary from '@material-ui/core/AccordionSummary';\nimport Typography from '@material-ui/core/Typography';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore'; // Icons\n\nimport AttachFileIcon from '@material-ui/icons/AttachFile';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FirstPageIcon from '@material-ui/icons/FirstPage';\nimport LastPageIcon from '@material-ui/icons/LastPage';\nimport ArrowForwardIosIcon from '@material-ui/icons/ArrowForwardIos';\nimport ArrowBackIosIcon from '@material-ui/icons/ArrowBackIos';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport IconButton from '@material-ui/core/IconButton';\nimport CloseIcon from '@material-ui/icons/Close';\nimport DeleteForeverIcon from \"@material-ui/icons/DeleteForever\";\nimport GetAppIcon from '@material-ui/icons/GetApp';\nimport ArrowDropDownIcon from '@material-ui/icons/ArrowDropDown';\nimport ArrowDropUpIcon from '@material-ui/icons/ArrowDropUp';\nimport ReplayIcon from '@material-ui/icons/Replay';\nimport ArrowUpwardRoundedIcon from '@mui/icons-material/ArrowUpwardRounded'; // Form components\n\nimport GridSelect from '@material-ui/core/Select';\nimport TextField from '@material-ui/core/TextField';\nimport Select from 'react-select';\nimport Checkbox from '@material-ui/core/Checkbox'; // PIN components\n\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport OutlinedInput from '@material-ui/core/OutlinedInput';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport Visibility from '@material-ui/icons/Visibility';\nimport VisibilityOff from '@material-ui/icons/VisibilityOff'; // Libraries\n\nimport swal from 'sweetalert'; // https://sweetalert.js.org/guides/\n\nimport Tooltip from '@material-ui/core/Tooltip';\nimport * as rutoken from \"rutoken\";\nimport numberToWordsRu from 'number-to-words-ru'; // https://www.npmjs.com/package/number-to-words-ru\n\nimport tableToExcel from \"@linways/table-to-excel\"; // https://github.com/linways/table-to-excel\n\nvar moment = require('moment');\n\nvar plugin;\nvar rutokenHandle, certHandle, certData, cmsData;\n\nfunction FloatFormat(props) {\n  const {\n    inputRef,\n    onChange,\n    ...other\n  } = props;\n  return /*#__PURE__*/React.createElement(NumberFormat, Object.assign({}, other, {\n    getInputRef: inputRef,\n    onValueChange: values => {\n      onChange({\n        target: {\n          name: props.name,\n          value: values.value\n        }\n      });\n    },\n    decimalSeparator: \".\",\n    thousandSeparator: \" \",\n    isNumericString: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 5\n    }\n  }));\n}\n\nFloatFormat.propTypes = {\n  inputRef: PropTypes.func.isRequired,\n  onChange: PropTypes.func.isRequired\n};\n\nfunction IntegerFormat(props) {\n  const {\n    inputRef,\n    onChange,\n    ...other\n  } = props;\n  return /*#__PURE__*/React.createElement(NumberFormat, Object.assign({}, other, {\n    getInputRef: inputRef,\n    onValueChange: values => {\n      onChange({\n        target: {\n          name: props.name,\n          value: values.value\n        }\n      });\n    },\n    thousandSeparator: \" \",\n    isNumericString: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 5\n    }\n  }));\n}\n\nIntegerFormat.propTypes = {\n  inputRef: PropTypes.func.isRequired,\n  onChange: PropTypes.func.isRequired\n};\nconst useStyles = makeStyles(theme => ({\n  root: {\n    margin: 'auto'\n  },\n  paper: {\n    width: 400,\n    height: 300,\n    overflow: 'auto'\n  },\n  button: {\n    margin: theme.spacing(0.5, 0)\n  },\n  importFile: {\n    '& > *': {\n      margin: theme.spacing(1)\n    }\n  },\n  inputFile: {\n    display: 'none'\n  },\n  modal: {\n    position: 'absolute',\n    width: 500,\n    backgroundColor: theme.palette.background.paper,\n    border: '1px solid #AFAFAF',\n    boxShadow: theme.shadows[5],\n    padding: theme.spacing(2, 4, 3)\n  }\n}));\n\nfunction getModalStyle() {\n  const top = 35;\n  const left = 45;\n  return {\n    top: `${top}%`,\n    left: `${left}%`,\n    transform: `translate(-${top}%, -${left}%)`\n  };\n}\n\nexport default (props => {\n  // This.state\n  const classes = useStyles();\n  const [userProfile] = useState(props.userProfile);\n  const [session_id] = useState(props.userTask.session_id);\n  const [process_id] = useState(props.userTask.process_id);\n  const [taskID] = useState(props.userTask.taskID);\n  const [Form, setForm] = useState(props.userTask.Form);\n  const [formType] = useState(props.userTask.formType);\n  const [buttons] = useState(props.userTask.buttons);\n  const [selectedDoc, setSelectedDoc] = useState(null);\n  const [status, setStatus] = useState(2);\n  const [docId, setDocId] = useState(props.userTask.docId);\n  const [docList, setDocList] = useState(null);\n  const [filteredDocList, setFilteredDocList] = useState(null);\n  const [initialDocList, setInitialDocList] = useState(null);\n  const [gridForm, setGridForm] = useState(props.userTask.gridForm);\n  const [gridFormButtons] = useState(props.userTask.gridFormButtons);\n  const [enumData] = useState(props.userTask.enumData);\n  const [enumOptions, setEnumOptions] = useState({});\n  const [gridFormEnumData] = useState(props.userTask.gridFormEnumData);\n  const [fieldValue, setFieldValue] = useState({});\n  const [selectedOptions, setSelectedOptions] = useState([]);\n  const [page, setPage] = useState(1);\n  const [size, setSize] = useState(10);\n  const [showSnackBar, setShowSnackBar] = useState(false);\n  const [snackBarMessage, setSnackBarMessage] = useState(\"\");\n  const [sectionColor] = useState(\"#B2E0C9\");\n  const [updateState, setUpdateState] = useState(false);\n  const [taskType] = useState(props.userTask.taskType);\n  const [showSavedDocuments, setShowSavedDocuments] = useState(false);\n  const [showAttachedDocuments, setShowAttachedDocuments] = useState(false);\n  const [openModal, setOpenModal] = useState(false); // files\n\n  const [attachedImgs, setAttachedImgs] = useState([]);\n  const [attachedImgsFiles, setAttachedImgsFiles] = useState([]);\n  const [attachedDocs, setAttachedDocs] = useState([]);\n  const [Blobs, setBlobs] = useState([]);\n  const [selectedImg, setSelectedImg] = useState({});\n  const [savedImgs, setSavedImgs] = useState([]);\n  const [savedImagesFiles, setSavedImagesFiles] = useState([]);\n  const [savedDocs, setSavedDocs] = useState([]);\n  const [buttonFilesWordPdfImgId, setButtonFilesWordPdfImgId] = useState(getUUID());\n  const [sortedColumn, setSortedColumn] = useState(\"null\");\n  const [sortedColumnOrder, setSortedColumnOrder] = useState(1); // modals\n\n  const [showModalEnterPin, setShowModalEnterPin] = useState(false);\n  const [rutokenPin, setRutokenPin] = useState(\"\");\n  const [showPin, setShowPin] = useState(false);\n  const [wrongPin, setWrongPin] = useState(false);\n  const [modalStyle] = useState(getModalStyle);\n  const [isSearchForm, setIsSearchForm] = useState(null);\n  const [accordionExpanded, setAccordionExpanded] = useState(false);\n  const [anchorEl, setAnchorEl] = useState(null);\n  const openMenu = Boolean(anchorEl);\n  const [gridTableId] = useState(getUUID());\n  const [gridFieldValue, setGridFieldValue] = useState({}); // Set data from props to state of component\n\n  useEffect(() => {\n    console.log(\"TreansferOrders PROPS\", props); // setButtonFilesWordPdfImgId(getUUID())\n\n    if (props.userTask.docList !== \"null\" && props.userTask.docList !== null) {\n      try {\n        let parsedData = JSON.parse(props.userTask.docList);\n        console.log(\"DOCL\", parsedData);\n        let s = parseInt(props.userTask.size);\n        let p = parseInt(props.userTask.page);\n        setSize(s);\n        setPage(p);\n        setIsSearchForm(true);\n        setFilteredDocList(parsedData);\n        setInitialDocList(parsedData);\n        let sortedDocList = parsedData.sort(dynamicSort(\"id\", -1, \"Int\"));\n\n        if (props.userTask.selectedDoc !== \"null\") {\n          filterDocList(0, s - 1, sortedDocList, JSON.parse(props.userTask.selectedDoc));\n        } else {\n          fetchBySize(0, s - 1, sortedDocList);\n        }\n      } catch (er) {\n        props.callErrorToast(\"Ошибка сбора списка данных \" + props.userTask.taskType);\n        setFilteredDocList([]);\n        setIsSearchForm(true);\n        setInitialDocList([]);\n        setDocList([]);\n      }\n    } else {\n      setIsSearchForm(false);\n    }\n\n    if (props.userTask.selectedDoc !== \"null\" && props.userTask.selectedDoc !== undefined && props.userTask.selectedDoc !== null) {\n      let parsedSelectedDoc = JSON.parse(props.userTask.selectedDoc);\n      let fields = {}; // let Form = props.userTask.Form\n\n      for (let s = 0; s < Form.sections.length; s++) {\n        for (let c = 0; c < Form.sections[s].contents.length; c++) {\n          let fieldName = Form.sections[s].contents[c].name;\n          fields[fieldName] = parsedSelectedDoc[fieldName];\n        }\n      }\n\n      if (props.userTask.taskType !== \"showTransferOrdersSearchForm\") {\n        fields[\"quantity_text\"] = convertNumberToText(parsedSelectedDoc[\"quantity_int\"]);\n      }\n\n      if (props.userTask.taskType === \"showTransferOrdersEditForm\" && parsedSelectedDoc.registrar_authorized_person_name === null && formType === \"edit\") {\n        if (userProfile.userRole === \"4\") {\n          fields.registrar_authorized_person_name = userProfile.firstName + \" \" + userProfile.lastName + \" \" + userProfile.middleName;\n          console.log(\"US NAME\", fields);\n        }\n      }\n\n      console.log(\"SDOC\", parsedSelectedDoc);\n      setSelectedDoc(parsedSelectedDoc);\n      setFieldValue(fields);\n    }\n\n    if (props.userTask.enumData !== null && props.userTask.enumData !== undefined && props.userTask.enumData !== \"null\") {\n      let newEnumOptions = {};\n\n      for (let i = 0; i < props.userTask.enumData.length; i++) {\n        if (props.userTask.enumData[i] !== null) {\n          let options = [{\n            \"value\": \"\",\n            \"label\": \"Пусто\",\n            \"name\": props.userTask.enumData[i].name\n          }];\n\n          for (let d = 0; d < props.userTask.enumData[i].data.length; d++) {\n            options.push({\n              \"value\": props.userTask.enumData[i].data[d].id,\n              \"label\": props.userTask.enumData[i].data[d].label,\n              \"name\": props.userTask.enumData[i].name\n            });\n          }\n\n          newEnumOptions[props.userTask.enumData[i].name] = options;\n        } else {\n          let options = [{\n            \"value\": \"\",\n            \"label\": \"Ошибка...\",\n            \"name\": getLostEnumName(i)\n          }];\n          newEnumOptions[getLostEnumName(i)] = options;\n          props.callErrorToast(\"Ошибка сбора справочной информации \" + getLostEnumName(i));\n        }\n      }\n\n      setEnumOptions(newEnumOptions);\n    }\n\n    if (props.userTask.taskType === \"showTransferOrdersCreatingForm\") {\n      setShowAttachedDocuments(true);\n    }\n\n    if (props.userTask.taskType === \"showTransferOrdersEditForm\") {\n      setShowAttachedDocuments(true);\n      setShowSavedDocuments(true);\n    }\n\n    if (props.userTask.savedDocs.length > 0) {\n      for (let d = 0; d < props.userTask.savedDocs.length; d++) {\n        let extension = props.userTask.savedDocs[d].extension;\n\n        if (extension === \".png\") {\n          convertBase64ToFile(\"data:image/png;base64,\" + props.userTask.savedDocs[d].content, props.userTask.savedDocs[d].fileName);\n        } else if (extension === \".jpeg\" || extension === \".jpg\") {\n          convertBase64ToFile(\"data:image/jpeg;base64,\" + props.userTask.savedDocs[d].content, props.userTask.savedDocs[d].fileName);\n        } else if (extension === \".doc\") {\n          convertBase64ToFile(\"data:application/msword;base64,\" + props.userTask.savedDocs[d].content, props.userTask.savedDocs[d].fileName);\n        } else if (extension === \".docx\") {\n          convertBase64ToFile(\"data:application/vnd.openxmlformats-officedocument.wordprocessingml.document;base64,\" + props.userTask.savedDocs[d].content, props.userTask.savedDocs[d].fileName);\n        } else if (extension === \".xlsx\") {\n          convertBase64ToFile(\"data:application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;base64,\" + props.userTask.savedDocs[d].content, props.userTask.savedDocs[d].fileName);\n        } else if (extension === \".pdf\" || extension === \".PDF\") {\n          convertBase64ToFile(\"data:application/pdf;base64,\" + props.userTask.savedDocs[d].content, props.userTask.savedDocs[d].fileName);\n        }\n      }\n    }\n\n    if (gridForm !== null) {\n      let newFields = {};\n\n      for (let s = 0; s < gridForm.sections.length; s++) {\n        for (let c = 0; c < gridForm.sections[s].contents.length; c++) {\n          newFields[gridForm.sections[s].contents[c].name] = gridForm.sections[s].contents[c].show;\n        }\n      }\n\n      setGridFieldValue(newFields);\n    }\n\n    setUpdateState(getUUID());\n  }, []);\n\n  function getLostEnumName(i) {\n    let enumI = 0;\n\n    for (let s = 0; s < Form.sections.length; s++) {\n      for (let c = 0; c < Form.sections[s].contents.length; c++) {\n        if (Form.sections[s].contents[c].type === \"Enum\") {\n          if (enumI === i) {\n            return Form.sections[s].contents[c].name;\n          } else {\n            enumI += 1;\n          }\n        }\n      }\n    }\n  } // RuToken functions\n\n\n  rutoken.ready // Проверка установки расширение 'Адаптера Рутокен Плагина' в Google Chrome\n  .then(function () {\n    if (window.chrome || typeof InstallTrigger !== 'undefined') {\n      return rutoken.isExtensionInstalled();\n    } else {\n      return Promise.resolve(true);\n    }\n  }) // Проверка установки Рутокен Плагина\n  .then(function (result) {\n    if (result) {\n      return rutoken.isPluginInstalled();\n    } else {// alert(\"Не удаётся найти расширение 'Адаптер Рутокен Плагина'\")\n    }\n  }) // Загрузка плагина\n  .then(function (result) {\n    if (result) {\n      return rutoken.loadPlugin();\n    } else {// alert(\"Не удаётся найти Плагин\");\n    }\n  }) //Можно начинать работать с плагином\n  .then(function (result) {\n    if (!result) {\n      return; // alert(\"Не удаётся загрузить Плагин\");\n    } else {\n      plugin = result;\n      return Promise.resolve();\n    }\n  });\n\n  function handleExpandAccordion() {\n    setAccordionExpanded(!accordionExpanded);\n  } // Images MODAL\n\n\n  const handleOpenModal = () => {\n    setOpenModal(true);\n  };\n\n  const handleCloseModal = () => {\n    setOpenModal(false);\n  }; // Rutoken MODAL\n\n\n  const handleCloseModalEnterPin = () => {\n    setShowModalEnterPin(false);\n  };\n\n  function handlePinChange(event) {\n    // console.log(\"EVENT\", event.target.name, event.target.value)\n    setRutokenPin(event.target.value);\n    console.log(\"PIN\", event.target.value);\n  }\n\n  function handleClickShowPin() {\n    setShowPin(!showPin);\n  } // Sign transfer order with rutoken\n\n\n  async function sign(commandJson) {\n    // Перебор подключенных Рутокенов\n    if (plugin !== undefined) {\n      plugin.enumerateDevices().then(function (devices) {\n        if (devices.length > 0) {\n          return Promise.resolve(devices[0]);\n        } else {\n          alert(\"Рутокен не обнаружен\");\n        }\n      }) // Проверка залогиненности\n      .then(function (firstDevice) {\n        rutokenHandle = firstDevice;\n        return plugin.getDeviceInfo(rutokenHandle, plugin.TOKEN_INFO_IS_LOGGED_IN);\n      }) // Логин на первый токен в списке устройств PIN-кодом по умолчанию\n      .then(function (isLoggedIn) {\n        if (isLoggedIn) {\n          return Promise.resolve();\n        } else {\n          return plugin.login(rutokenHandle, rutokenPin); // 240699\n        }\n      }) // Перебор пользовательских сертификатов на токене\n      .then(function () {\n        return plugin.enumerateCertificates(rutokenHandle, plugin.CERT_CATEGORY_UNSPEC);\n      }).then(function (certs) {\n        if (certs.length > 0) {\n          certHandle = certs[0];\n          return plugin.parseCertificate(rutokenHandle, certs[0]);\n        } else {\n          alert(\"Сертификат на Рутокен не обнаружен\");\n        }\n      }) // Подписание данных из текстового поля на первом найденом сертификате\n      .then(async function (certs) {\n        certData = certs;\n        let tokenRemainingTime = new Date(certData.validNotAfter).getTime() - Date.now();\n\n        if (tokenRemainingTime > 0) {\n          if (certHandle.length > 0) {\n            var options = {};\n            let inn = \"\";\n            let fullName = \"\";\n\n            for (let i = 0; i < certData.subject.length; i++) {\n              if (certData.subject[i].rdn === \"serialNumber\") {\n                inn = certData.subject[i].value;\n              }\n\n              if (certData.subject[i].rdn === \"commonName\") {\n                fullName = certData.subject[i].value;\n              }\n            }\n\n            props.setEsInn(inn);\n            props.setEsUserFullName(fullName);\n            props.setEsExpiredDate(certData.validNotAfter.substring(0, certData.validNotAfter.length - 1));\n            let orderToSign = commandJson.variables.document.value;\n\n            if (taskType === \"showTransferOrdersCreatingForm\") {\n              orderToSign[\"signed_by_depositor\"] = true;\n              orderToSign[\"signed_depositor_inn\"] = inn;\n              orderToSign[\"signed_depositor_full_name\"] = fullName;\n              orderToSign[\"signed_at_depositor\"] = props.getCurrentFullDateTime();\n              orderToSign[\"status\"] = status;\n              commandJson.variables.status.value = 2; // Sent to CD\n            } else {\n              orderToSign[\"signed_by_registrar\"] = true;\n              orderToSign[\"signed_registrar_inn\"] = inn;\n              orderToSign[\"signed_registrar_full_name\"] = fullName;\n              orderToSign[\"signed_at_registrar\"] = props.getCurrentFullDateTime();\n              orderToSign[\"status\"] = status;\n              commandJson.variables.status.value = status; // Approved || Canceled\n            }\n\n            let signedBlobs = await signBlobs(fullName, inn, certData.validNotAfter.substring(0, certData.validNotAfter.length - 1));\n            console.log(\"S BLOBS\", signedBlobs);\n            commandJson.blobs = signedBlobs;\n            commandJson.variables.document.value = JSON.stringify(orderToSign);\n            commandJson.variables.selectedDoc.value = JSON.stringify(orderToSign);\n            handleCloseModalEnterPin();\n            props.callSuccessToast(\"Передаточное распоряжение успешно подписано!\", \"success\");\n            props.sendFieldValues(commandJson);\n            props.clearTabData(commandJson.process_id);\n            return plugin.sign(rutokenHandle, certHandle, \"textToSign\", plugin.DATA_FORMAT_PLAIN, options);\n          } else {\n            alert(\"Сертификат на Рутокен не обнаружен\");\n          }\n        } else {\n          plugin.logout(rutokenHandle);\n          props.callErrorToast(\"Рутокен просрочен\", \"warning\");\n        }\n      }) // Закрытие сессии\n      .then(function () {\n        plugin.logout(rutokenHandle);\n      }, handleError);\n    } else {\n      props.callErrorToast(\"Вставьте рутокен, либо установите расширение для вашего браузера\", \"warning\");\n    }\n  } // catch errors while signing docs\n\n\n  function handleError(reason) {\n    if (isNaN(reason.message)) {\n      console.log(reason);\n    } else {\n      var errorCodes = plugin.errorCodes;\n\n      switch (parseInt(reason.message)) {\n        case errorCodes.PIN_INCORRECT:\n          // alert(\"Неверный PIN\");\n          setWrongPin(true);\n          break;\n\n        default:\n          console.log(\"Неизвестная ошибка\");\n      }\n    }\n  } // INPUT HANDLERS\n\n\n  const handleCheckboxChange = event => {\n    let leUnblockList = [\"individual\", \"legal_entity\", \"quantity_int\", \"security\", \"registered_person\", \"address\", \"person_registered_authority\", \"registration_number_date\", \"quantity_text\", \"encumbrances_on_securities\", \"basis\", \"authority_document_name\"]; // Юр\n\n    let inUnblockList = [\"individual\", \"legal_entity\", \"quantity_int\", \"security\", \"registered_person\", \"address\", \"document_type\", \"document_series\", \"document_number\", \"document_issue_date\", \"document_issue_authority\", //  \"document_issue_place\", \n    \"quantity_text\", \"encumbrances_on_securities\", \"basis\"]; // Физ\n\n    if (event.target.name === \"legal_entity\") {\n      fieldValue[\"individual\"] = false;\n\n      if (formType === \"edit\") {\n        for (let s = 0; s < Form.sections.length; s++) {\n          for (let c = 0; c < Form.sections[s].contents.length; c++) {\n            let fName = Form.sections[s].contents[c].name;\n            let unblock = false;\n\n            for (let ul = 0; ul < leUnblockList.length; ul++) {\n              if (fName === leUnblockList[ul]) {\n                unblock = true;\n                break;\n              }\n            }\n\n            if (unblock === true) {\n              // unblock fields for legal entity\n              Form.sections[s].contents[c].edit = true;\n              Form.sections[s].contents[c].required = true;\n            } else {\n              Form.sections[s].contents[c].edit = false; // block fields for individual\n\n              Form.sections[s].contents[c].required = false;\n            } // if(unblock === true){\n            //   // console.log(\"Name\", fName)\n            //   Form.sections[s].contents[c].edit = true\n            //   Form.sections[s].contents[c].required = true\n            //   // Form.sections[s].contents[c].show = true\n            // }\n            // else{\n            //   if(fName !== \"individual\" && fName !== \"legal_entity\"){\n            //     Form.sections[s].contents[c].edit = false\n            //     Form.sections[s].contents[c].required = false\n            //     // Form.sections[s].contents[c].show = false\n            //   }\n            // }\n\n          }\n        }\n\n        setForm(Form);\n      } // let newFieldValue = fieldValue\n      // for(let ul=0; ul<leUnblockList.length; ul++){\n      //   newFieldValue[leUnblockList[ul]] = null\n      // }\n      // setFieldValue(newFieldValue)\n\n    }\n\n    if (event.target.name === \"individual\") {\n      fieldValue[\"legal_entity\"] = false;\n\n      if (formType === \"edit\") {\n        for (let s = 0; s < Form.sections.length; s++) {\n          for (let c = 0; c < Form.sections[s].contents.length; c++) {\n            let fName = Form.sections[s].contents[c].name;\n            let unblock = false;\n\n            for (let ul = 0; ul < inUnblockList.length; ul++) {\n              if (fName === inUnblockList[ul]) {\n                unblock = true;\n                break;\n              }\n            }\n\n            if (unblock === true) {\n              // unblock fields for legal entity\n              Form.sections[s].contents[c].edit = true;\n              Form.sections[s].contents[c].required = true;\n            } else {\n              Form.sections[s].contents[c].edit = false; // block fields for individual\n\n              Form.sections[s].contents[c].required = false;\n            } // if(unblock === true){\n            //   Form.sections[s].contents[c].edit = true\n            //   Form.sections[s].contents[c].required = true\n            //   // Form.sections[s].contents[c].show = true\n            // }\n            // else{\n            //   if(fName !== \"individual\" && fName !== \"legal_entity\"){\n            //     Form.sections[s].contents[c].edit = false\n            //     Form.sections[s].contents[c].required = false\n            //     // Form.sections[s].contents[c].show = false\n            //   }\n            // }\n\n          }\n        }\n\n        setForm(Form);\n      } // let newFieldValue = fieldValue\n      // for(let ul=0; ul<leUnblockList.length; ul++){\n      //   newFieldValue[leUnblockList[ul]] = null\n      // }\n      // setFieldValue(newFieldValue)\n\n    }\n\n    setFieldValue({ ...fieldValue,\n      [event.target.name]: event.target.checked\n    });\n  };\n\n  function convertNumberToText(num) {\n    let converted = numberToWordsRu.convert(num, {\n      currency: {\n        currencyNameCases: ['ценная бумага', 'ценных бумаги', 'ценных бумаг'],\n        fractionalPartNameCases: ['', '', ''],\n        declension: 'nominative',\n        currencyNounGender: {\n          integer: 1 // 1 => Женский род ('одна', 'две'...)\n\n        }\n      },\n      showNumberParts: {\n        integer: true,\n        fractional: false\n      }\n    }); // console.log(\"WORD\", converted)\n\n    return converted;\n  } // Integer input handler\n\n\n  const handleIntChange = event => {\n    // console.log(\"EVENT\", event.target.name, event.target.value)\n    let stringNum = event.target.value.toString().replace(/ /g, '');\n    let int = parseInt(stringNum);\n    setFieldValue({ ...fieldValue,\n      [event.target.name]: int\n    });\n\n    if (event.target.name === \"quantity_int\") {\n      let converted = convertNumberToText(stringNum);\n      setFieldValue({ ...fieldValue,\n        [\"quantity_text\"]: converted,\n        [event.target.name]: int\n      });\n    }\n  }; // Float input handler\n\n\n  const handleFloatChange = event => {\n    // console.log(\"FLOAT CHANGE\", event.target.name, event.target.value)\n    setFieldValue({ ...fieldValue,\n      [event.target.name]: event.target.value\n    });\n  }; // const handleIntChange = (event) => {\n  //   console.log(\"EVENT\", event.target.name, event.target.value)\n  //   let stringNum = event.target.value.toString().replace(/ /g, '')\n  //   let int = parseInt(stringNum)\n  //   setFieldValue({ ...fieldValue, [event.target.name]: int })\n  //   if (event.target.name === \"quantity_int\") {\n  //     let converted = convertNumberToText(stringNum)\n  //     setFieldValue({ ...fieldValue, [\"quantity_text\"]: converted, [event.target.name]: int })\n  //   }\n  // }\n  // // Float input handler\n  // const handleFloatChange = (event) => {\n  //   let stringNum = event.target.value.toString().replace(/ /g, '');\n  //   let float = parseFloat(stringNum)\n  //   setFieldValue({ ...fieldValue, [event.target.name]: float })\n  //   console.log(\"FLOAT CHANGE\", event.target.name, fieldValue)\n  // }\n\n\n  function handleTextChange(event) {\n    // console.log(\"EVENT\", event.target.name, event.target.value)\n    fieldValue[event.target.name] = event.target.value;\n    setFieldValue(fieldValue);\n    console.log(\"FIELDVALUE\", fieldValue);\n  }\n\n  function handleSelectChange(option) {\n    fieldValue[option.name] = option.value;\n    console.log(\"OPT\", option.name, option.value);\n    var updateSelectedOptions = selectedOptions.slice();\n    let noSuchOption = true;\n\n    for (let i = 0; i < updateSelectedOptions.length; i++) {\n      if (option.name === updateSelectedOptions[i].name) {\n        updateSelectedOptions[i] = option;\n        noSuchOption = false;\n        setSelectedOptions(updateSelectedOptions);\n        break;\n      } else {\n        noSuchOption = true;\n      }\n    }\n\n    if (noSuchOption === true) {\n      updateSelectedOptions.push(option);\n      setSelectedOptions(updateSelectedOptions);\n    }\n\n    if (option.name === \"security\") {\n      // выбрана ценная бумага нужно найти эмитента и отобразить\n      for (let i = 0; i < enumData.length; i++) {\n        if (enumData[i].name === \"security\") {\n          for (let d = 0; d < enumData[i].data.length; d++) {\n            if (enumData[i].data[d].id === option.value) {\n              let issuerId = enumData[i].data[d].issuer;\n              fieldValue[\"issuer\"] = issuerId;\n              fieldValue[\"security_type\"] = enumData[i].data[d].security_type;\n              fieldValue[\"registrar\"] = enumData[i].data[d].registrar; // let registrarId\n\n              for (let j = 0; j < enumData.length; j++) {\n                if (enumData[j].name === \"issuer\") {\n                  // Set isuuer of security\n                  for (let h = 0; h < enumData[j].data.length; h++) {\n                    if (enumData[j].data[h].id === issuerId) {\n                      // Set registrar of issuer\n                      // registrarId = enumData[j].data[h].registrar\n                      let issuerOption = {\n                        value: issuerId,\n                        name: \"issuer\",\n                        label: enumData[j].data[h].label\n                      };\n                      let noIssuerOption = true;\n\n                      for (let y = 0; y < updateSelectedOptions.length; y++) {\n                        if (updateSelectedOptions[y].name === \"issuer\") {\n                          updateSelectedOptions[y] = issuerOption;\n                          noIssuerOption = false;\n                          setSelectedOptions(updateSelectedOptions);\n                          break;\n                        } else {\n                          noIssuerOption = true;\n                        }\n                      }\n\n                      if (noIssuerOption === true) {\n                        updateSelectedOptions.push(issuerOption);\n                        setSelectedOptions(updateSelectedOptions);\n                      }\n                    }\n                  }\n                }\n              } // for (let r = 0; r < enumData.length; r++) {\n              //   if (enumData[r].name === \"registrar\") {\n              //     // Set registrar of isuuer\n              //     for (let p = 0; p < enumData[r].data.length; p++) {\n              //       if (enumData[r].data[p].id === registrarId) {\n              //         fieldValue[\"registrar\"] = registrarId\n              //         let registrarOption = {\n              //           value: registrarId,\n              //           name: \"registrar\",\n              //           label: enumData[r].data[p].label\n              //         }\n              //         let noRegistrarOption = true\n              //         for (let y = 0; y < updateSelectedOptions.length; y++) {\n              //           if (updateSelectedOptions[y].name === \"registrar\") {\n              //             updateSelectedOptions[y] = registrarOption\n              //             noRegistrarOption = false\n              //             setSelectedOptions(updateSelectedOptions)\n              //             break\n              //           }\n              //           else {\n              //             noRegistrarOption = true\n              //           }\n              //         }\n              //         if (noRegistrarOption === true) {\n              //           updateSelectedOptions.push(registrarOption)\n              //           setSelectedOptions(updateSelectedOptions)\n              //         }\n              //       }\n              //     }\n              //   }\n              // }\n\n            }\n          }\n        }\n      }\n    }\n  }\n\n  function handleDateTimeChange(event) {\n    // // console.log(\"EVENT\", event.target.name, event.target.value)\n    // let fullDate = props.parseDate(event.target.value)\n    // var hours = new Date().getHours()\n    // var minutes = new Date().getMinutes()\n    // var seconds = new Date().getSeconds()\n    // var convertedDate = fullDate + \" \" + hours + \":\" + minutes + \":\" + seconds + \".123456\"\n    // fieldValue[event.target.name] = convertedDate\n    let fullDateTime = moment(event.target.value).format('YYYY-MM-DDTHH:mm:ss');\n    fieldValue[event.target.name] = fullDateTime;\n    setFieldValue(fieldValue); // console.log(\"DATE CHANGE\", event.target.value)\n  }\n\n  function getContentType(key) {\n    for (let s = 0; s < Form.sections.length; s++) {\n      for (let c = 0; c < Form.sections[s].contents.length; c++) {\n        if (key === Form.sections[s].contents[c].name) {\n          return Form.sections[s].contents[c].type;\n        }\n      }\n    }\n  } // filter docList by filled parameters\n\n\n  function filterDocList(fetchFrom, fetchTo, Data, fields) {\n    var newDocList = [];\n\n    if (Object.keys(fields).length === 0) {\n      newDocList = Data;\n    } else {\n      for (let i = 0; i < Data.length; i++) {\n        let match = false;\n\n        for (let key in fields) {\n          if (fields[key] === null || fields[key] === \"\" || fields[key] === undefined) {\n            match = true;\n          } else {\n            if (Data[i][key] !== null) {\n              let contentType = getContentType(key);\n\n              if (contentType === \"Text\") {\n                try {\n                  let searchField = fields[key].toLowerCase().trim();\n                  let dataField = Data[i][key].toLowerCase();\n                  let includeSearch = dataField.includes(searchField);\n\n                  if (includeSearch === true) {\n                    match = true;\n                  } else {\n                    match = false;\n                    break;\n                  }\n                } catch (er) {\n                  console.log(\"ERR\", er);\n                  match = true;\n                }\n              } else if (contentType === \"Int\" || contentType === \"Float\") {\n                if (fields[key] >= 0 || fields[key] < 0) {\n                  let searchField = fields[key].toString();\n                  let dataField = Data[i][key].toString();\n                  let includeSearch = dataField.includes(searchField);\n\n                  if (includeSearch === true) {\n                    match = true;\n                  } else {\n                    match = false;\n                    break;\n                  }\n                } else {\n                  match = true;\n                }\n              } else if (contentType === \"Enum\") {\n                if (fields[key] === Data[i][key]) {\n                  match = true;\n                } else {\n                  match = false;\n                  break;\n                }\n              } else if (contentType === \"DateTime\") {\n                let searchField = props.parseDate(fields[key]);\n                let dataField = props.parseDate(Data[i][key]); // console.log(\"DATES\", searchField, dataField, searchField.includes(dataField))\n\n                if (searchField === \"NaN-NaN-NaN\" || searchField === \"Invalid date\") {\n                  match = true;\n                } else {\n                  if (searchField.includes(dataField) === true) {\n                    match = true;\n                  } else {\n                    match = false;\n                    break;\n                  }\n                }\n              } else if (contentType === \"Bool\") {\n                if (key === \"filled\" || key === \"onExecution\" || key === \"executed\" || key === \"canceled\") {\n                  let instrStatus = \"\";\n                  let statusSelected = false;\n                  let fieldStatus = \"\"; // Check fields\n\n                  if (fields[\"filled\"] === true) {\n                    fieldStatus = \"filled\";\n                    statusSelected = true;\n                  }\n\n                  if (fields[\"onExecution\"] === true) {\n                    fieldStatus = \"onExecution\";\n                    statusSelected = true;\n                  }\n\n                  if (fields[\"executed\"] === true) {\n                    fieldStatus = \"executed\";\n                    statusSelected = true;\n                  }\n\n                  if (fields[\"canceled\"] === true) {\n                    fieldStatus = \"canceled\";\n                    statusSelected = true;\n                  }\n\n                  if (statusSelected === true) {\n                    // Check Instruction\n                    if (Data[i][\"filled\"] === true) {\n                      instrStatus = \"filled\";\n                    }\n\n                    if (Data[i][\"onExecution\"] === true) {\n                      instrStatus = \"onExecution\";\n                    }\n\n                    if (Data[i][\"executed\"] === true) {\n                      instrStatus = \"executed\";\n                    }\n\n                    if (Data[i][\"canceled\"] === true) {\n                      instrStatus = \"canceled\";\n                    } // Check whether statuses are equal\n\n\n                    if (fieldStatus === instrStatus) {\n                      match = true;\n                    } else {\n                      match = false;\n                      break;\n                    }\n                  } else {\n                    match = true;\n                  }\n                } else {\n                  if (Data[i][key] === null || fields[key] === Data[i][key]) {\n                    match = true;\n                  } else {\n                    match = false;\n                    break;\n                  }\n                }\n              }\n            } else {\n              match = false;\n              break;\n            }\n          }\n        }\n\n        if (match === true) {\n          newDocList.push(Data[i]);\n        }\n      }\n    }\n\n    setFilteredDocList(newDocList);\n    fetchBySize(fetchFrom, fetchTo, newDocList);\n  } // get rows amount of filtered docList by size\n\n\n  function fetchBySize(fetchFrom, fetchTo, Data) {\n    // console.log(\"fetchFrom\", \"fetchTo\")\n    let newDocList = [];\n\n    for (let i = fetchFrom; i <= fetchTo; i++) {\n      if (Data[i] !== undefined) {\n        newDocList.push(Data[i]);\n      }\n    }\n\n    setDocList(newDocList);\n  } // Pagination functions\n\n\n  function KeyboardArrowFirstClick() {\n    if (page !== 1) {\n      setPage(1);\n      fetchBySize(0, size - 1, filteredDocList);\n    } else {\n      setSnackBarMessage(\"Вы на первой странице!\");\n      setShowSnackBar(true);\n    }\n  }\n\n  function KeyboardArrowLastClick() {\n    if (page !== getPageAmount()) {\n      setPage(getPageAmount());\n      fetchBySize((getPageAmount() - 1) * size, filteredDocList.length, filteredDocList);\n    } else {\n      setSnackBarMessage(\"Вы на последней странице!\");\n      setShowSnackBar(true);\n    }\n  }\n\n  function KeyboardArrowLeftClick(page) {\n    if (page !== 1) {\n      var prevPage = page - 1;\n      setPage(prevPage);\n      let fetchFrom = (prevPage - 1) * size; //10\n\n      let fetchTo = size * prevPage - 1;\n      fetchBySize(fetchFrom, fetchTo, filteredDocList);\n    } else {\n      setSnackBarMessage(\"Вы на первой странице!\");\n      setShowSnackBar(true);\n    }\n  }\n\n  function KeyboardArrowRightClick(page) {\n    if (docList.length < size - 1) {\n      // console.log(\"NO DATA\")\n      setSnackBarMessage(\"Больше нет данных!\");\n      setShowSnackBar(true);\n    } else {\n      setPage(page + 1);\n      let fetchFrom = size * page;\n      let fetchTo = (page + 1) * size - 1;\n      fetchBySize(fetchFrom, fetchTo, filteredDocList);\n    }\n  }\n\n  function handleChangeRowsPerPage(event) {\n    setSize(event.target.value);\n    setPage(1);\n    fetchBySize(0, event.target.value - 1, filteredDocList);\n  }\n\n  function GoToPage() {\n    let fetchFrom = page * size - 1 - size;\n    let fetchTo = page * size - 1;\n    fetchBySize(fetchFrom, fetchTo, filteredDocList);\n  }\n\n  function handlePageChange(event) {\n    setPage(event.target.value);\n  }\n\n  function handleCloseSnackBar() {\n    setShowSnackBar(false);\n  }\n\n  function getPageAmount() {\n    let pagesFloat = filteredDocList.length / size;\n    let mathRoundOfPages = Math.floor(pagesFloat);\n\n    if (pagesFloat > mathRoundOfPages) {\n      return mathRoundOfPages + 1;\n    } else {\n      return mathRoundOfPages;\n    }\n  } // random UUID generator\n\n\n  function getUUID() {\n    const uuidv1 = require(\"uuid/v1\");\n\n    return uuidv1();\n  }\n\n  function swAllert(text, icon) {\n    return swal({\n      text: text,\n      icon: icon,\n      buttons: {\n        ok: \"Ок\"\n      }\n    });\n  } // Collect data to save doc\n\n\n  function getFieldValuesSaveDocument() {\n    let docToSave = {};\n\n    for (let s = 0; s < Form.sections.length; s++) {\n      for (let c = 0; c < Form.sections[s].contents.length; c++) {\n        let fieldName = Form.sections[s].contents[c].name;\n\n        if (Form.sections[s].contents[c].type === \"Bool\" && fieldValue[fieldName] === undefined) {\n          docToSave[fieldName] = false;\n        } else {\n          docToSave[fieldName] = fieldValue[fieldName];\n        }\n      }\n    }\n\n    return docToSave;\n  }\n\n  function getFieldValuesUpdateDocument() {\n    let docToUpdate = selectedDoc; // docToUpdate[\"created_at\"] = selectedDoc.created_at\n    // docToUpdate[\"id\"] = selectedDoc.id\n    // docToUpdate[\"user_id\"] = selectedDoc.user_id\n    // docToUpdate[\"files_directory\"] = selectedDoc.files_directory\n\n    for (let s = 0; s < Form.sections.length; s++) {\n      for (let c = 0; c < Form.sections[s].contents.length; c++) {\n        let fieldName = Form.sections[s].contents[c].name;\n\n        if (Form.sections[s].contents[c].type === \"Bool\" && (fieldValue[fieldName] === undefined || fieldValue[fieldName] === null)) {\n          docToUpdate[fieldName] = false;\n        } else {\n          docToUpdate[fieldName] = fieldValue[fieldName];\n        }\n      }\n    }\n\n    return docToUpdate;\n  }\n\n  function checkForRequieredFields() {\n    let checkedSuccessfuly = null;\n\n    for (let s = 0; s < Form.sections.length; s++) {\n      for (let c = 0; c < Form.sections[s].contents.length; c++) {\n        let fieldName = Form.sections[s].contents[c].name;\n\n        if (Form.sections[s].contents[c].required === true) {\n          console.log(\"REQ\", Form.sections[s].contents[c].name);\n\n          if (fieldValue[fieldName] === undefined || fieldValue[fieldName] === null || fieldValue[fieldName] === \"NaN.NaN.NaN\" || fieldValue[fieldName] === \"\") {\n            checkedSuccessfuly = false;\n            swAllert(\"Внимание заполните поле \\\"\" + Form.sections[s].contents[c].label + \"\\\"\", \"warning\");\n            return checkedSuccessfuly;\n          } else {\n            checkedSuccessfuly = true;\n          }\n        } else {\n          checkedSuccessfuly = true;\n        }\n      }\n    }\n\n    return checkedSuccessfuly;\n  }\n\n  async function buttonClick(buttonName, item) {\n    if (buttonName === \"findDocument\") {\n      if (accordionExpanded === false) {\n        setAccordionExpanded(true);\n      } else {\n        filterDocList(0, size - 1, initialDocList, fieldValue);\n      }\n    } else if (buttonName === \"saveTransferOrder\") {\n      let checkResult = checkForRequieredFields();\n\n      if (checkResult === true) {\n        let dir = getUUID();\n        let doc = getFieldValuesSaveDocument();\n        doc.files_directory = dir;\n        doc.user_id = userProfile.userId;\n        doc[\"status\"] = 1;\n        let commandJson = {\n          commandType: \"saveDocumentsWithFiles\",\n          session_id: session_id,\n          process_id: process_id,\n          taskID: taskID,\n          userId: userProfile.userId,\n          userRole: userProfile.userRole,\n          blobs: Blobs,\n          directory: dir,\n          variables: {\n            userAction: {\n              value: \"saveDocument\"\n            },\n            document: {\n              value: JSON.stringify(doc)\n            },\n            selectedDoc: {\n              value: JSON.stringify(doc)\n            },\n            status: {\n              value: 1\n            }\n          }\n        };\n        console.log(\"saveTransferOrder:\", commandJson);\n        props.sendFieldValues(commandJson);\n        props.clearTabData(process_id);\n      }\n    } else if (buttonName === \"openDocument\") {\n      // console.log(\"ITEM\", item)\n      let commandJson = {\n        commandType: \"completeTask\",\n        session_id: session_id,\n        process_id: process_id,\n        taskID: taskID,\n        userId: userProfile.userId,\n        userRole: userProfile.userRole,\n        variables: {\n          selectedDoc: {\n            value: JSON.stringify(item)\n          },\n          userAction: {\n            value: \"openDocument\"\n          },\n          docId: {\n            value: item.id\n          },\n          status: {\n            value: item.status\n          },\n          searchDoc: {\n            value: JSON.stringify(fieldValue)\n          }\n        }\n      };\n      console.log(\"button openDocument: \", commandJson);\n      props.sendFieldValues(commandJson);\n      props.clearTabData(process_id);\n    } else if (buttonName === \"editDocument\") {\n      let commandJson = {\n        commandType: \"completeTask\",\n        session_id: session_id,\n        process_id: process_id,\n        taskID: taskID,\n        userId: userProfile.userId,\n        userRole: userProfile.userRole,\n        variables: {\n          userAction: {\n            value: \"editDocument\"\n          }\n        }\n      };\n      console.log(\"updateDocument:\", commandJson);\n      props.sendFieldValues(commandJson);\n      props.clearTabData(process_id);\n    } else if (buttonName === \"updateDocument\") {\n      let checkResult = checkForRequieredFields();\n\n      if (checkResult === true) {\n        let updateBody = getFieldValuesUpdateDocument();\n        updateBody.status = selectedDoc.status;\n        let commandJson = {\n          commandType: \"saveDocumentsWithFiles\",\n          session_id: session_id,\n          process_id: process_id,\n          taskID: taskID,\n          userId: userProfile.userId,\n          userRole: userProfile.userRole,\n          blobs: Blobs,\n          directory: selectedDoc.files_directory,\n          variables: {\n            userAction: {\n              value: \"updateDocument\"\n            },\n            document: {\n              value: JSON.stringify(updateBody)\n            },\n            selectedDoc: {\n              value: JSON.stringify(updateBody)\n            }\n          }\n        };\n        console.log(\"updateDocument:\", commandJson);\n        props.sendFieldValues(commandJson);\n        props.clearTabData(process_id);\n      }\n    } else if (buttonName === \"sendToRegistrar\") {\n      let updateBody = getFieldValuesUpdateDocument();\n      updateBody.status = 3;\n      let commandJson = {\n        commandType: \"completeTask\",\n        session_id: session_id,\n        process_id: process_id,\n        taskID: taskID,\n        userId: userProfile.userId,\n        userRole: userProfile.userRole,\n        variables: {\n          userAction: {\n            value: \"updateDocument\"\n          },\n          document: {\n            value: JSON.stringify(updateBody)\n          },\n          selectedDoc: {\n            value: JSON.stringify(updateBody)\n          },\n          status: {\n            value: 3\n          }\n        }\n      };\n      console.log(\"updateDocument:\", updateBody);\n      props.sendFieldValues(commandJson);\n      props.clearTabData(process_id);\n    } else if (buttonName === \"approveOrder\") {\n      if (props.operDayIsOpened === false) {\n        swal({\n          text: \"Операционный день закрыт дождитесь открытия операционного дня!\",\n          icon: \"warning\",\n          buttons: {\n            ok: \"Ок\"\n          }\n        });\n      } else {\n        let checkResult = checkForRequieredFields();\n\n        if (checkResult === true) {\n          setStatus(4);\n          setShowModalEnterPin(true);\n\n          if (props.esInn === null) {\n            setShowModalEnterPin(true);\n          } else {\n            let doc = null;\n            let dir = selectedDoc.files_directory;\n            doc = getFieldValuesUpdateDocument();\n            doc.user_id = selectedDoc.user_id;\n            doc.status = status;\n            doc[\"signed_by_registrar\"] = true;\n            doc[\"signed_registrar_inn\"] = props.esInn;\n            doc[\"signed_registrar_full_name\"] = props.esUserFullName;\n            doc[\"signed_at_registrar\"] = props.getCurrentFullDateTime();\n            doc[\"status\"] = 4;\n            doc[\"files_directory\"] = dir;\n            let commandJson = {\n              commandType: \"saveDocumentsWithFiles\",\n              session_id: session_id,\n              process_id: process_id,\n              taskID: taskID,\n              userId: userProfile.userId,\n              userRole: userProfile.userRole,\n              blobs: Blobs,\n              directory: dir,\n              variables: {\n                userAction: {\n                  value: \"updateDocument\"\n                },\n                document: {\n                  value: JSON.stringify(doc)\n                },\n                selectedDoc: {\n                  value: JSON.stringify(doc)\n                },\n                status: {\n                  value: 4\n                }\n              }\n            };\n            console.log(\"signTransfetOrder:\", commandJson);\n            props.sendFieldValues(commandJson);\n            props.clearTabData(process_id);\n          }\n        }\n      }\n    } else if (buttonName === \"cancelOrder\") {\n      if (props.operDayIsOpened === false) {\n        swal({\n          text: \"Операционный день закрыт дождитесь открытия операционного дня!\",\n          icon: \"warning\",\n          buttons: {\n            ok: \"Ок\"\n          }\n        });\n      } else {\n        let checkResult = checkForRequieredFields();\n\n        if (checkResult === true) {\n          setStatus(5);\n          setShowModalEnterPin(true);\n        }\n      }\n    } else if (buttonName === \"createDocument\") {\n      let commandJson = {\n        commandType: \"completeTask\",\n        session_id: session_id,\n        process_id: process_id,\n        taskID: taskID,\n        userId: userProfile.userId,\n        userRole: userProfile.userRole,\n        variables: {\n          userAction: {\n            value: \"createDocument\"\n          },\n          searchDoc: {\n            value: JSON.stringify(fieldValue)\n          }\n        }\n      };\n      console.log(\"createDocument:\", commandJson);\n      props.sendFieldValues(commandJson);\n      props.clearTabData(process_id);\n    } else if (buttonName === \"signTransferOrder\") {\n      if (props.operDayIsOpened === false) {\n        swal({\n          text: \"Операционный день закрыт дождитесь открытия операционного дня!\",\n          icon: \"warning\",\n          buttons: {\n            ok: \"Ок\"\n          }\n        });\n      } else {\n        let checkResult = checkForRequieredFields();\n\n        if (checkResult === true) {\n          if (props.esInn === null) {\n            setShowModalEnterPin(true);\n          } else {\n            let doc = null;\n            let dir = getUUID();\n            let action = \"\";\n            let curSt = 2;\n            let signedBlobs = await signBlobs(props.esUserFullName, props.esInn, props.esExpiredDate);\n\n            if (taskType === \"showTransferOrdersCreatingForm\") {\n              // Create new doc\n              doc = getFieldValuesSaveDocument();\n              doc.files_directory = dir;\n              doc.user_id = userProfile.userId;\n              action = \"saveDocument\";\n              doc.signed_by_depositor = true;\n              doc.signed_depositor_inn = props.esInn;\n              doc.signed_depositor_full_name = props.esUserFullName;\n              doc.signed_at_depositor = props.getCurrentFullDateTime();\n              doc.status = 2;\n            } else {\n              // Update old doc\n              dir = selectedDoc.files_directory;\n              doc = getFieldValuesUpdateDocument();\n              doc.user_id = selectedDoc.user_id;\n              doc.status = status;\n              action = \"updateDocument\";\n              doc.signed_by_registrar = true;\n              doc.signed_registrar_inn = props.esInn;\n              doc.signed_registrar_full_name = props.esUserFullName;\n              doc.signed_at_registrar = props.getCurrentFullDateTime();\n              doc.status = status;\n              doc.files_directory = selectedDoc.files_directory;\n              curSt = status; // Approved || Canceled\n            }\n\n            let commandJson = {\n              commandType: \"saveDocumentsWithFiles\",\n              session_id: session_id,\n              process_id: process_id,\n              taskID: taskID,\n              userId: userProfile.userId,\n              userRole: userProfile.userRole,\n              blobs: signedBlobs,\n              directory: dir,\n              variables: {\n                userAction: {\n                  value: action\n                },\n                document: {\n                  value: JSON.stringify(doc)\n                },\n                selectedDoc: {\n                  value: JSON.stringify(doc)\n                },\n                status: {\n                  value: curSt\n                }\n              }\n            };\n            console.log(\"signTransferOrder:\", commandJson);\n            props.sendFieldValues(commandJson);\n            props.clearTabData(process_id);\n          }\n        }\n      }\n    } else if (buttonName === \"SignTransferOrderSaveButton\") {\n      let doc = null;\n      let dir = getUUID();\n      let action = \"\";\n\n      if (taskType === \"showTransferOrdersCreatingForm\") {\n        doc = getFieldValuesSaveDocument();\n        doc.files_directory = dir;\n        doc.user_id = userProfile.userId;\n        action = \"saveDocument\";\n      } else {\n        dir = selectedDoc.files_directory;\n        doc = getFieldValuesUpdateDocument();\n        doc.files_directory = selectedDoc.files_directory;\n        doc.user_id = selectedDoc.user_id;\n        doc.status = 2;\n        action = \"updateDocument\";\n      }\n\n      let commandJson = {\n        commandType: \"saveDocumentsWithFiles\",\n        session_id: session_id,\n        process_id: process_id,\n        taskID: taskID,\n        userId: userProfile.userId,\n        userRole: userProfile.userRole,\n        directory: dir,\n        variables: {\n          userAction: {\n            value: action\n          },\n          document: {\n            value: doc\n          },\n          selectedDoc: {\n            value: \"\"\n          },\n          status: {\n            value: 2\n          }\n        }\n      };\n      console.log(\"SignTransferOrderSaveButton:\", commandJson);\n      sign(commandJson);\n    } else if (buttonName === \"showTransferOrderReport\") {\n      let reportName = selectedDoc.individual === true ? \"Peredatochnoe_Rasporyajenie_FL\" : \"Peredatochnoe_Rasporyajenie_YUL\";\n      let reportExecutions = {\n        \"reportUnitUri\": \"/reports/interactive/\" + reportName,\n        \"async\": true,\n        \"interactive\": true,\n        \"freshData\": false,\n        \"saveDataSnapshot\": false,\n        \"outputFormat\": \"pdf\",\n        // html xlsx pdf docx\n        \"parameters\": {\n          \"reportParameter\": [{\n            name: \"id\",\n            value: [selectedDoc.id.toString()]\n          }]\n        }\n      };\n      let commandJson = {\n        commandType: \"completeTask\",\n        session_id: session_id,\n        process_id: process_id,\n        taskID: taskID,\n        userId: userProfile.userId,\n        userRole: userProfile.userRole,\n        variables: {\n          userAction: {\n            value: \"showTransferOrderReport\"\n          },\n          reportName: {\n            value: reportName\n          },\n          reportVars: {\n            value: \"?id=\" + selectedDoc.id\n          },\n          reportExecutions: {\n            value: JSON.stringify(reportExecutions)\n          }\n        }\n      };\n      console.log(\"showTransferOrderReport:\", commandJson);\n      props.sendFieldValues(commandJson);\n      props.clearTabData(process_id);\n    } else if (buttonName === \"updateDocList\") {\n      const commandJson = {\n        commandType: \"completeTask\",\n        process_id: process_id,\n        session_id: session_id,\n        taskID: taskID,\n        variables: {\n          userAction: {\n            value: \"updateDocList\"\n          }\n        }\n      };\n      console.log(\"button updateDocList: \", commandJson);\n      props.sendFieldValues(commandJson);\n      props.clearTabData(process_id);\n    } else if (buttonName === \"back\") {\n      let commandJson = {\n        commandType: \"completeTask\",\n        session_id: session_id,\n        process_id: process_id,\n        taskID: taskID,\n        userId: userProfile.userId,\n        userRole: userProfile.userRole,\n        variables: {\n          userAction: {\n            value: \"back\"\n          }\n        }\n      };\n      console.log(\"button back:\", commandJson);\n      props.sendFieldValues(commandJson);\n      props.clearTabData(process_id);\n    } else if (buttonName === \"cancel\") {\n      const commandJson = {\n        commandType: \"completeTask\",\n        process_id: process_id,\n        session_id: session_id,\n        taskID: taskID,\n        userRole: userProfile.userRole,\n        variables: {\n          authorization: {\n            value: \"token\"\n          },\n          userAction: {\n            value: \"cancel\"\n          }\n        }\n      };\n      console.log(\"button cancel: \", commandJson);\n      props.sendFieldValues(commandJson);\n      props.clearTabData(process_id);\n    } else {\n      console.log(\"UNKNOWN Button \", buttonName);\n    }\n  }\n\n  async function signBlobs(fullName, inn, expiredDate) {\n    let signedBlobs = [];\n\n    for (let i = 0; i < Blobs.length; i++) {\n      if (Blobs[i].type === \"application/pdf\") {\n        for (let a = 0; a < attachedDocs.length; a++) {\n          if (Blobs[i].name === attachedDocs[a].name) {\n            let formData = new FormData();\n            formData.append(\"formFile\", attachedDocs[a], attachedDocs[a].name); // let url = \"/back/api/Template/AddWatermark?text=ФИО: \" + fullName + \" ПИН: \" + inn + \" \" + expiredDate\n\n            let url = props.api + \"/Template/AddWatermark?text=ФИО: \" + fullName + \" ПИН: \" + inn + \" \" + expiredDate;\n            var requestOptions = {\n              method: 'POST',\n              body: formData,\n              redirect: 'follow'\n            };\n            let signedBlob = await fetch(url, requestOptions).then(response => response.blob()).then(bl => {\n              let pdf = new Blob([bl], {\n                type: \"application/pdf\"\n              });\n\n              async function blobToBase64(blob) {\n                return new Promise((resolve, _) => {\n                  const reader = new FileReader();\n\n                  reader.onloadend = () => resolve(reader.result.split(\",\")[1]);\n\n                  reader.readAsDataURL(blob);\n                });\n              } // let newBlob = {}\n\n\n              let newBlob = blobToBase64(pdf).then(base64 => {\n                return newBlob = {\n                  \"name\": Blobs[i].name,\n                  \"blob\": base64,\n                  \"size\": bl.size,\n                  type: Blobs[i].type\n                };\n              });\n              return newBlob;\n            }).catch(error => console.log('error', error));\n            signedBlobs.push(signedBlob);\n          }\n        }\n      } else {\n        signedBlobs.push(Blobs[i]);\n      }\n    }\n\n    for (let s = 0; s < savedDocs.length; s++) {\n      if (savedDocs[s].type === \"application/pdf\") {\n        // console.log(\"BLOB TO SIGN\", savedDocs[s])\n        let formData = new FormData();\n        formData.append(\"formFile\", savedDocs[s], savedDocs[s].name);\n        let url = props.api + \"/Template/AddWatermark?text=ФИО: \" + fullName + \" ПИН: \" + inn + \" \" + expiredDate;\n        var requestOptions = {\n          method: 'POST',\n          body: formData,\n          redirect: 'follow'\n        };\n        let signedBlob = await fetch(url, requestOptions).then(response => response.blob()).then(bl => {\n          // var url = window.URL.createObjectURL(bl)\n          // var a = document.createElement('a')\n          // a.href = url\n          // a.download = savedDocs[s].name\n          // document.body.appendChild(a) // we need to append the element to the dom -> otherwise it will not work in firefox\n          // a.click()\n          // a.remove()  //afterwards we remove the element again   \n          let pdf = new Blob([bl], {\n            type: \"application/pdf\"\n          });\n\n          async function blobToBase64(blob) {\n            return new Promise((resolve, _) => {\n              const reader = new FileReader();\n\n              reader.onloadend = () => resolve(reader.result.split(\",\")[1]);\n\n              reader.readAsDataURL(blob);\n            });\n          }\n\n          let newBlob = blobToBase64(pdf).then(base64 => {\n            // console.log(\"BLOB SIGNED\", base64)\n            return newBlob = {\n              \"name\": savedDocs[s].name,\n              \"blob\": base64,\n              \"size\": bl.size,\n              type: savedDocs[s].type\n            };\n          });\n          return newBlob;\n        }).catch(error => console.log('error', error));\n        signedBlobs.push(signedBlob);\n      }\n    } //console.log(\"signedBlobs\", signedBlobs)\n\n\n    return signedBlobs;\n  }\n\n  function onKeyPressModalEnterPin(event) {\n    let code = event.charCode;\n\n    if (code === 13) {\n      buttonClick(\"SignTransferOrderSaveButton\", null);\n    }\n  } // attached documents\n\n\n  function handleAttachFile(e) {\n    let selectedFiles = e.target.files;\n    console.log(\"A DOCS\", selectedFiles);\n\n    if (selectedFiles && selectedFiles[0]) {\n      for (let i = 0; i < selectedFiles.length; i++) {\n        if (selectedFiles[i].type === \"application/pdf\" || selectedFiles[i].type === \"application/msword\" || selectedFiles[i].type === \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\" || selectedFiles[i].type === \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\") {\n          attachedDocs.push(selectedFiles[i]);\n          setAttachedDocs(attachedDocs);\n          setUpdateState(getUUID()); // console.log(\"A DOCS\", attachedDocs)\n        } else {\n          let reader = new FileReader();\n\n          reader.onload = async function (e) {\n            // push new images to list and show in UI\n            let image = {\n              item: /*#__PURE__*/React.createElement(\"img\", {\n                name: selectedFiles[i].name,\n                height: \"150\",\n                width: \"auto\",\n                src: e.target.result,\n                onClick: () => attachedImgClick(selectedFiles[i].name),\n                __self: this,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 1632,\n                  columnNumber: 33\n                }\n              })\n            };\n            attachedImgs.push(image);\n            setAttachedImgs(attachedImgs);\n            setUpdateState(getUUID()); // console.log(\"IMGLIST\", attachedImgs)\n          };\n\n          reader.readAsDataURL(selectedFiles[i]);\n          attachedImgsFiles.push(selectedFiles[i]); // pushAttachedImage(selectedFiles[i])\n\n          setAttachedImgsFiles(attachedImgsFiles); // console.log(\"A IMGS\", attachedImgsFiles)\n        }\n\n        pushNewBlob(selectedFiles[i]);\n      }\n    }\n  }\n\n  async function pushNewBlob(f) {\n    var blobToBase64 = function (f, cb) {\n      let reader = new FileReader();\n\n      reader.onload = function () {\n        // converts blob to base64\n        var dataUrl = reader.result;\n        var base64 = dataUrl.split(\",\")[1];\n        cb(base64);\n      };\n\n      reader.readAsDataURL(f);\n    };\n\n    blobToBase64(f, async function (base64) {\n      // encode blobs to send to socket\n      let newBlob = {\n        \"name\": f.name,\n        \"blob\": base64,\n        \"size\": f.size,\n        type: f.type\n      };\n      Blobs.push(newBlob);\n      setBlobs(Blobs);\n      console.log(\"BLOBS\", Blobs);\n    });\n  }\n\n  async function attachedImgClick(name) {\n    for (let l = 0; l < attachedImgs.length; l++) {\n      if (attachedImgs[l].item.props.name === name) {\n        console.log(\"IMG\", attachedImgs[l]);\n        setSelectedImg({\n          name: attachedImgs[l].item.props.name,\n          height: \"700\",\n          width: \"auto\",\n          src: attachedImgs[l].item.props.src\n        });\n      }\n    }\n\n    handleOpenModal();\n    let newId = getUUID();\n    setUpdateState(newId);\n  }\n\n  function attachedDocsList() {\n    // console.log(\"A DOCS\", attachedDocs)\n    let selDocsList = [];\n\n    for (let i = 0; i < attachedDocs.length; i++) {\n      selDocsList.push( /*#__PURE__*/React.createElement(Card, {\n        style: {\n          margin: 3,\n          backgroundColor: \"#E2E2E2\",\n          paddingLeft: 20,\n          minWidth: \"500px\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1688,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"table\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1689,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1690,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        style: {\n          color: \"#1B2CE8\",\n          fontWeight: \"bold\",\n          width: \"95%\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1691,\n          columnNumber: 15\n        }\n      }, attachedDocs[i].name + \" \", \"(\" + Math.round(attachedDocs[i].size / 1000) + \")\" + \"КБ\"), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1694,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(IconButton, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1695,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(CloseIcon, {\n        style: {\n          fontSize: \"medium\",\n          color: \"black\"\n        },\n        onClick: () => deleteAttachedDoc(attachedDocs[i].name),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1696,\n          columnNumber: 19\n        }\n      })))))));\n    }\n\n    return selDocsList;\n  }\n\n  function attachedImgsList() {\n    var imgs = [];\n\n    for (let l = 0; l < attachedImgs.length; l++) {\n      imgs.push( /*#__PURE__*/React.createElement(TableBody, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1710,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(TableRow, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1711,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(TableCell, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1712,\n          columnNumber: 13\n        }\n      }, attachedImgs[l].item)), /*#__PURE__*/React.createElement(TableRow, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1721,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(TableCell, {\n        align: \"center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1722,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(IconButton, {\n        onClick: () => deleteAttachedImage(attachedImgs[l].item.props.name),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1723,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(DeleteForeverIcon, {\n        fontSize: \"Large\",\n        style: {\n          color: \"black\",\n          margin: 0\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1724,\n          columnNumber: 17\n        }\n      }))))));\n    }\n\n    if (Object.keys(imgs).length !== 0) {\n      return /*#__PURE__*/React.createElement(Grid, {\n        container: true,\n        direction: \"row\",\n        justify: \"center\",\n        alignItems: \"flex-start\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1733,\n          columnNumber: 9\n        }\n      }, imgs);\n    }\n  }\n\n  function deleteAttachedDoc(name) {\n    let newDocList = [];\n\n    for (let i = 0; i < attachedDocs.length; i++) {\n      if (name !== attachedDocs[i].name) {\n        newDocList.push(attachedDocs[i]);\n      } else {\n        deleteBlob(attachedDocs[i].name);\n      }\n    } // attachedDocs = newDocList\n\n\n    setAttachedDocs(newDocList); // setUpdateState(getUUID())\n    // console.log(\"FILES\", newDocList)\n  }\n\n  function deleteAttachedImage(name) {\n    let newImgList = [];\n    let newImgFilesList = [];\n\n    for (let i = 0; i < attachedImgs.length; i++) {\n      if (name !== attachedImgs[i].item.props.name) {\n        newImgList.push(attachedImgs[i]);\n        newImgFilesList.push(attachedImgsFiles[i]);\n      } else {\n        deleteBlob(attachedImgs[i].item.props.name);\n      }\n    } // deleteBlob(name)\n    // attachedImgs = newImgList\n\n\n    setAttachedImgs(newImgList); // attachedImgsFiles = newImgFilesList\n\n    setAttachedImgsFiles(newImgFilesList); // setUpdateState(getUUID())\n    // console.log(\"IMGS\", newImgFilesList)\n  }\n\n  function deleteBlob(name) {\n    console.log(\"NAME\", name);\n    let newBlobs = [];\n\n    for (let b = 0; b < Blobs.length; b++) {\n      if (Blobs[b].name !== undefined) {\n        if (name !== Blobs[b].name) {\n          newBlobs.push(Blobs[b]);\n        } else {\n          console.log(\"DEL\", Blobs[b].name);\n        }\n      }\n    }\n\n    console.log(\"BLOBS\", newBlobs); // Blobs = newBlobs\n\n    setBlobs(newBlobs); // setUpdateState(getUUID())\n  } // Previosly saved documents\n\n\n  function convertBase64ToFile(dataurl, fileName) {\n    var arr = dataurl.split(','),\n        mime = arr[0].match(/:(.*?);/)[1],\n        bstr = atob(arr[1]),\n        n = bstr.length,\n        u8arr = new Uint8Array(n);\n\n    while (n--) {\n      u8arr[n] = bstr.charCodeAt(n);\n    }\n\n    let convFile = new File([u8arr], fileName, {\n      type: mime\n    });\n    handleAttachSavedFile(convFile);\n  }\n\n  function handleAttachSavedFile(file) {\n    if (file.type === \"application/pdf\" || file.type === \"application/msword\" || file.type === \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\" || file.type === \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\") {\n      savedDocs.push(file);\n      setSavedDocs(savedDocs);\n    } else {\n      savedImagesFiles.push(file);\n      setSavedImagesFiles(savedImagesFiles);\n      pushSavedImage(file);\n    }\n  }\n\n  async function pushSavedImage(f) {\n    let reader = new FileReader();\n\n    reader.onload = async function (e) {\n      // push new images to list and show in UI\n      let image = {\n        item: /*#__PURE__*/React.createElement(\"img\", {\n          name: f.name,\n          height: \"150\",\n          width: \"auto\",\n          src: e.target.result,\n          onClick: () => savedImgClick(f.name),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 1824,\n            columnNumber: 27\n          }\n        })\n      };\n      savedImgs.push(image); // console.log(\"IMGLIST\", savedImgs)\n\n      setSavedImgs(savedImgs);\n      setUpdateState(getUUID());\n    };\n\n    reader.readAsDataURL(f);\n  }\n\n  async function savedImgClick(name) {\n    for (let l = 0; l < savedImgs.length; l++) {\n      if (savedImgs[l].item.props.name === name) {\n        console.log(\"IMG\", savedImgs[l]);\n        setSelectedImg({\n          name: savedImgs[l].item.props.name,\n          height: \"700\",\n          width: \"auto\",\n          src: savedImgs[l].item.props.src\n        });\n      }\n    }\n\n    handleOpenModal();\n    let newId = getUUID();\n    setUpdateState(newId);\n  }\n\n  function savedDocsList() {\n    // console.log(\"SAVEDOCS\", savedDocs)\n    let savedDocsList = [];\n\n    for (let i = 0; i < savedDocs.length; i++) {\n      savedDocsList.push( /*#__PURE__*/React.createElement(Card, {\n        style: {\n          margin: 3,\n          backgroundColor: \"#E2E2E2\",\n          paddingLeft: 20,\n          minWidth: \"500px\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1853,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"table\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1854,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1855,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        style: {\n          color: \"#1B2CE8\",\n          fontWeight: \"bold\",\n          width: \"95%\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1856,\n          columnNumber: 15\n        }\n      }, savedDocs[i].name + \" \", \"(\" + Math.round(savedDocs[i].size / 1000) + \")\" + \"КБ\"), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1859,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(IconButton, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1860,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(CloseIcon, {\n        style: {\n          fontSize: \"medium\",\n          color: \"black\"\n        },\n        onClick: () => deleteSavedDoc(savedDocs[i].name),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1861,\n          columnNumber: 19\n        }\n      }))), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1864,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(IconButton, {\n        component: \"a\",\n        href: URL.createObjectURL(savedDocs[i]),\n        download: savedDocs[i].name,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1865,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(GetAppIcon, {\n        style: {\n          fontSize: \"medium\",\n          color: \"black\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1870,\n          columnNumber: 19\n        }\n      })))))));\n    }\n\n    return savedDocsList;\n  }\n\n  function savedImgsList() {\n    // console.log(\"SAVEDIMGS\", savedImgs)\n    var imgs = [];\n\n    for (let l = 0; l < savedImgs.length; l++) {\n      imgs.push( /*#__PURE__*/React.createElement(TableBody, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1884,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(TableRow, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1885,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(TableCell, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1886,\n          columnNumber: 13\n        }\n      }, savedImgs[l].item)), /*#__PURE__*/React.createElement(TableRow, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1890,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(TableCell, {\n        align: \"center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1891,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(IconButton, {\n        onClick: () => deleteSavedImage(savedImgs[l].item.props.name),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1892,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(DeleteForeverIcon, {\n        fontSize: \"Large\",\n        style: {\n          color: \"black\",\n          margin: 0\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1893,\n          columnNumber: 17\n        }\n      }))))));\n    }\n\n    if (Object.keys(imgs).length !== 0) {\n      return /*#__PURE__*/React.createElement(Grid, {\n        container: true,\n        direction: \"row\",\n        justify: \"center\",\n        alignItems: \"flex-start\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1909,\n          columnNumber: 9\n        }\n      }, imgs);\n    }\n  }\n\n  function deleteSavedDoc(name) {\n    swal({\n      text: \"Вы действительно хотите удалить этот файл?\",\n      icon: \"warning\",\n      buttons: {\n        ok: \"Да\",\n        cancel: \"Отмена\"\n      }\n    }).then(click => {\n      if (click === \"ok\") {\n        let newDocList = [];\n\n        for (let i = 0; i < savedDocs.length; i++) {\n          if (name !== savedDocs[i].name) {\n            newDocList.push(savedDocs[i]);\n          }\n        }\n\n        setSavedDocs(newDocList);\n        let commandJson = {\n          commandType: \"deleteSavedDoc\",\n          userId: userProfile.userId,\n          directory: selectedDoc.files_directory,\n          fileName: name\n        };\n        props.sendFieldValues(commandJson);\n      }\n    });\n  }\n\n  function deleteSavedImage(name) {\n    swal({\n      text: \"Вы действительно хотите удалить этот файл?\",\n      icon: \"warning\",\n      buttons: {\n        ok: \"Да\",\n        cancel: \"Отмена\"\n      }\n    }).then(click => {\n      if (click === \"ok\") {\n        let newImgList = [];\n\n        for (let i = 0; i < savedImgs.length; i++) {\n          if (name !== savedImgs[i].item.props.name) {\n            newImgList.push(savedImgs[i]);\n          }\n        }\n\n        setSavedImgs(newImgList); // setUpdateState(getUUID())\n\n        let commandJson = {\n          commandType: \"deleteSavedDoc\",\n          userId: userProfile.userId,\n          directory: selectedDoc.files_directory,\n          fileName: name\n        };\n        props.sendFieldValues(commandJson);\n      }\n    });\n  } // Create grid form components\n\n\n  function getGridFormItems(dataItem, contentItem) {\n    let value = dataItem[contentItem.name];\n    let name = contentItem.name;\n    let type = contentItem.type;\n\n    if (type === \"Enum\") {\n      if (value === null || value === \"\" || value === undefined) {\n        return \"-\";\n      } else {\n        for (let i = 0; i < gridFormEnumData.length; i++) {\n          if (gridFormEnumData[i] !== null) {\n            if (name === gridFormEnumData[i].name) {\n              for (let l = 0; l < gridFormEnumData[i].data.length; l++) {\n                if (gridFormEnumData[i].data[l].id === parseInt(value)) {\n                  return gridFormEnumData[i].data[l].label;\n                }\n              }\n            }\n          }\n        }\n      }\n    } else if (type === \"Bool\") {\n      return /*#__PURE__*/React.createElement(Checkbox, {\n        style: {\n          maxWidth: 20,\n          height: 15,\n          color: value === false ? \"red\" : \"green\"\n        },\n        checked: value === false || value === null || value === undefined ? false : true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1992,\n          columnNumber: 9\n        }\n      });\n    } else if (type === \"DateTime\") {\n      if (value === null || value === \"\" || value === undefined) {\n        return \"-\";\n      } else {\n        let Date = value.substring(0, 10);\n        let Time = value.substring(11, 16);\n        return Date + \" \" + Time;\n      }\n    } else if (type === \"Float\") {\n      if (value === null || value === \"\" || value === undefined) {\n        return \"-\";\n      } else {\n        let newCur = props.currencyBeautifier(value);\n        return newCur;\n      }\n    } else if (type === \"Int\") {\n      if (value === null || value === \"\" || value === undefined) {\n        return \"-\";\n      } else {\n        let newInt = props.intBeautifier(value);\n        return newInt;\n      }\n    } else {\n      if (value === null || value === \"\" || value === undefined) {\n        return \"-\";\n      } else {\n        return /*#__PURE__*/React.createElement(\"td\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 2031,\n            columnNumber: 17\n          }\n        }, value);\n      }\n    }\n  }\n\n  function getEnumLabel(name, id) {\n    for (let i = 0; i < gridFormEnumData.length; i++) {\n      if (gridFormEnumData[i].name === name) {\n        for (let d = 0; d < gridFormEnumData[i].data.length; d++) {\n          if (gridFormEnumData[i].data[d].id === id) {\n            return gridFormEnumData[i].data[d].label;\n          }\n        }\n      }\n    }\n  }\n\n  function dynamicSort(property, sortOrder, type) {\n    if (type === \"DateTime\" || type === \"Bool\") {\n      sortOrder = sortOrder * -1;\n    }\n\n    console.log(\"SORT\", property, sortOrder, type);\n\n    if (type === \"DateTime\") {\n      return function (a, b) {\n        if (a[property] !== null && b[property] !== null) {\n          let dateA = new Date(a[property].substring(0, 19));\n          let timeInSecA = dateA.getTime() / 1000; // console.log(\"timeInSecA\", timeInSecA)\n\n          let dateB = new Date(b[property].substring(0, 19));\n          let timeInSecB = dateB.getTime() / 1000; // console.log(\"timeInSecB\", timeInSecB)\n\n          var result = timeInSecA < timeInSecB ? -1 : timeInSecA > timeInSecB ? 1 : 0;\n          return result * sortOrder;\n        } else {\n          if (a[property] === null) {\n            return -1 * sortOrder;\n          }\n\n          return 1 * sortOrder;\n        }\n      };\n    } else if (type === \"Int\" || type === \"Text\" || type === \"Float\" || type === \"Bool\") {\n      return function (a, b) {\n        var result = a[property] < b[property] ? -1 : a[property] > b[property] ? 1 : 0;\n        return result * sortOrder;\n      };\n    } else if (type === \"Enum\") {\n      return function (a, b) {\n        if (a[property] === null) {\n          return 1 * sortOrder;\n        } else {\n          let labelA = getEnumLabel(property, a[property]); // console.log(\"A\", property, a[property], labelA)\n\n          let labelB = getEnumLabel(property, b[property]); // console.log(\"labelB\", labelB, property, b)\n\n          var result = labelA < labelB ? -1 : labelA > labelB ? 1 : 0;\n          return result * sortOrder;\n        }\n      };\n    }\n  }\n\n  function sortDataByColumn(name, type) {\n    let sortOrder = 1;\n\n    if (sortedColumn === name) {\n      sortOrder = sortedColumnOrder * -1;\n    }\n\n    setSortedColumnOrder(sortOrder);\n    setSortedColumn(name);\n    let sortedDocList = filteredDocList.sort(dynamicSort(name, sortOrder, type)); // let fetchFrom = (page*size-1)-size\n    // let fetchTo = page*size-1\n\n    setPage(1);\n    let fetchFrom = 0;\n    let fetchTo = size - 1;\n    setFilteredDocList(sortedDocList);\n    fetchBySize(fetchFrom, fetchTo, sortedDocList);\n  }\n\n  function checkToShowSection(section) {\n    let showSection = false;\n\n    for (let i = 0; i < section.contents.length; i++) {\n      if (section.contents[i].show === true) {\n        showSection = true;\n        break;\n      }\n    }\n\n    return showSection;\n  }\n\n  function checkSectionOnLastChild(i) {\n    let lastSection = true;\n\n    if (i === gridForm.sections.length - 1) {\n      // The last section\n      return true;\n    } else {\n      let nextS = i + 1;\n      console.log(\"IT\", i, gridForm.sections[nextS]);\n\n      for (let s = nextS; s < gridForm.sections.length; s++) {\n        for (let c = 0; c < gridForm.sections[s].contents.length; c++) {\n          // Check next section\n          if (gridForm.sections[s].contents[c].show === true) {\n            lastSection = false;\n            break;\n          }\n        }\n      }\n    }\n\n    return lastSection;\n  }\n\n  function getForm() {\n    return /*#__PURE__*/React.createElement(Grid, {\n      container: true,\n      direction: \"row\",\n      justify: \"flex-start\",\n      spacing: 0,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 2141,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Grid, {\n      item: true,\n      xs: isSearchForm === true ? 12 : 9,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 2142,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Paper, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 2143,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Table, {\n      style: {\n        width: \"100%\",\n        \"border-collapse\": \"collapse\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 2144,\n        columnNumber: 13\n      }\n    }, isSearchForm === false && /*#__PURE__*/React.createElement(TableRow, {\n      style: {\n        maxHeight: 25\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 2146,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(TableCell, {\n      style: {\n        fontSize: 16,\n        color: \"black\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 2147,\n        columnNumber: 19\n      }\n    }, Form.label)), /*#__PURE__*/React.createElement(Grid, {\n      container: true,\n      direction: \"row\",\n      justify: \"center\",\n      alignItems: \"center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 2150,\n        columnNumber: 15\n      }\n    }, Form.sections.map(section => {\n      return sectionBuilder(section);\n    }))))));\n  } // Create sections with labels and call bodyBuilder function\n\n\n  function sectionBuilder(section) {\n    return /*#__PURE__*/React.createElement(Table, {\n      size: \"small\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 2181,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(TableHead, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 2182,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(TableRow, {\n      style: {\n        height: 30\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 2183,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(TableCell, {\n      style: {\n        color: \"black\",\n        fontSize: 14,\n        backgroundColor: sectionColor,\n        width: \"100%\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 2184,\n        columnNumber: 13\n      }\n    }, section.label))), bodyBuilder(section));\n  } // Create body of each section and call contentBuilder function\n\n\n  function bodyBuilder(section) {\n    return /*#__PURE__*/React.createElement(Table, {\n      size: \"small\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 2202,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(TableBody, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 2203,\n        columnNumber: 9\n      }\n    }, section.contents.map(contentItem => contentItem.show === true && /*#__PURE__*/React.createElement(TableRow, {\n      style: {\n        height: 30\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 2206,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(TableCell, {\n      align: \"left\",\n      style: {\n        width: \"40%\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 2207,\n        columnNumber: 15\n      }\n    }, contentItem.label), /*#__PURE__*/React.createElement(TableCell, {\n      align: \"left\",\n      style: {\n        width: \"60%\",\n        height: 30\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 2212,\n        columnNumber: 15\n      }\n    }, contentBuilder(contentItem))))));\n  } // Creating components by it's type\n\n\n  function contentBuilder(contentItem) {\n    if (contentItem.type === \"Text\") {\n      return /*#__PURE__*/React.createElement(TextField, {\n        onKeyPress: onKeyPressText,\n        multiline: !isSearchForm,\n        onBlur: handleTextChange,\n        name: contentItem.name,\n        style: {\n          width: \"100%\"\n        },\n        disabled: formType === \"view\" || contentItem.edit === false ? true : false,\n        defaultValue: fieldValue[contentItem.name] ? fieldValue[contentItem.name] : \"\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2227,\n          columnNumber: 9\n        }\n      });\n    } else if (contentItem.type === \"Enum\") {\n      let selectedOption = {\n        \"value\": \"\",\n        \"label\": \"Пусто\",\n        \"name\": contentItem.name\n      };\n\n      if (fieldValue[contentItem.name] !== undefined) {\n        for (let i = 0; i < enumOptions[contentItem.name].length; i++) {\n          if (parseInt(fieldValue[contentItem.name]) === enumOptions[contentItem.name][i].value) {\n            selectedOption = enumOptions[contentItem.name][i];\n            break;\n          }\n        }\n      }\n\n      if (selectedOptions.length !== 0) {\n        for (let i = 0; i < selectedOptions.length; i++) {\n          if (contentItem.name === selectedOptions[i].name) {\n            selectedOption = selectedOptions[i];\n          }\n        }\n      }\n\n      return /*#__PURE__*/React.createElement(Select, {\n        name: contentItem.name,\n        value: selectedOption,\n        onChange: handleSelectChange,\n        options: enumOptions[contentItem.name],\n        isDisabled: formType === \"view\" || contentItem.edit === false ? true : false,\n        menuPortalTarget: document.body,\n        styles: {\n          menuPortal: base => ({ ...base,\n            zIndex: 9999\n          })\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2260,\n          columnNumber: 9\n        }\n      });\n    } else if (contentItem.type === \"Bool\") {\n      return /*#__PURE__*/React.createElement(Checkbox, {\n        style: {\n          maxWidth: 20,\n          height: 15,\n          color: formType === \"view\" || contentItem.edit === false ? \"grey\" : \"green\"\n        },\n        name: contentItem.name,\n        onChange: handleCheckboxChange,\n        disabled: formType === \"view\" || contentItem.edit === false ? true : false,\n        checked: fieldValue[contentItem.name] === false || fieldValue[contentItem.name] === null || fieldValue[contentItem.name] === undefined ? false : true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2273,\n          columnNumber: 9\n        }\n      });\n    } else if (contentItem.type === \"Int\") {\n      return /*#__PURE__*/React.createElement(TextField, {\n        name: contentItem.name,\n        onKeyPress: onKeyPressInt,\n        disabled: formType === \"view\" || contentItem.edit === false ? true : false,\n        style: {\n          width: \"100%\"\n        } // defaultValue={(fieldValue[contentItem.name] !== undefined) ? fieldValue[contentItem.name] : \"\"}\n        // value={(fieldValue[contentItem.name] !== undefined) ? fieldValue[contentItem.name] : \"\"}\n        // onBlur={handleIntChange}\n        ,\n        value: fieldValue[contentItem.name] !== undefined ? fieldValue[contentItem.name] : \"\",\n        onChange: handleIntChange,\n        InputProps: {\n          inputComponent: IntegerFormat\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2284,\n          columnNumber: 9\n        }\n      });\n    } else if (contentItem.type === \"Float\") {\n      console.log(\"FLOAT VAL\", fieldValue[contentItem.name]);\n      return /*#__PURE__*/React.createElement(TextField, {\n        onKeyPress: onKeyPressFloat,\n        name: contentItem.name // defaultValue = {(fieldValue[contentItem.name]) ? fieldValue[contentItem.name]: \"\"}\n        // onBlur={handleFloatChange}\n        // value={fieldValue[contentItem.name]}\n        ,\n        value: fieldValue[contentItem.name] !== undefined ? fieldValue[contentItem.name] : \"\",\n        onChange: handleFloatChange,\n        style: {\n          width: \"100%\"\n        },\n        disabled: formType === \"view\" || contentItem.edit === false ? true : false,\n        InputProps: {\n          inputComponent: FloatFormat\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2301,\n          columnNumber: 9\n        }\n      });\n    } else if (contentItem.type === \"DateTime\") {\n      return /*#__PURE__*/React.createElement(TextField, {\n        onKeyPress: onKeyPressDateTime,\n        type: \"date\",\n        name: contentItem.name,\n        onBlur: handleDateTimeChange,\n        style: {\n          width: \"100%\"\n        },\n        defaultValue: fieldValue[contentItem.name] !== undefined && fieldValue[contentItem.name] !== null ? props.parseDate(fieldValue[contentItem.name]) : \"\",\n        disabled: formType === \"view\" || contentItem.edit === false ? true : false,\n        InputLabelProps: {\n          shrink: true\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2317,\n          columnNumber: 9\n        }\n      });\n    } else if (contentItem.type === \"FullDateTime\") {\n      return /*#__PURE__*/React.createElement(TextField, {\n        name: contentItem.name,\n        onBlur: handleDateTimeChange,\n        style: {\n          width: \"100%\"\n        },\n        value: fieldValue[contentItem.name] !== undefined && fieldValue[contentItem.name] !== null ? props.parseFullDateTime(fieldValue[contentItem.name], \"T\") : \"\",\n        disabled: formType === \"view\" || contentItem.edit === false ? true : false,\n        InputLabelProps: {\n          shrink: true\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2333,\n          columnNumber: 9\n        }\n      });\n    }\n  } // Key press handlers for some fields\n\n\n  function onKeyPressText(event) {\n    let code = event.charCode;\n\n    if (code === 13) {\n      for (let i = 0; i < buttons.length; i++) {\n        if (buttons[i].name === \"findDocument\") {\n          // console.log(\"CODE\", code)\n          handleTextChange(event);\n          buttonClick(\"findDocument\", null);\n        }\n      }\n    }\n  }\n\n  function onKeyPressDateTime(event) {\n    let code = event.charCode;\n\n    if (code === 13) {\n      for (let i = 0; i < buttons.length; i++) {\n        if (buttons[i].name === \"findDocument\") {\n          // console.log(\"CODE\", code)\n          handleDateTimeChange(event);\n          buttonClick(\"findDocument\", null);\n        }\n      }\n    }\n  }\n\n  function onKeyPressInt(event) {\n    let code = event.charCode;\n\n    if (code === 13) {\n      for (let i = 0; i < buttons.length; i++) {\n        if (buttons[i].name === \"findDocument\") {\n          // console.log(\"CODE\", code)\n          let stringNum = event.target.value.toString().replace(/ /g, '');\n          let int = parseInt(stringNum);\n          fieldValue[event.target.name] = int;\n          setFieldValue(fieldValue);\n          filterDocList(0, size - 1, initialDocList, fieldValue);\n        }\n      }\n    }\n  }\n\n  function onKeyPressFloat(event) {\n    let code = event.charCode;\n\n    if (code === 13) {\n      for (let i = 0; i < buttons.length; i++) {\n        if (buttons[i].name === \"findDocument\") {\n          let stringNum = event.target.value.toString().replace(/ /g, '');\n          let float = parseFloat(stringNum);\n          fieldValue[event.target.name] = float;\n          setFieldValue(fieldValue);\n          filterDocList(0, size - 1, initialDocList, fieldValue);\n        }\n      }\n    }\n  }\n\n  function calculateColSpan(contents) {\n    let num = 0;\n\n    for (let i = 0; i < contents.length; i++) {\n      if (contents[i].show === true) {\n        num += 1;\n      }\n    }\n\n    return num;\n  }\n\n  const handleContextMenu = event => {\n    if (userProfile.userRole === \"1\") {\n      event.preventDefault();\n      setAnchorEl(event.currentTarget);\n    }\n  };\n\n  const handleCloseMenu = () => {\n    setAnchorEl(null); // console.log(\"CLOSE\", fieldValue)\n\n    for (let s = 0; s < gridForm.sections.length; s++) {\n      for (let c = 0; c < gridForm.sections[s].contents.length; c++) {\n        gridForm.sections[s].contents[c].show = gridFieldValue[gridForm.sections[s].contents[c].name];\n      }\n    }\n\n    console.log(\"nForm\", gridForm);\n    setGridForm(gridForm);\n    setUpdateState(getUUID());\n  };\n\n  function createMenuItems() {\n    let columns = [];\n    columns.push( /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 2430,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      style: {\n        paddingLeft: 5,\n        cursor: \"pointer\"\n      },\n      name: \"selectAll\",\n      onClick: () => handleTableCheckboxChange(\"selectAll\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 2431,\n        columnNumber: 9\n      }\n    }, \"\\u0412\\u044B\\u0431\\u0440\\u0430\\u0442\\u044C \\u0432\\u0441\\u0435\"), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 2438,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Checkbox, {\n      style: {\n        maxWidth: 20,\n        height: 15,\n        color: \"green\"\n      },\n      name: \"selectAll\",\n      onChange: handleGridCheckboxChange,\n      checked: gridFieldValue[\"selectAll\"] === false || gridFieldValue[\"selectAll\"] === null || gridFieldValue[\"selectAll\"] === undefined ? false : true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 2439,\n        columnNumber: 11\n      }\n    }))));\n\n    for (let s = 0; s < gridForm.sections.length; s++) {\n      for (let c = 0; c < gridForm.sections[s].contents.length; c++) {\n        let name = gridForm.sections[s].contents[c].name;\n        columns.push( /*#__PURE__*/React.createElement(\"tr\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 2452,\n            columnNumber: 11\n          }\n        }, /*#__PURE__*/React.createElement(\"td\", {\n          style: {\n            paddingLeft: 5,\n            cursor: \"pointer\",\n            background: gridFieldValue[name] === true ? \"#E2E2E2\" : \"white\"\n          },\n          name: name,\n          onClick: () => handleTableCheckboxChange(name),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 2453,\n            columnNumber: 13\n          }\n        }, gridForm.sections[s].contents[c].label), /*#__PURE__*/React.createElement(\"td\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 2460,\n            columnNumber: 13\n          }\n        }, /*#__PURE__*/React.createElement(Checkbox, {\n          style: {\n            maxWidth: 20,\n            height: 15,\n            color: \"green\"\n          },\n          name: name,\n          onChange: handleGridCheckboxChange,\n          checked: gridFieldValue[name] === false || gridFieldValue[name] === null || gridFieldValue[name] === undefined ? false : true,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 2461,\n            columnNumber: 15\n          }\n        }))));\n      }\n    }\n\n    return columns;\n  }\n\n  function downloadExcel() {\n    tableToExcel.convert(document.getElementById(gridTableId));\n  }\n\n  const handleGridCheckboxChange = event => {\n    // console.log(\"CHBX\", event.target.name, event.target.checked)\n    if (event.target.name === \"selectAll\") {\n      let newFields = {\n        [event.target.name]: event.target.checked\n      };\n\n      for (let key in gridFieldValue) {\n        newFields[key] = !gridFieldValue[event.target.name];\n      } // console.log(\"selectAll\", newFields)\n\n\n      setGridFieldValue(newFields);\n    } else {\n      setGridFieldValue({ ...gridFieldValue,\n        [event.target.name]: event.target.checked\n      });\n    }\n  };\n\n  const handleTableCheckboxChange = name => {\n    // console.log(\"TD CHBX\", name)\n    if (name === \"selectAll\") {\n      let newFields = { ...gridFieldValue\n      };\n\n      for (let key in newFields) {\n        newFields[key] = !gridFieldValue[name];\n      }\n\n      setGridFieldValue(newFields);\n    } else {\n      setGridFieldValue({ ...gridFieldValue,\n        [name]: !gridFieldValue[name]\n      });\n    }\n  };\n\n  if (updateState !== null) {\n    try {\n      return /*#__PURE__*/React.createElement(Grid, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2507,\n          columnNumber: 9\n        }\n      }, isSearchForm !== null && isSearchForm === true ? /*#__PURE__*/React.createElement(Grid, {\n        container: true,\n        direction: \"row\",\n        justify: \"flex-start\",\n        spacing: 1,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2512,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Grid, {\n        item: true,\n        xs: 9,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2513,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(Accordion, {\n        expanded: accordionExpanded,\n        onChange: () => handleExpandAccordion(),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2514,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(AccordionSummary, {\n        expandIcon: /*#__PURE__*/React.createElement(ExpandMoreIcon, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 2516,\n            columnNumber: 33\n          }\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2515,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(Typography, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2518,\n          columnNumber: 21\n        }\n      }, Form.label)), /*#__PURE__*/React.createElement(AccordionDetails, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2520,\n          columnNumber: 19\n        }\n      }, getForm())))) : getForm(), /*#__PURE__*/React.createElement(Grid, {\n        container: true,\n        direction: \"row\",\n        justify: \"flex-start\",\n        spacing: 0,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2529,\n          columnNumber: 11\n        }\n      }, buttons.map((button, index) => /*#__PURE__*/React.createElement(Button, {\n        name: button.name,\n        variant: \"outlined\",\n        onClick: () => buttonClick(button.name, null),\n        style: {\n          margin: 3,\n          color: button.fontColor,\n          backgroundColor: button.backgroundColor,\n          height: 32,\n          fontSize: 12\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2531,\n          columnNumber: 15\n        }\n      }, button.label))), isSearchForm === true && /*#__PURE__*/React.createElement(ReplayIcon, {\n        style: {\n          paddingTop: 3,\n          cursor: \"pointer\"\n        },\n        onClick: () => buttonClick(\"updateDocList\"),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2547,\n          columnNumber: 13\n        }\n      }), showAttachedDocuments === true && /*#__PURE__*/React.createElement(Paper, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2550,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Grid, {\n        item: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2551,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(Grid, {\n        container: true,\n        direction: \"row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2552,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: classes.importFile,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2553,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        accept: \"image/*, application/pdf, application/msword, application/vnd.openxmlformats-officedocument.wordprocessingml.document, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\",\n        className: classes.inputFile,\n        id: buttonFilesWordPdfImgId,\n        multiple: true,\n        type: \"file\",\n        onChange: handleAttachFile,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2554,\n          columnNumber: 21\n        }\n      }), /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: buttonFilesWordPdfImgId,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2562,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        component: \"span\",\n        variant: \"outlined\",\n        style: {\n          margin: 3,\n          color: \"white\",\n          backgroundColor: \"#BB7100\",\n          borderColor: \"#161C87\",\n          height: 32,\n          fontSize: 12\n        },\n        endIcon: /*#__PURE__*/React.createElement(AttachFileIcon, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 2574,\n            columnNumber: 34\n          }\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2563,\n          columnNumber: 23\n        }\n      }, \"\\u041F\\u0440\\u0438\\u043A\\u0440\\u0435\\u043F\\u0438\\u0442\\u044C \\u0444\\u0430\\u0439\\u043B\\u044B\"))))), /*#__PURE__*/React.createElement(Grid, {\n        container: true,\n        spacing: 2,\n        justify: \"flex-start\",\n        alignItems: \"flex-start\",\n        className: classes.root,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2581,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(Grid, {\n        item: true,\n        xs: \"auto\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2582,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(Grid, {\n        container: true,\n        direction: \"column\",\n        spacing: 1,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2583,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          paddingLeft: 10\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2584,\n          columnNumber: 21\n        }\n      }, \"\\u041F\\u0440\\u0438\\u043A\\u0440\\u0435\\u043F\\u043B\\u0435\\u043D\\u043D\\u044B\\u0435 \\u0434\\u043E\\u043A\\u0443\\u043C\\u0435\\u043D\\u0442\\u044B\"), attachedDocsList(), attachedImgsList()))), showSavedDocuments === true && /*#__PURE__*/React.createElement(Grid, {\n        container: true,\n        spacing: 2,\n        justify: \"flex-start\",\n        alignItems: \"flex-start\",\n        className: classes.root,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2591,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(Grid, {\n        item: true,\n        xs: \"auto\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2592,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(Grid, {\n        container: true,\n        direction: \"column\",\n        spacing: 1,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2593,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          paddingLeft: 10\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2594,\n          columnNumber: 23\n        }\n      }, \"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0435\\u043D\\u043D\\u044B\\u0435 \\u0434\\u043E\\u043A\\u0443\\u043C\\u0435\\u043D\\u0442\\u044B\"), savedDocsList(), savedImgsList())))), docList !== null && /*#__PURE__*/React.createElement(Grid, {\n        container: true,\n        direction: \"row\",\n        justify: \"flex-start\",\n        spacing: 0,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2604,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Grid, {\n        item: true,\n        sm: \"auto\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2605,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(Paper, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2606,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          height: \"500px\",\n          overflow: \"auto\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2607,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"table\", {\n        size: \"small\",\n        class: \"main-table-style\",\n        id: gridTableId,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2608,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"thead\", {\n        class: \"thead-style\",\n        style: {\n          position: \"sticky\",\n          top: 0\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2613,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2615,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        class: \"td-head-first-child\",\n        onContextMenu: ev => handleContextMenu(ev),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2616,\n          columnNumber: 27\n        }\n      }), gridForm.sections.map((section, index) => {\n        let showSection = checkToShowSection(section);\n\n        if (showSection === true) {\n          let lastSection = checkSectionOnLastChild(index);\n          return /*#__PURE__*/React.createElement(\"td\", {\n            colSpan: calculateColSpan(section.contents),\n            class: lastSection === true ? \"td-head-last-child\" : \"td-head-style\",\n            onContextMenu: ev => handleContextMenu(ev),\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 2622,\n              columnNumber: 33\n            }\n          }, section.label);\n        }\n      })), /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2634,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        class: \"td-head-style-2row\",\n        rowSpan: \"2\",\n        style: {\n          \"minWidth\": \"65px\"\n        },\n        onContextMenu: ev => handleContextMenu(ev),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2635,\n          columnNumber: 27\n        }\n      }, \"\\u0414\\u0435\\u0439\\u0441\\u0442\\u0432\\u0438\\u0435\"), gridForm.sections.map(section => section.contents.map(contentItem => {\n        if (contentItem.show === true) {\n          return /*#__PURE__*/React.createElement(\"td\", {\n            class: \"td-head-style-2row\",\n            rowSpan: \"2\",\n            onClick: () => sortDataByColumn(contentItem.name, contentItem.type),\n            onContextMenu: ev => handleContextMenu(ev),\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 2647,\n              columnNumber: 35\n            }\n          }, contentItem.label, sortedColumn === contentItem.name ? sortedColumnOrder === 1 ? /*#__PURE__*/React.createElement(ArrowDropDownIcon, {\n            style: {\n              marginBottom: -8\n            },\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 2653,\n              columnNumber: 119\n            }\n          }) : /*#__PURE__*/React.createElement(ArrowDropUpIcon, {\n            style: {\n              marginBottom: -8\n            },\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 2653,\n              columnNumber: 172\n            }\n          }) : \"\");\n        }\n      })))), /*#__PURE__*/React.createElement(\"tbody\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2661,\n          columnNumber: 23\n        }\n      }, Object.keys(docList).length !== 0 && docList.map(dataItem => /*#__PURE__*/React.createElement(\"tr\", {\n        style: {\n          \"height\": 30\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2664,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        style: {\n          \"maxWidth\": 34,\n          \"border-bottom\": \"1px solid grey\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2665,\n          columnNumber: 31\n        }\n      }, gridFormButtons !== \"null\" && gridFormButtons.map(button => /*#__PURE__*/React.createElement(Button, {\n        key: button.name,\n        name: button.name,\n        variant: \"outlined\" // id={dataItem.id}\n        ,\n        value: button.name,\n        onClick: () => buttonClick(button.name, dataItem),\n        style: {\n          margin: 1,\n          height: 24,\n          fontSize: 10,\n          maxWidth: 32,\n          backgroundColor: button.backgroundColor,\n          borderColor: \"darkgreen\",\n          color: \"darkgreen\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2668,\n          columnNumber: 37\n        }\n      }, button.label))), gridForm.sections.map(section => section.contents.map(contentItem => {\n        if (contentItem.show === true) {\n          return /*#__PURE__*/React.createElement(\"td\", {\n            align: \"left\",\n            style: {\n              color: \"black\",\n              fontSize: 12,\n              \"text-align\": \"center\",\n              \"border-bottom\": \"1px solid grey\"\n            },\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 2692,\n              columnNumber: 39\n            }\n          }, getGridFormItems(dataItem, contentItem));\n        }\n      }))))))), /*#__PURE__*/React.createElement(\"tfoot\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2705,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2706,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        style: {\n          paddingLeft: \"3px\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2707,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        variant: \"outlined\",\n        style: {\n          background: \"#047535\",\n          color: \"white\",\n          height: 28\n        },\n        onClick: () => downloadExcel(),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2708,\n          columnNumber: 25\n        }\n      }, \"\\u0412 EXCEL\")), /*#__PURE__*/React.createElement(\"td\", {\n        style: {\n          paddingLeft: \"20px\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2715,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          minWidth: 90,\n          color: \"black\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2716,\n          columnNumber: 25\n        }\n      }, \"\\u041A\\u043E\\u043B-\\u0432\\u043E \\u0437\\u0430\\u043F\\u0438\\u0441\\u0435\\u0439\")), /*#__PURE__*/React.createElement(\"td\", {\n        style: {\n          paddingLeft: \"3px\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2718,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(FormControl, {\n        variant: \"outlined\",\n        style: {\n          minWidth: 30\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2719,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(GridSelect, {\n        onChange: handleChangeRowsPerPage,\n        style: {\n          height: 25,\n          color: \"black\"\n        },\n        value: size,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2723,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(MenuItem, {\n        value: 10,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2728,\n          columnNumber: 29\n        }\n      }, \"10\"), /*#__PURE__*/React.createElement(MenuItem, {\n        value: 20,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2729,\n          columnNumber: 29\n        }\n      }, \"20\"), /*#__PURE__*/React.createElement(MenuItem, {\n        value: 50,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2730,\n          columnNumber: 29\n        }\n      }, \"50\"), /*#__PURE__*/React.createElement(MenuItem, {\n        value: 100,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2731,\n          columnNumber: 29\n        }\n      }, \"100\"), /*#__PURE__*/React.createElement(MenuItem, {\n        value: 200,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2732,\n          columnNumber: 29\n        }\n      }, \"200\"), /*#__PURE__*/React.createElement(MenuItem, {\n        value: 500,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2733,\n          columnNumber: 29\n        }\n      }, \"500\"), /*#__PURE__*/React.createElement(MenuItem, {\n        value: 1000,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2734,\n          columnNumber: 29\n        }\n      }, \"1000\")))), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2739,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(Tooltip, {\n        title: \"\\u041D\\u0430 \\u043F\\u0435\\u0440\\u0432\\u0443\\u044E \\u0441\\u0442\\u0440\\u0430\\u043D\\u0438\\u0446\\u0443\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2740,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(IconButton, {\n        onClick: () => KeyboardArrowFirstClick(),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2741,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(FirstPageIcon, {\n        style: {\n          fontSize: \"large\",\n          color: \"black\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2742,\n          columnNumber: 29\n        }\n      })))), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2746,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(Tooltip, {\n        title: \"\\u041D\\u0430 \\u043F\\u0440\\u0435\\u0434\\u044B\\u0434\\u0443\\u0449\\u044E\\u044E \\u0441\\u0442\\u0440\\u0430\\u043D\\u0438\\u0446\\u0443\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2747,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(IconButton, {\n        onClick: () => KeyboardArrowLeftClick(page),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2748,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(ArrowBackIosIcon, {\n        style: {\n          fontSize: \"medium\",\n          color: \"black\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2749,\n          columnNumber: 29\n        }\n      })))), /*#__PURE__*/React.createElement(\"td\", {\n        style: {\n          color: \"black\",\n          fontSize: 16\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2753,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        style: {\n          maxWidth: 25\n        },\n        value: page,\n        onChange: handlePageChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2754,\n          columnNumber: 25\n        }\n      })), /*#__PURE__*/React.createElement(\"td\", {\n        style: {\n          paddingLeft: \"3px\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2756,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(Tooltip, {\n        title: \"\\u041F\\u0435\\u0440\\u0435\\u0439\\u0442\\u0438 \\u043D\\u0430 \\u0443\\u043A\\u0430\\u0437\\u0430\\u043D\\u043D\\u0443\\u044E \\u0441\\u0442\\u0440\\u0430\\u043D\\u0438\\u0446\\u0443\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2757,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        onClick: () => GoToPage(),\n        variant: \"outlined\",\n        style: {\n          height: 22,\n          backgroundColor: \"#D1D6D6\",\n          fontSize: 12\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2758,\n          columnNumber: 27\n        }\n      }, \"\\u043F\\u0435\\u0440\\u0435\\u0439\\u0442\\u0438\"))), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2770,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(Tooltip, {\n        title: \"\\u041D\\u0430 \\u0441\\u043B\\u0435\\u0434\\u0443\\u044E\\u0449\\u044E\\u044E \\u0441\\u0442\\u0440\\u0430\\u043D\\u0438\\u0446\\u0443\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2771,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(IconButton, {\n        onClick: () => KeyboardArrowRightClick(page),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2772,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(ArrowForwardIosIcon, {\n        style: {\n          fontSize: \"medium\",\n          color: \"black\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2773,\n          columnNumber: 29\n        }\n      })))), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2777,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(Tooltip, {\n        title: \"\\u041D\\u0430 \\u043F\\u043E\\u0441\\u043B\\u0435\\u0434\\u043D\\u044E\\u044E \\u0441\\u0442\\u0440\\u0430\\u043D\\u0438\\u0446\\u0443\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2778,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(IconButton, {\n        onClick: () => KeyboardArrowLastClick(),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2779,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(LastPageIcon, {\n        style: {\n          fontSize: \"large\",\n          color: \"black\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2780,\n          columnNumber: 29\n        }\n      })))), /*#__PURE__*/React.createElement(\"td\", {\n        style: {\n          color: \"black\",\n          fontSize: 16\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2784,\n          columnNumber: 23\n        }\n      }, \"\\u0421\\u0442\\u0440. \", page, \" \\u0438\\u0437 \", getPageAmount(), \" \\u041E\\u0431\\u0449\\u0435\\u0435 \\u043A\\u043E\\u043B-\\u0432\\u043E \", filteredDocList.length))), /*#__PURE__*/React.createElement(Menu, {\n        anchorEl: anchorEl,\n        open: openMenu,\n        onClose: handleCloseMenu,\n        MenuListProps: {\n          'aria-labelledby': 'basic-button'\n        },\n        style: {\n          paddingLeft: \"100px\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2788,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"table\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2797,\n          columnNumber: 21\n        }\n      }, createMenuItems()))))), /*#__PURE__*/React.createElement(Modal, {\n        style: {\n          paddingLeft: \"500px\",\n          paddingTop: \"50px\",\n          height: 700,\n          width: 500\n        },\n        open: openModal,\n        onClose: handleCloseModal,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2805,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: classes.imagePaper,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2810,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        name: selectedImg.name,\n        height: selectedImg.height,\n        width: \"auto\",\n        src: selectedImg.src,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2811,\n          columnNumber: 15\n        }\n      }))), /*#__PURE__*/React.createElement(Modal, {\n        open: showModalEnterPin,\n        onClose: handleCloseModalEnterPin,\n        \"aria-labelledby\": \"simple-modal-title\",\n        \"aria-describedby\": \"simple-modal-description\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2814,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        style: modalStyle,\n        className: classes.modal,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2820,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"h3\", {\n        id: \"simple-modal-title\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2821,\n          columnNumber: 15\n        }\n      }, \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u041F\\u0418\\u041D \\u043A\\u043E\\u0434 \\u0420\\u0443\\u0442\\u043E\\u043A\\u0435\\u043D\\u0430\"), /*#__PURE__*/React.createElement(FormControl, {\n        variant: \"outlined\",\n        style: {\n          width: \"100%\"\n        },\n        error: wrongPin,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2822,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(InputLabel, {\n        htmlFor: \"outlined-adornment-password\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2823,\n          columnNumber: 17\n        }\n      }, \"PIN\"), /*#__PURE__*/React.createElement(OutlinedInput, {\n        type: showPin ? 'text' : 'password',\n        defaultValue: rutokenPin,\n        onChange: handlePinChange,\n        onKeyPress: onKeyPressModalEnterPin,\n        autoFocus: true,\n        endAdornment: /*#__PURE__*/React.createElement(InputAdornment, {\n          position: \"end\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 2831,\n            columnNumber: 21\n          }\n        }, /*#__PURE__*/React.createElement(IconButton, {\n          \"aria-label\": \"toggle password visibility\",\n          onClick: handleClickShowPin,\n          edge: \"end\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 2832,\n            columnNumber: 23\n          }\n        }, showPin ? /*#__PURE__*/React.createElement(Visibility, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 2837,\n            columnNumber: 36\n          }\n        }) : /*#__PURE__*/React.createElement(VisibilityOff, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 2837,\n            columnNumber: 53\n          }\n        }))),\n        labelWidth: 25,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2824,\n          columnNumber: 17\n        }\n      })), wrongPin === true && /*#__PURE__*/React.createElement(\"p\", {\n        color: \"red\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2844,\n          columnNumber: 37\n        }\n      }, \"\\u041D\\u0435 \\u0432\\u0435\\u0440\\u043D\\u044B\\u0439 PIN\"), /*#__PURE__*/React.createElement(Button, {\n        variant: \"contained\",\n        onClick: () => buttonClick(\"SignTransferOrderSaveButton\"),\n        style: {\n          margin: 3,\n          height: 32,\n          fontSize: 12,\n          color: \"white\",\n          backgroundColor: \"#2862F4\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2845,\n          columnNumber: 15\n        }\n      }, \"\\u041E\\u043A\"), /*#__PURE__*/React.createElement(Button, {\n        variant: \"contained\",\n        onClick: handleCloseModalEnterPin,\n        style: {\n          margin: 3,\n          height: 32,\n          fontSize: 12,\n          color: \"white\",\n          backgroundColor: \"#E73639\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2857,\n          columnNumber: 15\n        }\n      }, \"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\"))), /*#__PURE__*/React.createElement(Snackbar, {\n        open: showSnackBar,\n        onClose: () => handleCloseSnackBar(),\n        autoHideDuration: 1200,\n        message: snackBarMessage,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2871,\n          columnNumber: 11\n        }\n      }));\n    } catch (er) {\n      console.log(\"ERROR\", er);\n      return /*#__PURE__*/React.createElement(LinearProgress, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 2882,\n          columnNumber: 14\n        }\n      });\n    }\n  }\n});","map":{"version":3,"names":["React","useState","useEffect","makeStyles","Table","TableHead","TableRow","TableBody","TableCell","Button","Grid","Paper","FormControl","Snackbar","NumberFormat","PropTypes","Card","Modal","Menu","Accordion","AccordionDetails","AccordionSummary","Typography","ExpandMoreIcon","AttachFileIcon","MenuItem","FirstPageIcon","LastPageIcon","ArrowForwardIosIcon","ArrowBackIosIcon","LinearProgress","IconButton","CloseIcon","DeleteForeverIcon","GetAppIcon","ArrowDropDownIcon","ArrowDropUpIcon","ReplayIcon","ArrowUpwardRoundedIcon","GridSelect","TextField","Select","Checkbox","FormControlLabel","OutlinedInput","InputLabel","InputAdornment","Visibility","VisibilityOff","swal","Tooltip","rutoken","numberToWordsRu","tableToExcel","moment","require","plugin","rutokenHandle","certHandle","certData","cmsData","FloatFormat","props","inputRef","onChange","other","values","target","name","value","propTypes","func","isRequired","IntegerFormat","useStyles","theme","root","margin","paper","width","height","overflow","button","spacing","importFile","inputFile","display","modal","position","backgroundColor","palette","background","border","boxShadow","shadows","padding","getModalStyle","top","left","transform","classes","userProfile","session_id","userTask","process_id","taskID","Form","setForm","formType","buttons","selectedDoc","setSelectedDoc","status","setStatus","docId","setDocId","docList","setDocList","filteredDocList","setFilteredDocList","initialDocList","setInitialDocList","gridForm","setGridForm","gridFormButtons","enumData","enumOptions","setEnumOptions","gridFormEnumData","fieldValue","setFieldValue","selectedOptions","setSelectedOptions","page","setPage","size","setSize","showSnackBar","setShowSnackBar","snackBarMessage","setSnackBarMessage","sectionColor","updateState","setUpdateState","taskType","showSavedDocuments","setShowSavedDocuments","showAttachedDocuments","setShowAttachedDocuments","openModal","setOpenModal","attachedImgs","setAttachedImgs","attachedImgsFiles","setAttachedImgsFiles","attachedDocs","setAttachedDocs","Blobs","setBlobs","selectedImg","setSelectedImg","savedImgs","setSavedImgs","savedImagesFiles","setSavedImagesFiles","savedDocs","setSavedDocs","buttonFilesWordPdfImgId","setButtonFilesWordPdfImgId","getUUID","sortedColumn","setSortedColumn","sortedColumnOrder","setSortedColumnOrder","showModalEnterPin","setShowModalEnterPin","rutokenPin","setRutokenPin","showPin","setShowPin","wrongPin","setWrongPin","modalStyle","isSearchForm","setIsSearchForm","accordionExpanded","setAccordionExpanded","anchorEl","setAnchorEl","openMenu","Boolean","gridTableId","gridFieldValue","setGridFieldValue","console","log","parsedData","JSON","parse","s","parseInt","p","sortedDocList","sort","dynamicSort","filterDocList","fetchBySize","er","callErrorToast","undefined","parsedSelectedDoc","fields","sections","length","c","contents","fieldName","convertNumberToText","registrar_authorized_person_name","userRole","firstName","lastName","middleName","newEnumOptions","i","options","d","data","push","id","label","getLostEnumName","extension","convertBase64ToFile","content","fileName","newFields","show","enumI","type","ready","then","window","chrome","InstallTrigger","isExtensionInstalled","Promise","resolve","result","isPluginInstalled","loadPlugin","handleExpandAccordion","handleOpenModal","handleCloseModal","handleCloseModalEnterPin","handlePinChange","event","handleClickShowPin","sign","commandJson","enumerateDevices","devices","alert","firstDevice","getDeviceInfo","TOKEN_INFO_IS_LOGGED_IN","isLoggedIn","login","enumerateCertificates","CERT_CATEGORY_UNSPEC","certs","parseCertificate","tokenRemainingTime","Date","validNotAfter","getTime","now","inn","fullName","subject","rdn","setEsInn","setEsUserFullName","setEsExpiredDate","substring","orderToSign","variables","document","getCurrentFullDateTime","signedBlobs","signBlobs","blobs","stringify","callSuccessToast","sendFieldValues","clearTabData","DATA_FORMAT_PLAIN","logout","handleError","reason","isNaN","message","errorCodes","PIN_INCORRECT","handleCheckboxChange","leUnblockList","inUnblockList","fName","unblock","ul","edit","required","checked","num","converted","convert","currency","currencyNameCases","fractionalPartNameCases","declension","currencyNounGender","integer","showNumberParts","fractional","handleIntChange","stringNum","toString","replace","int","handleFloatChange","handleTextChange","handleSelectChange","option","updateSelectedOptions","slice","noSuchOption","issuerId","issuer","security_type","registrar","j","h","issuerOption","noIssuerOption","y","handleDateTimeChange","fullDateTime","format","getContentType","key","fetchFrom","fetchTo","Data","newDocList","Object","keys","match","contentType","searchField","toLowerCase","trim","dataField","includeSearch","includes","parseDate","instrStatus","statusSelected","fieldStatus","KeyboardArrowFirstClick","KeyboardArrowLastClick","getPageAmount","KeyboardArrowLeftClick","prevPage","KeyboardArrowRightClick","handleChangeRowsPerPage","GoToPage","handlePageChange","handleCloseSnackBar","pagesFloat","mathRoundOfPages","Math","floor","uuidv1","swAllert","text","icon","ok","getFieldValuesSaveDocument","docToSave","getFieldValuesUpdateDocument","docToUpdate","checkForRequieredFields","checkedSuccessfuly","buttonClick","buttonName","item","checkResult","dir","doc","files_directory","user_id","userId","commandType","directory","userAction","searchDoc","updateBody","operDayIsOpened","esInn","esUserFullName","action","curSt","esExpiredDate","signed_by_depositor","signed_depositor_inn","signed_depositor_full_name","signed_at_depositor","signed_by_registrar","signed_registrar_inn","signed_registrar_full_name","signed_at_registrar","reportName","individual","reportExecutions","reportVars","authorization","expiredDate","a","formData","FormData","append","url","api","requestOptions","method","body","redirect","signedBlob","fetch","response","blob","bl","pdf","Blob","blobToBase64","_","reader","FileReader","onloadend","split","readAsDataURL","newBlob","base64","catch","error","onKeyPressModalEnterPin","code","charCode","handleAttachFile","e","selectedFiles","files","onload","image","attachedImgClick","pushNewBlob","f","cb","dataUrl","l","src","newId","attachedDocsList","selDocsList","paddingLeft","minWidth","color","fontWeight","round","fontSize","deleteAttachedDoc","attachedImgsList","imgs","deleteAttachedImage","deleteBlob","newImgList","newImgFilesList","newBlobs","b","dataurl","arr","mime","bstr","atob","n","u8arr","Uint8Array","charCodeAt","convFile","File","handleAttachSavedFile","file","pushSavedImage","savedImgClick","savedDocsList","deleteSavedDoc","URL","createObjectURL","savedImgsList","deleteSavedImage","cancel","click","getGridFormItems","dataItem","contentItem","maxWidth","Time","newCur","currencyBeautifier","newInt","intBeautifier","getEnumLabel","property","sortOrder","dateA","timeInSecA","dateB","timeInSecB","labelA","labelB","sortDataByColumn","checkToShowSection","section","showSection","checkSectionOnLastChild","lastSection","nextS","getForm","maxHeight","map","sectionBuilder","bodyBuilder","contentBuilder","onKeyPressText","selectedOption","menuPortal","base","zIndex","onKeyPressInt","inputComponent","onKeyPressFloat","onKeyPressDateTime","shrink","parseFullDateTime","float","parseFloat","calculateColSpan","handleContextMenu","preventDefault","currentTarget","handleCloseMenu","createMenuItems","columns","cursor","handleTableCheckboxChange","handleGridCheckboxChange","downloadExcel","getElementById","index","fontColor","paddingTop","borderColor","ev","marginBottom","imagePaper"],"sources":["C:/Users/Serj/Desktop/depo/src/components/TreansferOrders/TreansferOrders.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Table from \"@material-ui/core/Table\"; // Material ui table for usual form\nimport TableHead from \"@material-ui/core/TableHead\";\nimport TableRow from \"@material-ui/core/TableRow\";\nimport TableBody from \"@material-ui/core/TableBody\";\nimport TableCell from \"@material-ui/core/TableCell\";\nimport Button from '@material-ui/core/Button';\nimport { Grid } from '@material-ui/core';\nimport Paper from '@material-ui/core/Paper';\nimport FormControl from '@material-ui/core/FormControl';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport NumberFormat from 'react-number-format';\nimport PropTypes from 'prop-types';\nimport Card from '@material-ui/core/Card';\nimport Modal from \"@material-ui/core/Modal\";\nimport Menu from '@mui/material/Menu';\n// Accordion\nimport Accordion from '@material-ui/core/Accordion';\nimport AccordionDetails from '@material-ui/core/AccordionDetails';\nimport AccordionSummary from '@material-ui/core/AccordionSummary';\nimport Typography from '@material-ui/core/Typography';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\n// Icons\nimport AttachFileIcon from '@material-ui/icons/AttachFile';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FirstPageIcon from '@material-ui/icons/FirstPage';\nimport LastPageIcon from '@material-ui/icons/LastPage';\nimport ArrowForwardIosIcon from '@material-ui/icons/ArrowForwardIos';\nimport ArrowBackIosIcon from '@material-ui/icons/ArrowBackIos';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport IconButton from '@material-ui/core/IconButton';\nimport CloseIcon from '@material-ui/icons/Close';\nimport DeleteForeverIcon from \"@material-ui/icons/DeleteForever\";\nimport GetAppIcon from '@material-ui/icons/GetApp';\nimport ArrowDropDownIcon from '@material-ui/icons/ArrowDropDown';\nimport ArrowDropUpIcon from '@material-ui/icons/ArrowDropUp';\nimport ReplayIcon from '@material-ui/icons/Replay';\nimport ArrowUpwardRoundedIcon from '@mui/icons-material/ArrowUpwardRounded';\n// Form components\nimport GridSelect from '@material-ui/core/Select';\nimport TextField from '@material-ui/core/TextField';\nimport Select from 'react-select';\nimport Checkbox from '@material-ui/core/Checkbox';\n// PIN components\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport OutlinedInput from '@material-ui/core/OutlinedInput';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport Visibility from '@material-ui/icons/Visibility';\nimport VisibilityOff from '@material-ui/icons/VisibilityOff';\n// Libraries\nimport swal from 'sweetalert' // https://sweetalert.js.org/guides/\nimport Tooltip from '@material-ui/core/Tooltip';\nimport * as rutoken from \"rutoken\";\nimport numberToWordsRu from 'number-to-words-ru'; // https://www.npmjs.com/package/number-to-words-ru\nimport tableToExcel from \"@linways/table-to-excel\"; // https://github.com/linways/table-to-excel\nvar moment = require('moment');\nvar plugin;\nvar rutokenHandle, certHandle, certData, cmsData;\n\nfunction FloatFormat(props) {\n  const { inputRef, onChange, ...other } = props;\n  return (\n    <NumberFormat\n      {...other}\n      getInputRef={inputRef}\n      onValueChange={values => {\n        onChange({\n          target: {\n            name: props.name,\n            value: values.value,\n          },\n        });\n      }}\n      decimalSeparator={\".\"}\n      thousandSeparator={\" \"}\n      isNumericString\n    />\n  );\n}\nFloatFormat.propTypes = {\n  inputRef: PropTypes.func.isRequired,\n  onChange: PropTypes.func.isRequired,\n}\nfunction IntegerFormat(props) {\n  const { inputRef, onChange, ...other } = props;\n  return (\n    <NumberFormat\n      {...other}\n      getInputRef={inputRef}\n      onValueChange={values => {\n        onChange({\n          target: {\n            name: props.name,\n            value: values.value,\n          },\n        });\n      }}\n      thousandSeparator={\" \"}\n      isNumericString\n    />\n  );\n}\nIntegerFormat.propTypes = {\n  inputRef: PropTypes.func.isRequired,\n  onChange: PropTypes.func.isRequired,\n}\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    margin: 'auto',\n  },\n  paper: {\n    width: 400,\n    height: 300,\n    overflow: 'auto',\n  },\n  button: {\n    margin: theme.spacing(0.5, 0),\n  },\n  importFile: {\n    '& > *': {\n      margin: theme.spacing(1),\n    },\n  },\n  inputFile: {\n    display: 'none',\n  },\n  modal: {\n    position: 'absolute',\n    width: 500,\n    backgroundColor: theme.palette.background.paper,\n    border: '1px solid #AFAFAF',\n    boxShadow: theme.shadows[5],\n    padding: theme.spacing(2, 4, 3),\n  }\n}))\nfunction getModalStyle() {\n  const top = 35;\n  const left = 45;\n  return {\n    top: `${top}%`,\n    left: `${left}%`,\n    transform: `translate(-${top}%, -${left}%)`,\n  };\n}\nexport default (props) => {\n  // This.state\n  const classes = useStyles();\n  const [userProfile] = useState(props.userProfile)\n  const [session_id] = useState(props.userTask.session_id)\n  const [process_id] = useState(props.userTask.process_id)\n  const [taskID] = useState(props.userTask.taskID)\n  const [Form, setForm] = useState(props.userTask.Form)\n  const [formType] = useState(props.userTask.formType)\n  const [buttons] = useState(props.userTask.buttons)\n  const [selectedDoc, setSelectedDoc] = useState(null)\n  const [status, setStatus] = useState(2)\n  const [docId, setDocId] = useState(props.userTask.docId)\n  const [docList, setDocList] = useState(null)\n  const [filteredDocList, setFilteredDocList] = useState(null)\n  const [initialDocList, setInitialDocList] = useState(null)\n  const [gridForm, setGridForm] = useState(props.userTask.gridForm)\n  const [gridFormButtons] = useState(props.userTask.gridFormButtons)\n  const [enumData] = useState(props.userTask.enumData)\n  const [enumOptions, setEnumOptions] = useState({})\n  const [gridFormEnumData] = useState(props.userTask.gridFormEnumData)\n  const [fieldValue, setFieldValue] = useState({})\n  const [selectedOptions, setSelectedOptions] = useState([])\n  const [page, setPage] = useState(1)\n  const [size, setSize] = useState(10)\n  const [showSnackBar, setShowSnackBar] = useState(false)\n  const [snackBarMessage, setSnackBarMessage] = useState(\"\")\n  const [sectionColor] = useState(\"#B2E0C9\")\n  const [updateState, setUpdateState] = useState(false)\n  const [taskType] = useState(props.userTask.taskType)\n  const [showSavedDocuments, setShowSavedDocuments] = useState(false)\n  const [showAttachedDocuments, setShowAttachedDocuments] = useState(false)\n  const [openModal, setOpenModal] = useState(false)\n  // files\n  const [attachedImgs, setAttachedImgs] = useState([])\n  const [attachedImgsFiles, setAttachedImgsFiles] = useState([])\n  const [attachedDocs, setAttachedDocs] = useState([])\n  const [Blobs, setBlobs] = useState([])\n  const [selectedImg, setSelectedImg] = useState({})\n  const [savedImgs, setSavedImgs] = useState([])\n  const [savedImagesFiles, setSavedImagesFiles] = useState([])\n  const [savedDocs, setSavedDocs] = useState([])\n  const [buttonFilesWordPdfImgId, setButtonFilesWordPdfImgId] = useState(getUUID())\n  const [sortedColumn, setSortedColumn] = useState(\"null\")\n  const [sortedColumnOrder, setSortedColumnOrder] = useState(1)\n  // modals\n  const [showModalEnterPin, setShowModalEnterPin] = useState(false)\n  const [rutokenPin, setRutokenPin] = useState(\"\")\n  const [showPin, setShowPin] = useState(false)\n  const [wrongPin, setWrongPin] = useState(false)\n  const [modalStyle] = useState(getModalStyle)\n\n  const [isSearchForm, setIsSearchForm] = useState(null)\n  const [accordionExpanded, setAccordionExpanded] = useState(false)\n\n  const [anchorEl, setAnchorEl] = useState(null)\n  const openMenu = Boolean(anchorEl)\n  const [gridTableId] = useState(getUUID())\n  const [gridFieldValue, setGridFieldValue] = useState({})\n\n  // Set data from props to state of component\n  useEffect(() => {\n    console.log(\"TreansferOrders PROPS\", props)\n    // setButtonFilesWordPdfImgId(getUUID())\n    if (props.userTask.docList !== \"null\" && props.userTask.docList !== null) {\n      try {\n        let parsedData = JSON.parse(props.userTask.docList)\n        console.log(\"DOCL\", parsedData)\n        let s = parseInt(props.userTask.size)\n        let p = parseInt(props.userTask.page)\n        setSize(s)\n        setPage(p)\n        setIsSearchForm(true)\n        setFilteredDocList(parsedData)\n        setInitialDocList(parsedData)\n        let sortedDocList = parsedData.sort(dynamicSort(\"id\", -1, \"Int\"))\n        if (props.userTask.selectedDoc !== \"null\") {\n          filterDocList(0, s - 1, sortedDocList, JSON.parse(props.userTask.selectedDoc))\n        }\n        else { fetchBySize(0, s - 1, sortedDocList) }\n      }\n      catch (er) {\n        props.callErrorToast(\"Ошибка сбора списка данных \" + props.userTask.taskType)\n        setFilteredDocList([])\n        setIsSearchForm(true)\n        setInitialDocList([])\n        setDocList([])\n      }\n    }\n    else { setIsSearchForm(false) }\n    if (props.userTask.selectedDoc !== \"null\" && props.userTask.selectedDoc !== undefined && props.userTask.selectedDoc !== null) {\n      let parsedSelectedDoc = JSON.parse(props.userTask.selectedDoc)\n      let fields = {}\n      // let Form = props.userTask.Form\n      for (let s = 0; s < Form.sections.length; s++) {\n        for (let c = 0; c < Form.sections[s].contents.length; c++) {\n          let fieldName = Form.sections[s].contents[c].name\n          fields[fieldName] = parsedSelectedDoc[fieldName]\n        }\n      }\n      if (props.userTask.taskType !== \"showTransferOrdersSearchForm\") {\n        fields[\"quantity_text\"] = convertNumberToText(parsedSelectedDoc[\"quantity_int\"])\n      }\n      if (props.userTask.taskType === \"showTransferOrdersEditForm\" &&\n        parsedSelectedDoc.registrar_authorized_person_name === null && formType === \"edit\") {\n        if (userProfile.userRole === \"4\") {\n          fields.registrar_authorized_person_name = userProfile.firstName + \" \" + userProfile.lastName + \" \" + userProfile.middleName\n          console.log(\"US NAME\", fields)\n        }\n      }\n      console.log(\"SDOC\", parsedSelectedDoc)\n      setSelectedDoc(parsedSelectedDoc)\n      setFieldValue(fields)\n    }\n    if (props.userTask.enumData !== null && props.userTask.enumData !== undefined && props.userTask.enumData !== \"null\") {\n      let newEnumOptions = {}\n      for (let i = 0; i < props.userTask.enumData.length; i++) {\n        if (props.userTask.enumData[i] !== null) {\n          let options = [{\n            \"value\": \"\",\n            \"label\": \"Пусто\",\n            \"name\": props.userTask.enumData[i].name\n          }]\n          for (let d = 0; d < props.userTask.enumData[i].data.length; d++) {\n            options.push({\n              \"value\": props.userTask.enumData[i].data[d].id,\n              \"label\": props.userTask.enumData[i].data[d].label,\n              \"name\": props.userTask.enumData[i].name\n            })\n          }\n          newEnumOptions[props.userTask.enumData[i].name] = options\n        }\n        else {\n          let options = [{\n            \"value\": \"\",\n            \"label\": \"Ошибка...\",\n            \"name\": getLostEnumName(i)\n          }]\n          newEnumOptions[getLostEnumName(i)] = options\n          props.callErrorToast(\"Ошибка сбора справочной информации \" + getLostEnumName(i))\n        }\n      }\n      setEnumOptions(newEnumOptions)\n    }\n    if (props.userTask.taskType === \"showTransferOrdersCreatingForm\") {\n      setShowAttachedDocuments(true)\n    }\n    if (props.userTask.taskType === \"showTransferOrdersEditForm\") {\n      setShowAttachedDocuments(true)\n      setShowSavedDocuments(true)\n    }\n    if (props.userTask.savedDocs.length > 0) {\n      for (let d = 0; d < props.userTask.savedDocs.length; d++) {\n        let extension = props.userTask.savedDocs[d].extension\n        if (extension === \".png\") {\n          convertBase64ToFile(\"data:image/png;base64,\" + props.userTask.savedDocs[d].content, props.userTask.savedDocs[d].fileName)\n        }\n        else if (extension === \".jpeg\" || extension === \".jpg\") {\n          convertBase64ToFile(\"data:image/jpeg;base64,\" + props.userTask.savedDocs[d].content, props.userTask.savedDocs[d].fileName)\n        }\n        else if (extension === \".doc\") {\n          convertBase64ToFile(\"data:application/msword;base64,\" + props.userTask.savedDocs[d].content, props.userTask.savedDocs[d].fileName)\n        }\n        else if (extension === \".docx\") {\n          convertBase64ToFile(\"data:application/vnd.openxmlformats-officedocument.wordprocessingml.document;base64,\" + props.userTask.savedDocs[d].content, props.userTask.savedDocs[d].fileName)\n        }\n        else if (extension === \".xlsx\") {\n          convertBase64ToFile(\"data:application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;base64,\" + props.userTask.savedDocs[d].content, props.userTask.savedDocs[d].fileName)\n        }\n        else if (extension === \".pdf\" || extension === \".PDF\") {\n          convertBase64ToFile(\"data:application/pdf;base64,\" + props.userTask.savedDocs[d].content, props.userTask.savedDocs[d].fileName)\n        }\n      }\n    }\n    if (gridForm !== null) {\n      let newFields = {}\n      for (let s = 0; s < gridForm.sections.length; s++) {\n        for (let c = 0; c < gridForm.sections[s].contents.length; c++) {\n          newFields[gridForm.sections[s].contents[c].name] = gridForm.sections[s].contents[c].show\n        }\n      }\n      setGridFieldValue(newFields)\n    }\n    setUpdateState(getUUID())\n  }, [])\n  function getLostEnumName(i) {\n    let enumI = 0\n    for (let s = 0; s < Form.sections.length; s++) {\n      for (let c = 0; c < Form.sections[s].contents.length; c++) {\n        if (Form.sections[s].contents[c].type === \"Enum\") {\n          if (enumI === i) {\n            return Form.sections[s].contents[c].name\n          }\n          else { enumI += 1 }\n        }\n      }\n    }\n  }\n  // RuToken functions\n  rutoken.ready\n    // Проверка установки расширение 'Адаптера Рутокен Плагина' в Google Chrome\n    .then(function () {\n      if (window.chrome || typeof InstallTrigger !== 'undefined') {\n        return rutoken.isExtensionInstalled()\n      } else {\n        return Promise.resolve(true)\n      }\n    })\n    // Проверка установки Рутокен Плагина\n    .then(function (result) {\n      if (result) {\n        return rutoken.isPluginInstalled()\n      } else {\n        // alert(\"Не удаётся найти расширение 'Адаптер Рутокен Плагина'\")\n      }\n    })\n    // Загрузка плагина\n    .then(function (result) {\n      if (result) {\n        return rutoken.loadPlugin();\n      } else {\n        // alert(\"Не удаётся найти Плагин\");\n      }\n    })\n    //Можно начинать работать с плагином\n    .then(function (result) {\n      if (!result) {\n        return // alert(\"Не удаётся загрузить Плагин\");\n      } else {\n        plugin = result;\n        return Promise.resolve();\n      }\n    })\n\n  function handleExpandAccordion() {\n    setAccordionExpanded(!accordionExpanded)\n  }\n  // Images MODAL\n  const handleOpenModal = () => {\n    setOpenModal(true)\n  }\n  const handleCloseModal = () => {\n    setOpenModal(false)\n  }\n  // Rutoken MODAL\n  const handleCloseModalEnterPin = () => {\n    setShowModalEnterPin(false)\n  }\n  function handlePinChange(event) {\n    // console.log(\"EVENT\", event.target.name, event.target.value)\n    setRutokenPin(event.target.value)\n    console.log(\"PIN\", event.target.value)\n  }\n  function handleClickShowPin() {\n    setShowPin(!showPin)\n  }\n  // Sign transfer order with rutoken\n  async function sign(commandJson) {\n    // Перебор подключенных Рутокенов\n    if (plugin !== undefined) {\n      plugin.enumerateDevices()\n        .then(function (devices) {\n          if (devices.length > 0) {\n            return Promise.resolve(devices[0])\n          } else {\n            alert(\"Рутокен не обнаружен\")\n          }\n        })\n        // Проверка залогиненности\n        .then(function (firstDevice) {\n          rutokenHandle = firstDevice\n          return plugin.getDeviceInfo(rutokenHandle, plugin.TOKEN_INFO_IS_LOGGED_IN)\n        })\n        // Логин на первый токен в списке устройств PIN-кодом по умолчанию\n        .then(function (isLoggedIn) {\n          if (isLoggedIn) {\n            return Promise.resolve()\n          } else {\n            return plugin.login(rutokenHandle, rutokenPin) // 240699\n          }\n        })\n        // Перебор пользовательских сертификатов на токене\n        .then(function () {\n          return plugin.enumerateCertificates(rutokenHandle, plugin.CERT_CATEGORY_UNSPEC)\n        })\n        .then(function (certs) {\n          if (certs.length > 0) {\n            certHandle = certs[0]\n            return plugin.parseCertificate(rutokenHandle, certs[0])\n          } else {\n            alert(\"Сертификат на Рутокен не обнаружен\");\n          }\n        })\n        // Подписание данных из текстового поля на первом найденом сертификате\n        .then(async function (certs) {\n          certData = certs\n          let tokenRemainingTime = new Date(certData.validNotAfter).getTime() - Date.now()\n          if (tokenRemainingTime > 0) {\n            if (certHandle.length > 0) {\n              var options = {}\n              let inn = \"\"\n              let fullName = \"\"\n              for (let i = 0; i < certData.subject.length; i++) {\n                if (certData.subject[i].rdn === \"serialNumber\") {\n                  inn = certData.subject[i].value\n                }\n                if (certData.subject[i].rdn === \"commonName\") {\n                  fullName = certData.subject[i].value\n                }\n              }\n              props.setEsInn(inn)\n              props.setEsUserFullName(fullName)\n              props.setEsExpiredDate(certData.validNotAfter.substring(0, certData.validNotAfter.length - 1))\n              let orderToSign = commandJson.variables.document.value\n              if (taskType === \"showTransferOrdersCreatingForm\") {\n                orderToSign[\"signed_by_depositor\"] = true\n                orderToSign[\"signed_depositor_inn\"] = inn\n                orderToSign[\"signed_depositor_full_name\"] = fullName\n                orderToSign[\"signed_at_depositor\"] = props.getCurrentFullDateTime()\n                orderToSign[\"status\"] = status\n                commandJson.variables.status.value = 2 // Sent to CD\n              }\n              else {\n                orderToSign[\"signed_by_registrar\"] = true\n                orderToSign[\"signed_registrar_inn\"] = inn\n                orderToSign[\"signed_registrar_full_name\"] = fullName\n                orderToSign[\"signed_at_registrar\"] = props.getCurrentFullDateTime()\n                orderToSign[\"status\"] = status\n                commandJson.variables.status.value = status // Approved || Canceled\n              }\n              let signedBlobs = await signBlobs(fullName, inn, certData.validNotAfter.substring(0, certData.validNotAfter.length - 1))\n              console.log(\"S BLOBS\", signedBlobs)\n              commandJson.blobs = signedBlobs\n              commandJson.variables.document.value = JSON.stringify(orderToSign)\n              commandJson.variables.selectedDoc.value = JSON.stringify(orderToSign)\n\n              handleCloseModalEnterPin()\n              props.callSuccessToast(\"Передаточное распоряжение успешно подписано!\", \"success\")\n              props.sendFieldValues(commandJson)\n              props.clearTabData(commandJson.process_id)\n\n              return plugin.sign(rutokenHandle, certHandle, \"textToSign\", plugin.DATA_FORMAT_PLAIN, options)\n            } else {\n              alert(\"Сертификат на Рутокен не обнаружен\")\n            }\n          }\n          else {\n            plugin.logout(rutokenHandle)\n            props.callErrorToast(\"Рутокен просрочен\", \"warning\")\n          }\n        })\n        // Закрытие сессии\n        .then(function () {\n          plugin.logout(rutokenHandle)\n        }, handleError)\n    }\n    else { props.callErrorToast(\"Вставьте рутокен, либо установите расширение для вашего браузера\", \"warning\") }\n  }\n  // catch errors while signing docs\n  function handleError(reason) {\n    if (isNaN(reason.message)) {\n      console.log(reason);\n    } else {\n      var errorCodes = plugin.errorCodes;\n      switch (parseInt(reason.message)) {\n        case errorCodes.PIN_INCORRECT:\n          // alert(\"Неверный PIN\");\n          setWrongPin(true)\n          break;\n        default:\n          console.log(\"Неизвестная ошибка\");\n      }\n    }\n  }\n  // INPUT HANDLERS\n  const handleCheckboxChange = (event) => {\n    let leUnblockList = [\"individual\", \"legal_entity\", \"quantity_int\", \"security\",\n      \"registered_person\", \"address\", \"person_registered_authority\",\n      \"registration_number_date\", \"quantity_text\", \"encumbrances_on_securities\", \"basis\", \"authority_document_name\"] // Юр\n\n    let inUnblockList = [\"individual\", \"legal_entity\", \"quantity_int\", \"security\",\n      \"registered_person\", \"address\", \"document_type\", \"document_series\", \"document_number\",\n      \"document_issue_date\", \"document_issue_authority\", //  \"document_issue_place\", \n      \"quantity_text\", \"encumbrances_on_securities\", \"basis\"] // Физ\n\n    if (event.target.name === \"legal_entity\") {\n      fieldValue[\"individual\"] = false\n      if (formType === \"edit\") {\n        for (let s = 0; s < Form.sections.length; s++) {\n          for (let c = 0; c < Form.sections[s].contents.length; c++) {\n            let fName = Form.sections[s].contents[c].name\n            let unblock = false\n\n            for (let ul = 0; ul < leUnblockList.length; ul++) {\n              if (fName === leUnblockList[ul]) {\n                unblock = true\n                break\n              }\n            }\n            if (unblock === true) { // unblock fields for legal entity\n              Form.sections[s].contents[c].edit = true\n              Form.sections[s].contents[c].required = true\n            }\n            else {\n              Form.sections[s].contents[c].edit = false // block fields for individual\n              Form.sections[s].contents[c].required = false\n            }\n            // if(unblock === true){\n            //   // console.log(\"Name\", fName)\n            //   Form.sections[s].contents[c].edit = true\n            //   Form.sections[s].contents[c].required = true\n            //   // Form.sections[s].contents[c].show = true\n            // }\n            // else{\n            //   if(fName !== \"individual\" && fName !== \"legal_entity\"){\n            //     Form.sections[s].contents[c].edit = false\n            //     Form.sections[s].contents[c].required = false\n            //     // Form.sections[s].contents[c].show = false\n            //   }\n            // }\n          }\n        }\n        setForm(Form)\n      }\n      // let newFieldValue = fieldValue\n      // for(let ul=0; ul<leUnblockList.length; ul++){\n      //   newFieldValue[leUnblockList[ul]] = null\n      // }\n      // setFieldValue(newFieldValue)\n    }\n    if (event.target.name === \"individual\") {\n      fieldValue[\"legal_entity\"] = false\n      if (formType === \"edit\") {\n        for (let s = 0; s < Form.sections.length; s++) {\n          for (let c = 0; c < Form.sections[s].contents.length; c++) {\n            let fName = Form.sections[s].contents[c].name\n            let unblock = false\n\n            for (let ul = 0; ul < inUnblockList.length; ul++) {\n              if (fName === inUnblockList[ul]) {\n                unblock = true\n                break\n              }\n            }\n            if (unblock === true) { // unblock fields for legal entity\n              Form.sections[s].contents[c].edit = true\n              Form.sections[s].contents[c].required = true\n            }\n            else {\n              Form.sections[s].contents[c].edit = false // block fields for individual\n              Form.sections[s].contents[c].required = false\n            }\n            // if(unblock === true){\n            //   Form.sections[s].contents[c].edit = true\n            //   Form.sections[s].contents[c].required = true\n            //   // Form.sections[s].contents[c].show = true\n            // }\n            // else{\n            //   if(fName !== \"individual\" && fName !== \"legal_entity\"){\n            //     Form.sections[s].contents[c].edit = false\n            //     Form.sections[s].contents[c].required = false\n            //     // Form.sections[s].contents[c].show = false\n            //   }\n            // }\n          }\n        }\n        setForm(Form)\n      }\n      // let newFieldValue = fieldValue\n      // for(let ul=0; ul<leUnblockList.length; ul++){\n      //   newFieldValue[leUnblockList[ul]] = null\n      // }\n      // setFieldValue(newFieldValue)\n    }\n    setFieldValue({ ...fieldValue, [event.target.name]: event.target.checked })\n  }\n  function convertNumberToText(num) {\n    let converted = numberToWordsRu.convert(num, {\n      currency: {\n        currencyNameCases: ['ценная бумага', 'ценных бумаги', 'ценных бумаг'],\n        fractionalPartNameCases: ['', '', ''],\n        declension: 'nominative',\n        currencyNounGender: {\n          integer: 1, // 1 => Женский род ('одна', 'две'...)\n        }\n      },\n      showNumberParts: {\n        integer: true,\n        fractional: false\n      }\n    })\n    // console.log(\"WORD\", converted)\n    return converted\n  }\n  // Integer input handler\n  const handleIntChange = (event) => {\n    // console.log(\"EVENT\", event.target.name, event.target.value)\n    let stringNum = event.target.value.toString().replace(/ /g, '')\n    let int = parseInt(stringNum)\n    setFieldValue({ ...fieldValue, [event.target.name]: int })\n    if (event.target.name === \"quantity_int\") {\n      let converted = convertNumberToText(stringNum)\n      setFieldValue({ ...fieldValue, [\"quantity_text\"]: converted, [event.target.name]: int })\n    }\n  }\n  // Float input handler\n  const handleFloatChange = (event) => {\n    // console.log(\"FLOAT CHANGE\", event.target.name, event.target.value)\n    setFieldValue({ ...fieldValue, [event.target.name]: event.target.value })\n  }\n  // const handleIntChange = (event) => {\n  //   console.log(\"EVENT\", event.target.name, event.target.value)\n  //   let stringNum = event.target.value.toString().replace(/ /g, '')\n  //   let int = parseInt(stringNum)\n  //   setFieldValue({ ...fieldValue, [event.target.name]: int })\n  //   if (event.target.name === \"quantity_int\") {\n  //     let converted = convertNumberToText(stringNum)\n  //     setFieldValue({ ...fieldValue, [\"quantity_text\"]: converted, [event.target.name]: int })\n  //   }\n  // }\n  // // Float input handler\n  // const handleFloatChange = (event) => {\n  //   let stringNum = event.target.value.toString().replace(/ /g, '');\n  //   let float = parseFloat(stringNum)\n  //   setFieldValue({ ...fieldValue, [event.target.name]: float })\n  //   console.log(\"FLOAT CHANGE\", event.target.name, fieldValue)\n  // }\n  function handleTextChange(event) {\n    // console.log(\"EVENT\", event.target.name, event.target.value)\n    fieldValue[event.target.name] = event.target.value\n    setFieldValue(fieldValue)\n    console.log(\"FIELDVALUE\", fieldValue)\n  }\n  function handleSelectChange(option) {\n    fieldValue[option.name] = option.value\n    console.log(\"OPT\", option.name, option.value)\n    var updateSelectedOptions = selectedOptions.slice()\n    let noSuchOption = true\n    for (let i = 0; i < updateSelectedOptions.length; i++) {\n      if (option.name === updateSelectedOptions[i].name) {\n        updateSelectedOptions[i] = option\n        noSuchOption = false\n        setSelectedOptions(updateSelectedOptions)\n        break\n      }\n      else {\n        noSuchOption = true\n      }\n    }\n    if (noSuchOption === true) {\n      updateSelectedOptions.push(option)\n      setSelectedOptions(updateSelectedOptions)\n    }\n    if (option.name === \"security\") {\n      // выбрана ценная бумага нужно найти эмитента и отобразить\n      for (let i = 0; i < enumData.length; i++) {\n        if (enumData[i].name === \"security\") {\n          for (let d = 0; d < enumData[i].data.length; d++) {\n            if (enumData[i].data[d].id === option.value) {\n              let issuerId = enumData[i].data[d].issuer\n              fieldValue[\"issuer\"] = issuerId\n              fieldValue[\"security_type\"] = enumData[i].data[d].security_type\n              fieldValue[\"registrar\"] = enumData[i].data[d].registrar\n              // let registrarId\n              for (let j = 0; j < enumData.length; j++) {\n                if (enumData[j].name === \"issuer\") {\n                  // Set isuuer of security\n                  for (let h = 0; h < enumData[j].data.length; h++) {\n                    if (enumData[j].data[h].id === issuerId) {\n                      // Set registrar of issuer\n                      // registrarId = enumData[j].data[h].registrar\n                      let issuerOption = {\n                        value: issuerId,\n                        name: \"issuer\",\n                        label: enumData[j].data[h].label\n                      }\n                      let noIssuerOption = true\n                      for (let y = 0; y < updateSelectedOptions.length; y++) {\n                        if (updateSelectedOptions[y].name === \"issuer\") {\n                          updateSelectedOptions[y] = issuerOption\n                          noIssuerOption = false\n                          setSelectedOptions(updateSelectedOptions)\n                          break\n                        }\n                        else {\n                          noIssuerOption = true\n                        }\n                      }\n                      if (noIssuerOption === true) {\n                        updateSelectedOptions.push(issuerOption)\n                        setSelectedOptions(updateSelectedOptions)\n                      }\n                    }\n                  }\n                }\n              }\n              // for (let r = 0; r < enumData.length; r++) {\n              //   if (enumData[r].name === \"registrar\") {\n              //     // Set registrar of isuuer\n              //     for (let p = 0; p < enumData[r].data.length; p++) {\n              //       if (enumData[r].data[p].id === registrarId) {\n              //         fieldValue[\"registrar\"] = registrarId\n              //         let registrarOption = {\n              //           value: registrarId,\n              //           name: \"registrar\",\n              //           label: enumData[r].data[p].label\n              //         }\n              //         let noRegistrarOption = true\n              //         for (let y = 0; y < updateSelectedOptions.length; y++) {\n              //           if (updateSelectedOptions[y].name === \"registrar\") {\n              //             updateSelectedOptions[y] = registrarOption\n              //             noRegistrarOption = false\n              //             setSelectedOptions(updateSelectedOptions)\n              //             break\n              //           }\n              //           else {\n              //             noRegistrarOption = true\n              //           }\n              //         }\n              //         if (noRegistrarOption === true) {\n              //           updateSelectedOptions.push(registrarOption)\n              //           setSelectedOptions(updateSelectedOptions)\n              //         }\n              //       }\n              //     }\n              //   }\n              // }\n            }\n          }\n        }\n      }\n    }\n  }\n  function handleDateTimeChange(event) {\n    // // console.log(\"EVENT\", event.target.name, event.target.value)\n    // let fullDate = props.parseDate(event.target.value)\n    // var hours = new Date().getHours()\n    // var minutes = new Date().getMinutes()\n    // var seconds = new Date().getSeconds()\n    // var convertedDate = fullDate + \" \" + hours + \":\" + minutes + \":\" + seconds + \".123456\"\n    // fieldValue[event.target.name] = convertedDate\n    let fullDateTime = moment(event.target.value).format('YYYY-MM-DDTHH:mm:ss')\n    fieldValue[event.target.name] = fullDateTime\n    setFieldValue(fieldValue)\n    // console.log(\"DATE CHANGE\", event.target.value)\n  }\n  function getContentType(key) {\n    for (let s = 0; s < Form.sections.length; s++) {\n      for (let c = 0; c < Form.sections[s].contents.length; c++) {\n        if (key === Form.sections[s].contents[c].name) {\n          return Form.sections[s].contents[c].type\n        }\n      }\n    }\n  }\n  // filter docList by filled parameters\n  function filterDocList(fetchFrom, fetchTo, Data, fields) {\n    var newDocList = []\n    if (Object.keys(fields).length === 0) {\n      newDocList = Data\n    }\n    else {\n      for (let i = 0; i < Data.length; i++) {\n        let match = false\n        for (let key in fields) {\n          if (fields[key] === null || fields[key] === \"\" || fields[key] === undefined) {\n            match = true\n          }\n          else {\n            if (Data[i][key] !== null) {\n              let contentType = getContentType(key)\n              if (contentType === \"Text\") {\n                try {\n                  let searchField = fields[key].toLowerCase().trim()\n                  let dataField = Data[i][key].toLowerCase()\n                  let includeSearch = dataField.includes(searchField)\n                  if (includeSearch === true) {\n                    match = true\n                  }\n                  else {\n                    match = false\n                    break\n                  }\n                }\n                catch (er) {\n                  console.log(\"ERR\", er)\n                  match = true\n                }\n              }\n              else if (contentType === \"Int\" || contentType === \"Float\") {\n                if (fields[key] >= 0 || fields[key] < 0) {\n                  let searchField = fields[key].toString()\n                  let dataField = Data[i][key].toString()\n                  let includeSearch = dataField.includes(searchField)\n                  if (includeSearch === true) {\n                    match = true\n                  }\n                  else {\n                    match = false\n                    break\n                  }\n                }\n                else { match = true }\n              }\n              else if (contentType === \"Enum\") {\n\n                if (fields[key] === Data[i][key]) {\n                  match = true\n                }\n                else {\n                  match = false\n                  break\n                }\n              }\n              else if (contentType === \"DateTime\") {\n                let searchField = props.parseDate(fields[key])\n                let dataField = props.parseDate(Data[i][key])\n                // console.log(\"DATES\", searchField, dataField, searchField.includes(dataField))\n                if (searchField === \"NaN-NaN-NaN\" || searchField === \"Invalid date\") {\n                  match = true\n                }\n                else {\n                  if (searchField.includes(dataField) === true) {\n                    match = true\n                  }\n                  else {\n                    match = false\n                    break\n                  }\n                }\n              }\n              else if (contentType === \"Bool\") {\n                if (key === \"filled\" || key === \"onExecution\" || key === \"executed\" || key === \"canceled\") {\n                  let instrStatus = \"\"\n                  let statusSelected = false\n                  let fieldStatus = \"\"\n                  // Check fields\n                  if (fields[\"filled\"] === true) {\n                    fieldStatus = \"filled\"\n                    statusSelected = true\n                  }\n                  if (fields[\"onExecution\"] === true) {\n                    fieldStatus = \"onExecution\"\n                    statusSelected = true\n                  }\n                  if (fields[\"executed\"] === true) {\n                    fieldStatus = \"executed\"\n                    statusSelected = true\n                  }\n                  if (fields[\"canceled\"] === true) {\n                    fieldStatus = \"canceled\"\n                    statusSelected = true\n                  }\n                  if (statusSelected === true) {\n                    // Check Instruction\n                    if (Data[i][\"filled\"] === true) {\n                      instrStatus = \"filled\"\n                    }\n                    if (Data[i][\"onExecution\"] === true) {\n                      instrStatus = \"onExecution\"\n                    }\n                    if (Data[i][\"executed\"] === true) {\n                      instrStatus = \"executed\"\n                    }\n                    if (Data[i][\"canceled\"] === true) {\n                      instrStatus = \"canceled\"\n                    }\n                    // Check whether statuses are equal\n                    if (fieldStatus === instrStatus) {\n                      match = true\n                    }\n                    else {\n                      match = false\n                      break\n                    }\n                  }\n                  else {\n                    match = true\n                  }\n                }\n                else {\n                  if (Data[i][key] === null || fields[key] === Data[i][key]) {\n                    match = true\n                  }\n                  else {\n                    match = false\n                    break\n                  }\n                }\n              }\n            }\n            else {\n              match = false\n              break\n            }\n          }\n        }\n        if (match === true) {\n          newDocList.push(Data[i])\n        }\n      }\n    }\n    setFilteredDocList(newDocList)\n    fetchBySize(fetchFrom, fetchTo, newDocList)\n  }\n  // get rows amount of filtered docList by size\n  function fetchBySize(fetchFrom, fetchTo, Data) {\n    // console.log(\"fetchFrom\", \"fetchTo\")\n    let newDocList = []\n    for (let i = fetchFrom; i <= fetchTo; i++) {\n      if (Data[i] !== undefined) {\n        newDocList.push(Data[i])\n      }\n    }\n    setDocList(newDocList)\n  }\n  // Pagination functions\n  function KeyboardArrowFirstClick() {\n    if (page !== 1) {\n      setPage(1)\n      fetchBySize(0, size - 1, filteredDocList)\n    }\n    else {\n      setSnackBarMessage(\"Вы на первой странице!\")\n      setShowSnackBar(true)\n    }\n  }\n  function KeyboardArrowLastClick() {\n    if (page !== getPageAmount()) {\n      setPage(getPageAmount())\n      fetchBySize((getPageAmount() - 1) * size, filteredDocList.length, filteredDocList)\n    }\n    else {\n      setSnackBarMessage(\"Вы на последней странице!\")\n      setShowSnackBar(true)\n    }\n  }\n  function KeyboardArrowLeftClick(page) {\n    if (page !== 1) {\n      var prevPage = page - 1\n      setPage(prevPage)\n      let fetchFrom = ((prevPage - 1) * size) //10\n      let fetchTo = (size * prevPage) - 1\n      fetchBySize(fetchFrom, fetchTo, filteredDocList)\n    }\n    else {\n      setSnackBarMessage(\"Вы на первой странице!\")\n      setShowSnackBar(true)\n    }\n  }\n  function KeyboardArrowRightClick(page) {\n    if (docList.length < size - 1) {\n      // console.log(\"NO DATA\")\n      setSnackBarMessage(\"Больше нет данных!\")\n      setShowSnackBar(true)\n    }\n    else {\n      setPage(page + 1)\n      let fetchFrom = (size * page)\n      let fetchTo = ((page + 1) * size) - 1\n      fetchBySize(fetchFrom, fetchTo, filteredDocList)\n    }\n\n  }\n  function handleChangeRowsPerPage(event) {\n    setSize(event.target.value)\n    setPage(1)\n    fetchBySize(0, event.target.value - 1, filteredDocList)\n  }\n  function GoToPage() {\n    let fetchFrom = (page * size - 1) - size\n    let fetchTo = page * size - 1\n    fetchBySize(fetchFrom, fetchTo, filteredDocList)\n  }\n  function handlePageChange(event) {\n    setPage(event.target.value)\n  }\n  function handleCloseSnackBar() {\n    setShowSnackBar(false)\n  }\n  function getPageAmount() {\n    let pagesFloat = (filteredDocList.length) / size\n    let mathRoundOfPages = Math.floor(pagesFloat)\n    if (pagesFloat > mathRoundOfPages) {\n      return mathRoundOfPages + 1\n    }\n    else {\n      return mathRoundOfPages\n    }\n  }\n  // random UUID generator\n  function getUUID() {\n    const uuidv1 = require(\"uuid/v1\")\n    return uuidv1()\n  }\n  function swAllert(text, icon) {\n    return (\n      swal({\n        text: text,\n        icon: icon,\n        buttons: { ok: \"Ок\" },\n      })\n    )\n  }\n  // Collect data to save doc\n  function getFieldValuesSaveDocument() {\n    let docToSave = {}\n    for (let s = 0; s < Form.sections.length; s++) {\n      for (let c = 0; c < Form.sections[s].contents.length; c++) {\n        let fieldName = Form.sections[s].contents[c].name\n        if (Form.sections[s].contents[c].type === \"Bool\" && fieldValue[fieldName] === undefined) {\n          docToSave[fieldName] = false\n        }\n        else {\n          docToSave[fieldName] = fieldValue[fieldName]\n        }\n      }\n    }\n    return docToSave\n  }\n  function getFieldValuesUpdateDocument() {\n    let docToUpdate = selectedDoc\n    // docToUpdate[\"created_at\"] = selectedDoc.created_at\n    // docToUpdate[\"id\"] = selectedDoc.id\n    // docToUpdate[\"user_id\"] = selectedDoc.user_id\n    // docToUpdate[\"files_directory\"] = selectedDoc.files_directory\n    for (let s = 0; s < Form.sections.length; s++) {\n      for (let c = 0; c < Form.sections[s].contents.length; c++) {\n        let fieldName = Form.sections[s].contents[c].name\n        if (Form.sections[s].contents[c].type === \"Bool\" && (fieldValue[fieldName] === undefined || fieldValue[fieldName] === null)) {\n          docToUpdate[fieldName] = false\n        }\n        else {\n          docToUpdate[fieldName] = fieldValue[fieldName]\n        }\n      }\n    }\n    return docToUpdate\n  }\n  function checkForRequieredFields() {\n    let checkedSuccessfuly = null\n    for (let s = 0; s < Form.sections.length; s++) {\n      for (let c = 0; c < Form.sections[s].contents.length; c++) {\n        let fieldName = Form.sections[s].contents[c].name\n        if (Form.sections[s].contents[c].required === true) {\n          console.log(\"REQ\", Form.sections[s].contents[c].name)\n          if (fieldValue[fieldName] === undefined || fieldValue[fieldName] === null ||\n            fieldValue[fieldName] === \"NaN.NaN.NaN\" || fieldValue[fieldName] === \"\") {\n            checkedSuccessfuly = false\n            swAllert(\"Внимание заполните поле \\\"\" + Form.sections[s].contents[c].label + \"\\\"\", \"warning\")\n            return checkedSuccessfuly\n          }\n          else {\n            checkedSuccessfuly = true\n          }\n        }\n        else {\n          checkedSuccessfuly = true\n        }\n      }\n    }\n    return checkedSuccessfuly\n  }\n  async function buttonClick(buttonName, item) {\n    if (buttonName === \"findDocument\") {\n      if (accordionExpanded === false) {\n        setAccordionExpanded(true)\n      }\n      else {\n        filterDocList(0, size - 1, initialDocList, fieldValue)\n      }\n    }\n    else if (buttonName === \"saveTransferOrder\") {\n      let checkResult = checkForRequieredFields()\n      if (checkResult === true) {\n        let dir = getUUID()\n        let doc = getFieldValuesSaveDocument()\n        doc.files_directory = dir\n        doc.user_id = userProfile.userId\n        doc[\"status\"] = 1\n        let commandJson =\n        {\n          commandType: \"saveDocumentsWithFiles\",\n          session_id: session_id,\n          process_id: process_id,\n          taskID: taskID,\n          userId: userProfile.userId,\n          userRole: userProfile.userRole,\n          blobs: Blobs,\n          directory: dir,\n          variables: {\n            userAction: { value: \"saveDocument\" },\n            document: { value: JSON.stringify(doc) },\n            selectedDoc: { value: JSON.stringify(doc) },\n            status: { value: 1 }\n          }\n        }\n        console.log(\"saveTransferOrder:\", commandJson)\n        props.sendFieldValues(commandJson)\n        props.clearTabData(process_id)\n      }\n    }\n    else if (buttonName === \"openDocument\") {\n      // console.log(\"ITEM\", item)\n      let commandJson =\n      {\n        commandType: \"completeTask\",\n        session_id: session_id,\n        process_id: process_id,\n        taskID: taskID,\n        userId: userProfile.userId,\n        userRole: userProfile.userRole,\n        variables: {\n          selectedDoc: { value: JSON.stringify(item) },\n          userAction: { value: \"openDocument\" },\n          docId: { value: item.id },\n          status: { value: item.status },\n          searchDoc: { value: JSON.stringify(fieldValue) }\n        }\n      }\n      console.log(\"button openDocument: \", commandJson)\n      props.sendFieldValues(commandJson)\n      props.clearTabData(process_id)\n    }\n    else if (buttonName === \"editDocument\") {\n      let commandJson =\n      {\n        commandType: \"completeTask\",\n        session_id: session_id,\n        process_id: process_id,\n        taskID: taskID,\n        userId: userProfile.userId,\n        userRole: userProfile.userRole,\n        variables: {\n          userAction: { value: \"editDocument\" }\n        }\n      }\n      console.log(\"updateDocument:\", commandJson)\n      props.sendFieldValues(commandJson)\n      props.clearTabData(process_id)\n    }\n    else if (buttonName === \"updateDocument\") {\n      let checkResult = checkForRequieredFields()\n      if (checkResult === true) {\n        let updateBody = getFieldValuesUpdateDocument()\n        updateBody.status = selectedDoc.status\n        let commandJson =\n        {\n          commandType: \"saveDocumentsWithFiles\",\n          session_id: session_id,\n          process_id: process_id,\n          taskID: taskID,\n          userId: userProfile.userId,\n          userRole: userProfile.userRole,\n          blobs: Blobs,\n          directory: selectedDoc.files_directory,\n          variables: {\n            userAction: { value: \"updateDocument\" },\n            document: { value: JSON.stringify(updateBody) },\n            selectedDoc: { value: JSON.stringify(updateBody) }\n          }\n        }\n        console.log(\"updateDocument:\", commandJson)\n        props.sendFieldValues(commandJson)\n        props.clearTabData(process_id)\n      }\n    }\n    else if (buttonName === \"sendToRegistrar\") {\n      let updateBody = getFieldValuesUpdateDocument()\n      updateBody.status = 3\n      let commandJson =\n      {\n        commandType: \"completeTask\",\n        session_id: session_id,\n        process_id: process_id,\n        taskID: taskID,\n        userId: userProfile.userId,\n        userRole: userProfile.userRole,\n        variables: {\n          userAction: { value: \"updateDocument\" },\n          document: { value: JSON.stringify(updateBody) },\n          selectedDoc: { value: JSON.stringify(updateBody) },\n          status: { value: 3 }\n        }\n      }\n      console.log(\"updateDocument:\", updateBody)\n      props.sendFieldValues(commandJson)\n      props.clearTabData(process_id)\n    }\n    else if (buttonName === \"approveOrder\") {\n      if (props.operDayIsOpened === false) {\n        swal({\n          text: \"Операционный день закрыт дождитесь открытия операционного дня!\",\n          icon: \"warning\",\n          buttons: { ok: \"Ок\" }\n        })\n      }\n      else {\n        let checkResult = checkForRequieredFields()\n        if (checkResult === true) {\n          setStatus(4)\n          setShowModalEnterPin(true)\n          if (props.esInn === null) {\n            setShowModalEnterPin(true)\n          }\n          else {\n            let doc = null\n            let dir = selectedDoc.files_directory\n            doc = getFieldValuesUpdateDocument()\n            doc.user_id = selectedDoc.user_id\n            doc.status = status\n            doc[\"signed_by_registrar\"] = true\n            doc[\"signed_registrar_inn\"] = props.esInn\n            doc[\"signed_registrar_full_name\"] = props.esUserFullName\n            doc[\"signed_at_registrar\"] = props.getCurrentFullDateTime()\n            doc[\"status\"] = 4\n            doc[\"files_directory\"] = dir\n\n            let commandJson =\n            {\n              commandType: \"saveDocumentsWithFiles\",\n              session_id: session_id,\n              process_id: process_id,\n              taskID: taskID,\n              userId: userProfile.userId,\n              userRole: userProfile.userRole,\n              blobs: Blobs,\n              directory: dir,\n              variables: {\n                userAction: { value: \"updateDocument\" },\n                document: { value: JSON.stringify(doc) },\n                selectedDoc: { value: JSON.stringify(doc) },\n                status: { value: 4 }\n              }\n            }\n            console.log(\"signTransfetOrder:\", commandJson)\n            props.sendFieldValues(commandJson)\n            props.clearTabData(process_id)\n          }\n        }\n      }\n    }\n    else if (buttonName === \"cancelOrder\") {\n      if (props.operDayIsOpened === false) {\n        swal({\n          text: \"Операционный день закрыт дождитесь открытия операционного дня!\",\n          icon: \"warning\",\n          buttons: { ok: \"Ок\" }\n        })\n      }\n      else {\n        let checkResult = checkForRequieredFields()\n        if (checkResult === true) {\n          setStatus(5)\n          setShowModalEnterPin(true)\n        }\n      }\n    }\n    else if (buttonName === \"createDocument\") {\n      let commandJson =\n      {\n        commandType: \"completeTask\",\n        session_id: session_id,\n        process_id: process_id,\n        taskID: taskID,\n        userId: userProfile.userId,\n        userRole: userProfile.userRole,\n        variables: {\n          userAction: { value: \"createDocument\" },\n          searchDoc: { value: JSON.stringify(fieldValue) }\n        }\n      }\n      console.log(\"createDocument:\", commandJson)\n      props.sendFieldValues(commandJson)\n      props.clearTabData(process_id)\n    }\n    else if (buttonName === \"signTransferOrder\") {\n      if (props.operDayIsOpened === false) {\n        swal({\n          text: \"Операционный день закрыт дождитесь открытия операционного дня!\",\n          icon: \"warning\",\n          buttons: { ok: \"Ок\" }\n        })\n      }\n      else {\n        let checkResult = checkForRequieredFields()\n        if (checkResult === true) {\n          if (props.esInn === null) {\n            setShowModalEnterPin(true)\n          }\n          else {\n            let doc = null\n            let dir = getUUID()\n            let action = \"\"\n            let curSt = 2\n            let signedBlobs = await signBlobs(props.esUserFullName, props.esInn, props.esExpiredDate)\n            if (taskType === \"showTransferOrdersCreatingForm\") { // Create new doc\n              doc = getFieldValuesSaveDocument()\n              doc.files_directory = dir\n              doc.user_id = userProfile.userId\n              action = \"saveDocument\"\n              doc.signed_by_depositor = true\n              doc.signed_depositor_inn = props.esInn\n              doc.signed_depositor_full_name = props.esUserFullName\n              doc.signed_at_depositor = props.getCurrentFullDateTime()\n              doc.status = 2\n            }\n            else { // Update old doc\n              dir = selectedDoc.files_directory\n              doc = getFieldValuesUpdateDocument()\n              doc.user_id = selectedDoc.user_id\n              doc.status = status\n              action = \"updateDocument\"\n              doc.signed_by_registrar = true\n              doc.signed_registrar_inn = props.esInn\n              doc.signed_registrar_full_name = props.esUserFullName\n              doc.signed_at_registrar = props.getCurrentFullDateTime()\n              doc.status = status\n              doc.files_directory = selectedDoc.files_directory\n              curSt = status // Approved || Canceled\n            }\n\n            let commandJson =\n            {\n              commandType: \"saveDocumentsWithFiles\",\n              session_id: session_id,\n              process_id: process_id,\n              taskID: taskID,\n              userId: userProfile.userId,\n              userRole: userProfile.userRole,\n              blobs: signedBlobs,\n              directory: dir,\n              variables: {\n                userAction: { value: action },\n                document: { value: JSON.stringify(doc) },\n                selectedDoc: { value: JSON.stringify(doc) },\n                status: { value: curSt }\n              }\n            }\n            console.log(\"signTransferOrder:\", commandJson)\n            props.sendFieldValues(commandJson)\n            props.clearTabData(process_id)\n          }\n        }\n      }\n    }\n    else if (buttonName === \"SignTransferOrderSaveButton\") {\n      let doc = null\n      let dir = getUUID()\n      let action = \"\"\n      if (taskType === \"showTransferOrdersCreatingForm\") {\n        doc = getFieldValuesSaveDocument()\n        doc.files_directory = dir\n        doc.user_id = userProfile.userId\n        action = \"saveDocument\"\n      }\n      else {\n        dir = selectedDoc.files_directory\n        doc = getFieldValuesUpdateDocument()\n        doc.files_directory = selectedDoc.files_directory\n        doc.user_id = selectedDoc.user_id\n        doc.status = 2\n        action = \"updateDocument\"\n      }\n\n      let commandJson =\n      {\n        commandType: \"saveDocumentsWithFiles\",\n        session_id: session_id,\n        process_id: process_id,\n        taskID: taskID,\n        userId: userProfile.userId,\n        userRole: userProfile.userRole,\n        directory: dir,\n        variables: {\n          userAction: { value: action },\n          document: { value: doc },\n          selectedDoc: { value: \"\" },\n          status: { value: 2 }\n        }\n      }\n      console.log(\"SignTransferOrderSaveButton:\", commandJson)\n      sign(commandJson)\n    }\n\n    else if (buttonName === \"showTransferOrderReport\") {\n      let reportName = selectedDoc.individual === true ? \"Peredatochnoe_Rasporyajenie_FL\" : \"Peredatochnoe_Rasporyajenie_YUL\"\n      let reportExecutions = {\n        \"reportUnitUri\": \"/reports/interactive/\" + reportName,\n        \"async\": true,\n        \"interactive\": true,\n        \"freshData\": false,\n        \"saveDataSnapshot\": false,\n        \"outputFormat\": \"pdf\", // html xlsx pdf docx\n        \"parameters\": {\n          \"reportParameter\": [{ name: \"id\", value: [selectedDoc.id.toString()] }]\n        }\n      }\n      let commandJson =\n      {\n        commandType: \"completeTask\",\n        session_id: session_id,\n        process_id: process_id,\n        taskID: taskID,\n        userId: userProfile.userId,\n        userRole: userProfile.userRole,\n        variables: {\n          userAction: { value: \"showTransferOrderReport\" },\n          reportName: { value: reportName },\n          reportVars: { value: \"?id=\" + selectedDoc.id },\n          reportExecutions: { value: JSON.stringify(reportExecutions) }\n        }\n      }\n      console.log(\"showTransferOrderReport:\", commandJson)\n      props.sendFieldValues(commandJson)\n      props.clearTabData(process_id)\n    }\n\n    else if (buttonName === \"updateDocList\") {\n      const commandJson =\n      {\n        commandType: \"completeTask\",\n        process_id: process_id,\n        session_id: session_id,\n        taskID: taskID,\n        variables: {\n          userAction: { value: \"updateDocList\" },\n        }\n      }\n      console.log(\"button updateDocList: \", commandJson)\n      props.sendFieldValues(commandJson)\n      props.clearTabData(process_id)\n    }\n    else if (buttonName === \"back\") {\n      let commandJson =\n      {\n        commandType: \"completeTask\",\n        session_id: session_id,\n        process_id: process_id,\n        taskID: taskID,\n        userId: userProfile.userId,\n        userRole: userProfile.userRole,\n        variables: {\n          userAction: { value: \"back\" },\n        }\n      }\n      console.log(\"button back:\", commandJson)\n      props.sendFieldValues(commandJson)\n      props.clearTabData(process_id)\n    }\n    else if (buttonName === \"cancel\") {\n      const commandJson =\n      {\n        commandType: \"completeTask\",\n        process_id: process_id,\n        session_id: session_id,\n        taskID: taskID,\n        userRole: userProfile.userRole,\n        variables: {\n          authorization: { value: \"token\" },\n          userAction: { value: \"cancel\" },\n        }\n      }\n      console.log(\"button cancel: \", commandJson)\n      props.sendFieldValues(commandJson)\n      props.clearTabData(process_id)\n    }\n    else {\n      console.log(\"UNKNOWN Button \", buttonName)\n    }\n  }\n  async function signBlobs(fullName, inn, expiredDate) {\n    let signedBlobs = []\n    for (let i = 0; i < Blobs.length; i++) {\n      if (Blobs[i].type === \"application/pdf\") {\n        for (let a = 0; a < attachedDocs.length; a++) {\n          if (Blobs[i].name === attachedDocs[a].name) {\n            let formData = new FormData()\n            formData.append(\"formFile\", attachedDocs[a], attachedDocs[a].name)\n\n            // let url = \"/back/api/Template/AddWatermark?text=ФИО: \" + fullName + \" ПИН: \" + inn + \" \" + expiredDate\n            let url = props.api + \"/Template/AddWatermark?text=ФИО: \" + fullName + \" ПИН: \" + inn + \" \" + expiredDate\n            var requestOptions = {\n              method: 'POST',\n              body: formData,\n              redirect: 'follow'\n            }\n            let signedBlob = await fetch(url, requestOptions)\n              .then(response => response.blob())\n              .then(bl => {\n                let pdf = new Blob([bl], { type: \"application/pdf\" })\n                async function blobToBase64(blob) {\n                  return new Promise((resolve, _) => {\n                    const reader = new FileReader()\n                    reader.onloadend = () => resolve(reader.result.split(\",\")[1])\n                    reader.readAsDataURL(blob)\n                  })\n                }\n                // let newBlob = {}\n                let newBlob = blobToBase64(pdf)\n                  .then(base64 => {\n                    return newBlob = { \"name\": Blobs[i].name, \"blob\": base64, \"size\": bl.size, type: Blobs[i].type }\n                  })\n                return newBlob\n              })\n              .catch(error => console.log('error', error))\n            signedBlobs.push(signedBlob)\n          }\n        }\n      }\n      else {\n        signedBlobs.push(Blobs[i])\n      }\n    }\n    for (let s = 0; s < savedDocs.length; s++) {\n      if (savedDocs[s].type === \"application/pdf\") {\n        // console.log(\"BLOB TO SIGN\", savedDocs[s])\n        let formData = new FormData()\n        formData.append(\"formFile\", savedDocs[s], savedDocs[s].name)\n\n        let url = props.api + \"/Template/AddWatermark?text=ФИО: \" + fullName + \" ПИН: \" + inn + \" \" + expiredDate\n        var requestOptions = {\n          method: 'POST',\n          body: formData,\n          redirect: 'follow'\n        }\n        let signedBlob = await fetch(url, requestOptions)\n          .then(response => response.blob())\n          .then(bl => {\n            // var url = window.URL.createObjectURL(bl)\n            // var a = document.createElement('a')\n            // a.href = url\n            // a.download = savedDocs[s].name\n            // document.body.appendChild(a) // we need to append the element to the dom -> otherwise it will not work in firefox\n            // a.click()\n            // a.remove()  //afterwards we remove the element again   \n\n            let pdf = new Blob([bl], { type: \"application/pdf\" })\n            async function blobToBase64(blob) {\n              return new Promise((resolve, _) => {\n                const reader = new FileReader()\n                reader.onloadend = () => resolve(reader.result.split(\",\")[1])\n                reader.readAsDataURL(blob)\n              })\n            }\n            let newBlob = blobToBase64(pdf)\n              .then(base64 => {\n                // console.log(\"BLOB SIGNED\", base64)\n                return newBlob = { \"name\": savedDocs[s].name, \"blob\": base64, \"size\": bl.size, type: savedDocs[s].type }\n              })\n            return newBlob\n          })\n          .catch(error => console.log('error', error))\n        signedBlobs.push(signedBlob)\n      }\n    }\n    //console.log(\"signedBlobs\", signedBlobs)\n    return signedBlobs\n  }\n\n  function onKeyPressModalEnterPin(event) {\n    let code = event.charCode\n    if (code === 13) {\n      buttonClick(\"SignTransferOrderSaveButton\", null)\n    }\n  }\n  // attached documents\n  function handleAttachFile(e) {\n    let selectedFiles = e.target.files\n    console.log(\"A DOCS\", selectedFiles)\n    if (selectedFiles && selectedFiles[0]) {\n      for (let i = 0; i < selectedFiles.length; i++) {\n        if (selectedFiles[i].type === \"application/pdf\" ||\n          selectedFiles[i].type === \"application/msword\" ||\n          selectedFiles[i].type === \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\" ||\n          selectedFiles[i].type === \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\") {\n          attachedDocs.push(selectedFiles[i])\n          setAttachedDocs(attachedDocs)\n          setUpdateState(getUUID())\n          // console.log(\"A DOCS\", attachedDocs)\n        }\n        else {\n          let reader = new FileReader()\n          reader.onload = async function (e) {\n            // push new images to list and show in UI\n            let image = { item: <img name={selectedFiles[i].name} height=\"150\" width=\"auto\" src={e.target.result} onClick={() => attachedImgClick(selectedFiles[i].name)} /> }\n            attachedImgs.push(image)\n            setAttachedImgs(attachedImgs)\n            setUpdateState(getUUID())\n            // console.log(\"IMGLIST\", attachedImgs)\n          }\n          reader.readAsDataURL(selectedFiles[i])\n          attachedImgsFiles.push(selectedFiles[i])\n          // pushAttachedImage(selectedFiles[i])\n          setAttachedImgsFiles(attachedImgsFiles)\n          // console.log(\"A IMGS\", attachedImgsFiles)\n        }\n        pushNewBlob(selectedFiles[i])\n      }\n    }\n  }\n  async function pushNewBlob(f) {\n    var blobToBase64 = function (f, cb) {\n      let reader = new FileReader()\n      reader.onload = function () {\n        // converts blob to base64\n        var dataUrl = reader.result\n        var base64 = dataUrl.split(\",\")[1]\n        cb(base64)\n      }\n      reader.readAsDataURL(f)\n    }\n    blobToBase64(f, async function (base64) {\n      // encode blobs to send to socket\n      let newBlob = { \"name\": f.name, \"blob\": base64, \"size\": f.size, type: f.type }\n      Blobs.push(newBlob)\n      setBlobs(Blobs)\n      console.log(\"BLOBS\", Blobs)\n    })\n  }\n  async function attachedImgClick(name) {\n    for (let l = 0; l < attachedImgs.length; l++) {\n      if (attachedImgs[l].item.props.name === name) {\n        console.log(\"IMG\", attachedImgs[l])\n        setSelectedImg({\n          name: attachedImgs[l].item.props.name,\n          height: \"700\",\n          width: \"auto\",\n          src: attachedImgs[l].item.props.src\n        })\n      }\n    }\n    handleOpenModal()\n    let newId = getUUID()\n    setUpdateState(newId)\n  }\n  function attachedDocsList() {\n    // console.log(\"A DOCS\", attachedDocs)\n    let selDocsList = []\n    for (let i = 0; i < attachedDocs.length; i++) {\n      selDocsList.push(\n        <Card style={{ margin: 3, backgroundColor: \"#E2E2E2\", paddingLeft: 20, minWidth: \"500px\" }}>\n          <table>\n            <tr>\n              <td style={{ color: \"#1B2CE8\", fontWeight: \"bold\", width: \"95%\" }}>\n                {attachedDocs[i].name + \" \"}{\"(\" + Math.round(attachedDocs[i].size / 1000) + \")\" + \"КБ\"}\n              </td>\n              <td>\n                <IconButton>\n                  <CloseIcon style={{ fontSize: \"medium\", color: \"black\" }} onClick={() => deleteAttachedDoc(attachedDocs[i].name)} />\n                </IconButton>\n              </td>\n            </tr>\n          </table>\n        </Card>)\n\n    }\n    return (selDocsList)\n  }\n  function attachedImgsList() {\n    var imgs = []\n    for (let l = 0; l < attachedImgs.length; l++) {\n      imgs.push(\n        <TableBody>\n          <TableRow>\n            <TableCell>\n              {attachedImgs[l].item}\n            </TableCell>\n          </TableRow>\n          {/* <TableRow>\n            <TableCell width=\"20%\">\n              {attachedImgs[l].item.props.name}\n            </TableCell>\n          </TableRow> */}\n          <TableRow>\n            <TableCell align=\"center\">\n              <IconButton onClick={() => deleteAttachedImage(attachedImgs[l].item.props.name)}>\n                <DeleteForeverIcon fontSize=\"Large\" style={{ color: \"black\", margin: 0 }} />\n              </IconButton>\n            </TableCell>\n          </TableRow>\n        </TableBody>\n      )\n    }\n    if (Object.keys(imgs).length !== 0) {\n      return (\n        <Grid container direction=\"row\" justify=\"center\" alignItems=\"flex-start\">\n          {imgs}\n        </Grid>\n      )\n    }\n  }\n  function deleteAttachedDoc(name) {\n    let newDocList = []\n    for (let i = 0; i < attachedDocs.length; i++) {\n      if (name !== attachedDocs[i].name) {\n        newDocList.push(attachedDocs[i])\n      }\n      else {\n        deleteBlob(attachedDocs[i].name)\n      }\n    }\n    // attachedDocs = newDocList\n    setAttachedDocs(newDocList)\n    // setUpdateState(getUUID())\n    // console.log(\"FILES\", newDocList)\n  }\n  function deleteAttachedImage(name) {\n    let newImgList = []\n    let newImgFilesList = []\n    for (let i = 0; i < attachedImgs.length; i++) {\n      if (name !== attachedImgs[i].item.props.name) {\n        newImgList.push(attachedImgs[i])\n        newImgFilesList.push(attachedImgsFiles[i])\n      }\n      else {\n        deleteBlob(attachedImgs[i].item.props.name)\n      }\n    }\n    // deleteBlob(name)\n    // attachedImgs = newImgList\n    setAttachedImgs(newImgList)\n    // attachedImgsFiles = newImgFilesList\n    setAttachedImgsFiles(newImgFilesList)\n    // setUpdateState(getUUID())\n    // console.log(\"IMGS\", newImgFilesList)\n  }\n  function deleteBlob(name) {\n\n    console.log(\"NAME\", name)\n    let newBlobs = []\n    for (let b = 0; b < Blobs.length; b++) {\n      if (Blobs[b].name !== undefined) {\n        if (name !== Blobs[b].name) {\n          newBlobs.push(Blobs[b])\n        }\n        else {\n          console.log(\"DEL\", Blobs[b].name)\n        }\n      }\n    }\n    console.log(\"BLOBS\", newBlobs)\n    // Blobs = newBlobs\n    setBlobs(newBlobs)\n    // setUpdateState(getUUID())\n  }\n  // Previosly saved documents\n  function convertBase64ToFile(dataurl, fileName) {\n    var arr = dataurl.split(','),\n      mime = arr[0].match(/:(.*?);/)[1],\n      bstr = atob(arr[1]),\n      n = bstr.length,\n      u8arr = new Uint8Array(n)\n\n    while (n--) {\n      u8arr[n] = bstr.charCodeAt(n)\n    }\n    let convFile = new File([u8arr], fileName, { type: mime })\n    handleAttachSavedFile(convFile)\n  }\n  function handleAttachSavedFile(file) {\n    if (file.type === \"application/pdf\" || file.type === \"application/msword\" ||\n      file.type === \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\" ||\n      file.type === \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\") {\n      savedDocs.push(file)\n      setSavedDocs(savedDocs)\n    }\n    else {\n      savedImagesFiles.push(file)\n      setSavedImagesFiles(savedImagesFiles)\n      pushSavedImage(file)\n    }\n  }\n  async function pushSavedImage(f) {\n    let reader = new FileReader()\n    reader.onload = async function (e) {\n      // push new images to list and show in UI\n      let image = { item: <img name={f.name} height=\"150\" width=\"auto\" src={e.target.result} onClick={() => savedImgClick(f.name)} /> }\n      savedImgs.push(image)\n      // console.log(\"IMGLIST\", savedImgs)\n      setSavedImgs(savedImgs)\n      setUpdateState(getUUID())\n    }\n    reader.readAsDataURL(f)\n  }\n  async function savedImgClick(name) {\n    for (let l = 0; l < savedImgs.length; l++) {\n      if (savedImgs[l].item.props.name === name) {\n        console.log(\"IMG\", savedImgs[l])\n        setSelectedImg({\n          name: savedImgs[l].item.props.name,\n          height: \"700\",\n          width: \"auto\",\n          src: savedImgs[l].item.props.src\n        })\n      }\n    }\n    handleOpenModal()\n    let newId = getUUID()\n    setUpdateState(newId)\n  }\n  function savedDocsList() {\n    // console.log(\"SAVEDOCS\", savedDocs)\n    let savedDocsList = []\n    for (let i = 0; i < savedDocs.length; i++) {\n      savedDocsList.push(\n        <Card style={{ margin: 3, backgroundColor: \"#E2E2E2\", paddingLeft: 20, minWidth: \"500px\" }}>\n          <table>\n            <tr>\n              <td style={{ color: \"#1B2CE8\", fontWeight: \"bold\", width: \"95%\" }}>\n                {savedDocs[i].name + \" \"}{\"(\" + Math.round(savedDocs[i].size / 1000) + \")\" + \"КБ\"}\n              </td>\n              <td>\n                <IconButton>\n                  <CloseIcon style={{ fontSize: \"medium\", color: \"black\" }} onClick={() => deleteSavedDoc(savedDocs[i].name)} />\n                </IconButton>\n              </td>\n              <td>\n                <IconButton\n                  component=\"a\"\n                  href={URL.createObjectURL(savedDocs[i])}\n                  download={savedDocs[i].name}\n                >\n                  <GetAppIcon style={{ fontSize: \"medium\", color: \"black\" }} />\n                </IconButton>\n              </td>\n            </tr>\n          </table>\n        </Card>)\n    }\n    return (savedDocsList)\n  }\n  function savedImgsList() {\n    // console.log(\"SAVEDIMGS\", savedImgs)\n    var imgs = []\n    for (let l = 0; l < savedImgs.length; l++) {\n      imgs.push(\n        <TableBody>\n          <TableRow>\n            <TableCell>\n              {savedImgs[l].item}\n            </TableCell>\n          </TableRow>\n          <TableRow>\n            <TableCell align=\"center\">\n              <IconButton onClick={() => deleteSavedImage(savedImgs[l].item.props.name)}>\n                <DeleteForeverIcon fontSize=\"Large\" style={{ color: \"black\", margin: 0 }} />\n              </IconButton>\n              {/* <IconButton \n                component=\"a\"\n                href={URL.createObjectURL(savedImgs[l].item.props.src)}\n                download\n              >\n                <GetAppIcon style={{fontSize: \"medium\", color: \"black\"}}/>\n              </IconButton> */}\n            </TableCell>\n          </TableRow>\n        </TableBody>\n      )\n    }\n    if (Object.keys(imgs).length !== 0) {\n      return (\n        <Grid container direction=\"row\" justify=\"center\" alignItems=\"flex-start\">\n          {imgs}\n        </Grid>\n      )\n    }\n  }\n  function deleteSavedDoc(name) {\n    swal({\n      text: \"Вы действительно хотите удалить этот файл?\",\n      icon: \"warning\",\n      buttons: { ok: \"Да\", cancel: \"Отмена\" },\n    })\n      .then((click) => {\n        if (click === \"ok\") {\n          let newDocList = []\n          for (let i = 0; i < savedDocs.length; i++) {\n            if (name !== savedDocs[i].name) {\n              newDocList.push(savedDocs[i])\n            }\n          }\n          setSavedDocs(newDocList)\n          let commandJson = {\n            commandType: \"deleteSavedDoc\",\n            userId: userProfile.userId,\n            directory: selectedDoc.files_directory,\n            fileName: name\n          }\n          props.sendFieldValues(commandJson)\n        }\n      })\n  }\n  function deleteSavedImage(name) {\n    swal({\n      text: \"Вы действительно хотите удалить этот файл?\",\n      icon: \"warning\",\n      buttons: { ok: \"Да\", cancel: \"Отмена\" },\n    })\n      .then((click) => {\n        if (click === \"ok\") {\n          let newImgList = []\n          for (let i = 0; i < savedImgs.length; i++) {\n            if (name !== savedImgs[i].item.props.name) {\n              newImgList.push(savedImgs[i])\n            }\n          }\n          setSavedImgs(newImgList)\n          // setUpdateState(getUUID())\n          let commandJson =\n          {\n            commandType: \"deleteSavedDoc\",\n            userId: userProfile.userId,\n            directory: selectedDoc.files_directory,\n            fileName: name\n          }\n          props.sendFieldValues(commandJson)\n        }\n      })\n  }\n  // Create grid form components\n  function getGridFormItems(dataItem, contentItem) {\n    let value = dataItem[contentItem.name]\n    let name = contentItem.name\n    let type = contentItem.type\n    if (type === \"Enum\") {\n      if (value === null || value === \"\" || value === undefined) {\n        return \"-\"\n      }\n      else {\n        for (let i = 0; i < gridFormEnumData.length; i++) {\n          if (gridFormEnumData[i] !== null) {\n            if (name === gridFormEnumData[i].name) {\n              for (let l = 0; l < gridFormEnumData[i].data.length; l++) {\n                if (gridFormEnumData[i].data[l].id === parseInt(value)) {\n                  return gridFormEnumData[i].data[l].label\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n    else if (type === \"Bool\") {\n      return (\n        <Checkbox\n          style={{ maxWidth: 20, height: 15, color: value === false ? \"red\" : \"green\" }}\n          checked={(value === false || value === null || value === undefined) ? false : true}\n        />\n      )\n    }\n    else if (type === \"DateTime\") {\n      if (value === null || value === \"\" || value === undefined) {\n        return \"-\"\n      }\n      else {\n        let Date = value.substring(0, 10)\n        let Time = value.substring(11, 16)\n        return Date + \" \" + Time\n      }\n    }\n    else if (type === \"Float\") {\n      if (value === null || value === \"\" || value === undefined) {\n        return \"-\"\n      }\n      else {\n        let newCur = props.currencyBeautifier(value)\n        return newCur\n      }\n    }\n    else if (type === \"Int\") {\n      if (value === null || value === \"\" || value === undefined) {\n        return \"-\"\n      }\n      else {\n        let newInt = props.intBeautifier(value)\n        return newInt\n      }\n    }\n    else {\n      if (value === null || value === \"\" || value === undefined) {\n        return \"-\"\n      }\n      else {\n        return (<td>{value}</td>)\n      }\n    }\n  }\n  function getEnumLabel(name, id) {\n    for (let i = 0; i < gridFormEnumData.length; i++) {\n      if (gridFormEnumData[i].name === name) {\n        for (let d = 0; d < gridFormEnumData[i].data.length; d++) {\n          if (gridFormEnumData[i].data[d].id === id) {\n            return gridFormEnumData[i].data[d].label\n          }\n        }\n      }\n    }\n  }\n  function dynamicSort(property, sortOrder, type) {\n    if (type === \"DateTime\" || type === \"Bool\") {\n      sortOrder = sortOrder * -1\n    }\n    console.log(\"SORT\", property, sortOrder, type)\n    if (type === \"DateTime\") {\n      return function (a, b) {\n        if (a[property] !== null && b[property] !== null) {\n          let dateA = new Date(a[property].substring(0, 19))\n          let timeInSecA = dateA.getTime() / 1000\n          // console.log(\"timeInSecA\", timeInSecA)\n          let dateB = new Date(b[property].substring(0, 19))\n          let timeInSecB = dateB.getTime() / 1000\n          // console.log(\"timeInSecB\", timeInSecB)\n          var result = (timeInSecA < timeInSecB) ? -1 : (timeInSecA > timeInSecB) ? 1 : 0\n          return result * sortOrder\n        }\n        else {\n          if (a[property] === null) {\n            return -1 * sortOrder\n          }\n          return 1 * sortOrder\n        }\n      }\n    }\n    else if (type === \"Int\" || type === \"Text\" || type === \"Float\" || type === \"Bool\") {\n      return function (a, b) {\n        var result = (a[property] < b[property]) ? -1 : (a[property] > b[property]) ? 1 : 0\n        return result * sortOrder\n      }\n    }\n    else if (type === \"Enum\") {\n      return function (a, b) {\n        if (a[property] === null) {\n          return 1 * sortOrder\n        }\n        else {\n          let labelA = getEnumLabel(property, a[property])\n          // console.log(\"A\", property, a[property], labelA)\n          let labelB = getEnumLabel(property, b[property])\n          // console.log(\"labelB\", labelB, property, b)\n          var result = (labelA < labelB) ? -1 : (labelA > labelB) ? 1 : 0\n          return result * sortOrder\n        }\n\n      }\n    }\n  }\n  function sortDataByColumn(name, type) {\n    let sortOrder = 1\n    if (sortedColumn === name) {\n      sortOrder = sortedColumnOrder * -1\n    }\n    setSortedColumnOrder(sortOrder)\n    setSortedColumn(name)\n    let sortedDocList = filteredDocList.sort(dynamicSort(name, sortOrder, type))\n    // let fetchFrom = (page*size-1)-size\n    // let fetchTo = page*size-1\n    setPage(1)\n    let fetchFrom = 0\n    let fetchTo = size - 1\n    setFilteredDocList(sortedDocList)\n    fetchBySize(fetchFrom, fetchTo, sortedDocList)\n  }\n  function checkToShowSection(section) {\n    let showSection = false\n    for (let i = 0; i < section.contents.length; i++) {\n      if (section.contents[i].show === true) {\n        showSection = true\n        break\n      }\n    }\n    return showSection\n  }\n  function checkSectionOnLastChild(i) {\n    let lastSection = true\n    if (i === gridForm.sections.length - 1) { // The last section\n      return true\n    }\n    else {\n      let nextS = i + 1\n      console.log(\"IT\", i, gridForm.sections[nextS])\n      for (let s = nextS; s < gridForm.sections.length; s++) {\n        for (let c = 0; c < gridForm.sections[s].contents.length; c++) { // Check next section\n          if (gridForm.sections[s].contents[c].show === true) {\n            lastSection = false\n            break\n          }\n        }\n      }\n    }\n    return lastSection\n  }\n  function getForm() {\n    return (\n      <Grid container direction=\"row\" justify=\"flex-start\" spacing={0}>\n        <Grid item xs={isSearchForm === true ? 12 : 9}>\n          <Paper>\n            <Table style={{ width: \"100%\", \"border-collapse\": \"collapse\" }}>\n              {isSearchForm === false &&\n                <TableRow style={{ maxHeight: 25 }}>\n                  <TableCell style={{ fontSize: 16, color: \"black\" }}>{Form.label}</TableCell>\n                </TableRow>\n              }\n              <Grid container direction=\"row\" justify=\"center\" alignItems=\"center\">\n                {Form.sections.map(section => {\n                  return sectionBuilder(section)\n                })}\n              </Grid>\n              {/* <Grid container  direction=\"row\" justify=\"flex-start\" alignItems=\"flex-start\">\n                  {buttons.map((button, index) => (\n                    <Button\n                      name={button.name}\n                      variant=\"outlined\"\n                      onClick = {() => buttonClick(button.name, null)}\n                      style={{\n                        margin: 3,\n                        color: button.fontColor,\n                        backgroundColor: button.backgroundColor,\n                        height: 32,\n                        fontSize: 12\n                      }}\n                    >{button.label}\n                    </Button>\n                  ))}\n              </Grid> */}\n            </Table>\n          </Paper>\n        </Grid>\n      </Grid>\n    )\n  }\n  // Create sections with labels and call bodyBuilder function\n  function sectionBuilder(section) {\n    return (\n      <Table size=\"small\">\n        <TableHead>\n          <TableRow style={{ height: 30 }}>\n            <TableCell\n              style={{\n                color: \"black\",\n                fontSize: 14,\n                backgroundColor: sectionColor,\n                width: \"100%\"\n              }}>\n              {section.label}\n            </TableCell>\n          </TableRow>\n        </TableHead>\n        {bodyBuilder(section)}\n      </Table>\n    )\n  }\n  // Create body of each section and call contentBuilder function\n  function bodyBuilder(section) {\n    return (\n      <Table size=\"small\">\n        <TableBody>\n          {section.contents.map(contentItem => (\n            contentItem.show === true &&\n            <TableRow style={{ height: 30 }}>\n              <TableCell\n                align=\"left\"\n                style={{ width: \"40%\" }}>\n                {contentItem.label}\n              </TableCell>\n              <TableCell\n                align=\"left\"\n                style={{ width: \"60%\", height: 30 }}\n              >{contentBuilder(contentItem)}\n              </TableCell>\n            </TableRow>\n          ))}\n        </TableBody>\n      </Table>\n    )\n  }\n  // Creating components by it's type\n  function contentBuilder(contentItem) {\n    if (contentItem.type === \"Text\") {\n      return (\n        <TextField\n          onKeyPress={onKeyPressText}\n          multiline={!isSearchForm}\n          onBlur={handleTextChange}\n          name={contentItem.name}\n          style={{ width: \"100%\" }}\n          disabled={(formType === \"view\" || contentItem.edit === false) ? true : false}\n          defaultValue={(fieldValue[contentItem.name]) ? fieldValue[contentItem.name] : \"\"}\n        />\n      )\n    }\n    else if (contentItem.type === \"Enum\") {\n      let selectedOption = {\n        \"value\": \"\",\n        \"label\": \"Пусто\",\n        \"name\": contentItem.name\n      }\n      if (fieldValue[contentItem.name] !== undefined) {\n        for (let i = 0; i < enumOptions[contentItem.name].length; i++) {\n          if (parseInt(fieldValue[contentItem.name]) === enumOptions[contentItem.name][i].value) {\n            selectedOption = enumOptions[contentItem.name][i]\n            break\n          }\n        }\n      }\n      if (selectedOptions.length !== 0) {\n        for (let i = 0; i < selectedOptions.length; i++) {\n          if (contentItem.name === selectedOptions[i].name) {\n            selectedOption = selectedOptions[i]\n          }\n        }\n      }\n      return (\n        <Select\n          name={contentItem.name}\n          value={selectedOption}\n          onChange={handleSelectChange}\n          options={enumOptions[contentItem.name]}\n          isDisabled={(formType === \"view\" || contentItem.edit === false) ? true : false}\n          menuPortalTarget={document.body}\n          styles={{ menuPortal: base => ({ ...base, zIndex: 9999 }) }}\n        />\n      )\n    }\n    else if (contentItem.type === \"Bool\") {\n      return (\n        <Checkbox\n          style={{ maxWidth: 20, height: 15, color: (formType === \"view\" || contentItem.edit === false) ? \"grey\" : \"green\" }}\n          name={contentItem.name}\n          onChange={handleCheckboxChange}\n          disabled={(formType === \"view\" || contentItem.edit === false) ? true : false}\n          checked={(fieldValue[contentItem.name] === false || fieldValue[contentItem.name] === null || fieldValue[contentItem.name] === undefined) ? false : true}\n        />\n      )\n    }\n    else if (contentItem.type === \"Int\") {\n      return (\n        <TextField\n          name={contentItem.name}\n          onKeyPress={onKeyPressInt}\n          disabled={(formType === \"view\" || contentItem.edit === false) ? true : false}\n          style={{ width: \"100%\" }}\n          // defaultValue={(fieldValue[contentItem.name] !== undefined) ? fieldValue[contentItem.name] : \"\"}\n          // value={(fieldValue[contentItem.name] !== undefined) ? fieldValue[contentItem.name] : \"\"}\n          // onBlur={handleIntChange}\n          value={(fieldValue[contentItem.name] !== undefined) ? fieldValue[contentItem.name] : \"\"}\n          onChange={handleIntChange}\n          InputProps={{ inputComponent: IntegerFormat }}\n        />\n      )\n    }\n    else if (contentItem.type === \"Float\") {\n      console.log(\"FLOAT VAL\", fieldValue[contentItem.name])\n      return (\n        <TextField\n          onKeyPress={onKeyPressFloat}\n          name={contentItem.name}\n          // defaultValue = {(fieldValue[contentItem.name]) ? fieldValue[contentItem.name]: \"\"}\n          // onBlur={handleFloatChange}\n          // value={fieldValue[contentItem.name]}\n          value={(fieldValue[contentItem.name] !== undefined) ? fieldValue[contentItem.name] : \"\"}\n          onChange={handleFloatChange}\n          style={{ width: \"100%\" }}\n          disabled={(formType === \"view\" || contentItem.edit === false) ? true : false}\n          InputProps={{ inputComponent: FloatFormat }}\n        />\n      )\n    }\n    else if (contentItem.type === \"DateTime\") {\n      return (\n        <TextField\n          onKeyPress={onKeyPressDateTime}\n          type=\"date\"\n          name={contentItem.name}\n          onBlur={handleDateTimeChange}\n          style={{ width: \"100%\" }}\n          defaultValue={(fieldValue[contentItem.name] !== undefined && fieldValue[contentItem.name] !== null) ? props.parseDate(fieldValue[contentItem.name]) : \"\"}\n          disabled={(formType === \"view\" || contentItem.edit === false) ? true : false}\n          InputLabelProps={{\n            shrink: true,\n          }}\n        />\n      )\n    }\n    else if (contentItem.type === \"FullDateTime\") {\n      return (\n        <TextField\n          name={contentItem.name}\n          onBlur={handleDateTimeChange}\n          style={{ width: \"100%\" }}\n          value={(fieldValue[contentItem.name] !== undefined && fieldValue[contentItem.name] !== null) ? props.parseFullDateTime(fieldValue[contentItem.name], \"T\") : \"\"}\n          disabled={(formType === \"view\" || contentItem.edit === false) ? true : false}\n          InputLabelProps={{\n            shrink: true\n          }}\n        />\n      )\n    }\n  }\n  // Key press handlers for some fields\n  function onKeyPressText(event) {\n    let code = event.charCode\n    if (code === 13) {\n      for (let i = 0; i < buttons.length; i++) {\n        if (buttons[i].name === \"findDocument\") {\n          // console.log(\"CODE\", code)\n          handleTextChange(event)\n          buttonClick(\"findDocument\", null)\n        }\n      }\n    }\n  }\n  function onKeyPressDateTime(event) {\n    let code = event.charCode\n    if (code === 13) {\n      for (let i = 0; i < buttons.length; i++) {\n        if (buttons[i].name === \"findDocument\") {\n          // console.log(\"CODE\", code)\n          handleDateTimeChange(event)\n          buttonClick(\"findDocument\", null)\n        }\n      }\n    }\n  }\n  function onKeyPressInt(event) {\n    let code = event.charCode\n    if (code === 13) {\n      for (let i = 0; i < buttons.length; i++) {\n        if (buttons[i].name === \"findDocument\") {\n          // console.log(\"CODE\", code)\n          let stringNum = event.target.value.toString().replace(/ /g, '')\n          let int = parseInt(stringNum)\n          fieldValue[event.target.name] = int\n          setFieldValue(fieldValue)\n          filterDocList(0, size - 1, initialDocList, fieldValue)\n        }\n      }\n    }\n  }\n  function onKeyPressFloat(event) {\n    let code = event.charCode\n    if (code === 13) {\n      for (let i = 0; i < buttons.length; i++) {\n        if (buttons[i].name === \"findDocument\") {\n          let stringNum = event.target.value.toString().replace(/ /g, '')\n          let float = parseFloat(stringNum)\n          fieldValue[event.target.name] = float\n          setFieldValue(fieldValue)\n          filterDocList(0, size - 1, initialDocList, fieldValue)\n        }\n      }\n    }\n  }\n  function calculateColSpan(contents) {\n    let num = 0\n    for (let i = 0; i < contents.length; i++) {\n      if (contents[i].show === true) {\n        num += 1\n      }\n    }\n    return num\n  }\n  const handleContextMenu = (event) => {\n    if (userProfile.userRole === \"1\") {\n      event.preventDefault()\n      setAnchorEl(event.currentTarget)\n    }\n  }\n  const handleCloseMenu = () => {\n    setAnchorEl(null)\n    // console.log(\"CLOSE\", fieldValue)\n    for (let s = 0; s < gridForm.sections.length; s++) {\n      for (let c = 0; c < gridForm.sections[s].contents.length; c++) {\n        gridForm.sections[s].contents[c].show = gridFieldValue[gridForm.sections[s].contents[c].name]\n      }\n    }\n    console.log(\"nForm\", gridForm)\n    setGridForm(gridForm)\n    setUpdateState(getUUID())\n  }\n  function createMenuItems() {\n    let columns = []\n    columns.push(\n      <tr>\n        <td\n          style={{ paddingLeft: 5, cursor: \"pointer\" }}\n          name={\"selectAll\"}\n          onClick={() => handleTableCheckboxChange(\"selectAll\")}\n        >\n          Выбрать все\n        </td>\n        <td>\n          <Checkbox\n            style={{ maxWidth: 20, height: 15, color: \"green\" }}\n            name={\"selectAll\"}\n            onChange={handleGridCheckboxChange}\n            checked={(gridFieldValue[\"selectAll\"] === false || gridFieldValue[\"selectAll\"] === null || gridFieldValue[\"selectAll\"] === undefined) ? false : true}\n          />\n        </td>\n      </tr>\n    )\n    for (let s = 0; s < gridForm.sections.length; s++) {\n      for (let c = 0; c < gridForm.sections[s].contents.length; c++) {\n        let name = gridForm.sections[s].contents[c].name\n        columns.push(\n          <tr>\n            <td\n              style={{ paddingLeft: 5, cursor: \"pointer\", background: gridFieldValue[name] === true ? \"#E2E2E2\" : \"white\" }}\n              name={name}\n              onClick={() => handleTableCheckboxChange(name)}\n            >\n              {gridForm.sections[s].contents[c].label}\n            </td>\n            <td>\n              <Checkbox\n                style={{ maxWidth: 20, height: 15, color: \"green\" }}\n                name={name}\n                onChange={handleGridCheckboxChange}\n                checked={(gridFieldValue[name] === false || gridFieldValue[name] === null || gridFieldValue[name] === undefined) ? false : true}\n              />\n            </td>\n          </tr>\n        )\n      }\n    }\n    return columns\n  }\n  function downloadExcel() {\n    tableToExcel.convert(document.getElementById(gridTableId))\n  }\n  const handleGridCheckboxChange = (event) => {\n    // console.log(\"CHBX\", event.target.name, event.target.checked)\n    if (event.target.name === \"selectAll\") {\n      let newFields = { [event.target.name]: event.target.checked }\n      for (let key in gridFieldValue) {\n        newFields[key] = !gridFieldValue[event.target.name]\n      }\n      // console.log(\"selectAll\", newFields)\n      setGridFieldValue(newFields)\n    }\n    else {\n      setGridFieldValue({ ...gridFieldValue, [event.target.name]: event.target.checked })\n    }\n  }\n  const handleTableCheckboxChange = (name) => {\n    // console.log(\"TD CHBX\", name)\n    if (name === \"selectAll\") {\n      let newFields = { ...gridFieldValue }\n      for (let key in newFields) {\n        newFields[key] = !gridFieldValue[name]\n      }\n      setGridFieldValue(newFields)\n    }\n    else {\n      setGridFieldValue({ ...gridFieldValue, [name]: !gridFieldValue[name] })\n    }\n  }\n  if (updateState !== null) {\n    try {\n      return (\n        <Grid>\n          {/* Create main search table */}\n          {isSearchForm !== null &&\n            isSearchForm === true\n            ?\n            <Grid container direction=\"row\" justify=\"flex-start\" spacing={1}>\n              <Grid item xs={9}>\n                <Accordion expanded={accordionExpanded} onChange={() => handleExpandAccordion()}>\n                  <AccordionSummary\n                    expandIcon={<ExpandMoreIcon />}\n                  >\n                    <Typography>{Form.label}</Typography>\n                  </AccordionSummary>\n                  <AccordionDetails>\n                    {getForm()}\n                  </AccordionDetails>\n                </Accordion>\n              </Grid>\n            </Grid>\n            :\n            getForm()\n          }\n          <Grid container direction=\"row\" justify=\"flex-start\" spacing={0}>\n            {buttons.map((button, index) => (\n              <Button\n                name={button.name}\n                variant=\"outlined\"\n                onClick={() => buttonClick(button.name, null)}\n                style={{\n                  margin: 3,\n                  color: button.fontColor,\n                  backgroundColor: button.backgroundColor,\n                  height: 32,\n                  fontSize: 12\n                }}\n              >{button.label}\n              </Button>\n            ))}\n          </Grid>\n          {isSearchForm === true &&\n            <ReplayIcon style={{ paddingTop: 3, cursor: \"pointer\" }} onClick={() => buttonClick(\"updateDocList\")} />\n          }\n          {showAttachedDocuments === true &&\n            <Paper>\n              <Grid item>\n                <Grid container direction=\"row\">\n                  <div className={classes.importFile}>\n                    <input\n                      accept=\"image/*, application/pdf, application/msword, application/vnd.openxmlformats-officedocument.wordprocessingml.document, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\"\n                      className={classes.inputFile}\n                      id={buttonFilesWordPdfImgId}\n                      multiple\n                      type=\"file\"\n                      onChange={handleAttachFile}\n                    />\n                    <label htmlFor={buttonFilesWordPdfImgId}>\n                      <Button\n                        component=\"span\"\n                        variant=\"outlined\"\n                        style={{\n                          margin: 3,\n                          color: \"white\",\n                          backgroundColor: \"#BB7100\",\n                          borderColor: \"#161C87\",\n                          height: 32,\n                          fontSize: 12\n                        }}\n                        endIcon={<AttachFileIcon />}\n                      >Прикрепить файлы\n                      </Button>\n                    </label>\n                  </div>\n                </Grid>\n              </Grid>\n              <Grid container spacing={2} justify=\"flex-start\" alignItems=\"flex-start\" className={classes.root}>\n                <Grid item xs={\"auto\"}>\n                  <Grid container direction=\"column\" spacing={1}>\n                    <div style={{ paddingLeft: 10 }}>Прикрепленные документы</div>\n                    {attachedDocsList()}\n                    {attachedImgsList()}\n                  </Grid>\n                </Grid>\n              </Grid>\n              {showSavedDocuments === true &&\n                <Grid container spacing={2} justify=\"flex-start\" alignItems=\"flex-start\" className={classes.root}>\n                  <Grid item xs={\"auto\"}>\n                    <Grid container direction=\"column\" spacing={1}>\n                      <div style={{ paddingLeft: 10 }}>Сохраненные документы</div>\n                      {savedDocsList()}\n                      {savedImgsList()}\n                    </Grid>\n                  </Grid>\n                </Grid>\n              }\n            </Paper>\n          }\n          {docList !== null &&\n            <Grid container direction=\"row\" justify=\"flex-start\" spacing={0}>\n              <Grid item sm={\"auto\"}>\n                <Paper>\n                  <div style={{ height: \"500px\", overflow: \"auto\" }}>\n                    <table\n                      size=\"small\"\n                      class=\"main-table-style\"\n                      id={gridTableId}\n                    >\n                      <thead class=\"thead-style\" style={{ position: \"sticky\", top: 0 }}>\n                        {/* 1st Row Sections Labels */}\n                        <tr>\n                          <td class=\"td-head-first-child\" onContextMenu={(ev) => handleContextMenu(ev)}></td>\n                          {gridForm.sections.map((section, index) => {\n                            let showSection = checkToShowSection(section)\n                            if (showSection === true) {\n                              let lastSection = checkSectionOnLastChild(index)\n                              return (\n                                <td\n                                  colSpan={calculateColSpan(section.contents)}\n                                  class={lastSection === true ? \"td-head-last-child\" : \"td-head-style\"}\n                                  onContextMenu={(ev) => handleContextMenu(ev)}\n                                >\n                                  {section.label}\n                                </td>\n                              )\n                            }\n                          })}\n                        </tr>\n                        {/* 2nd Row Sections Contents labels */}\n                        <tr>\n                          <td\n                            class=\"td-head-style-2row\"\n                            rowSpan=\"2\"\n                            style={{ \"minWidth\": \"65px\" }}\n                            onContextMenu={(ev) => handleContextMenu(ev)}\n                          >\n                            Действие\n                          </td>\n                          {gridForm.sections.map(section =>\n                            section.contents.map(contentItem => {\n                              if (contentItem.show === true) {\n                                return (\n                                  <td\n                                    class=\"td-head-style-2row\"\n                                    rowSpan=\"2\"\n                                    onClick={() => sortDataByColumn(contentItem.name, contentItem.type)}\n                                    onContextMenu={(ev) => handleContextMenu(ev)}\n                                  >\n                                    {contentItem.label}{sortedColumn === contentItem.name ? sortedColumnOrder === 1 ? <ArrowDropDownIcon style={{ marginBottom: -8 }} /> : <ArrowDropUpIcon style={{ marginBottom: -8 }} /> : \"\"}\n                                  </td>\n                                )\n                              }\n                            })\n                          )}\n                        </tr>\n                      </thead>\n                      <tbody>\n                        {Object.keys(docList).length !== 0 &&\n                          docList.map(dataItem => (\n                            <tr style={{ \"height\": 30 }}>\n                              <td style={{ \"maxWidth\": 34, \"border-bottom\": \"1px solid grey\" }}>\n                                {gridFormButtons !== \"null\" &&\n                                  gridFormButtons.map(button =>\n                                    <Button\n                                      key={button.name}\n                                      name={button.name}\n                                      variant=\"outlined\"\n                                      // id={dataItem.id}\n                                      value={button.name}\n                                      onClick={() => buttonClick(button.name, dataItem)}\n                                      style={{\n                                        margin: 1,\n                                        height: 24,\n                                        fontSize: 10,\n                                        maxWidth: 32,\n                                        backgroundColor: button.backgroundColor,\n                                        borderColor: \"darkgreen\",\n                                        color: \"darkgreen\"\n                                      }}\n                                    >{button.label}\n                                    </Button>\n                                  )}\n                              </td>\n                              {gridForm.sections.map(section => (\n                                section.contents.map(contentItem => {\n                                  if (contentItem.show === true) {\n                                    return (\n                                      <td align=\"left\" style={{ color: \"black\", fontSize: 12, \"text-align\": \"center\", \"border-bottom\": \"1px solid grey\" }}>\n                                        {getGridFormItems(dataItem, contentItem)}\n                                      </td>\n                                    )\n                                  }\n                                })\n                              ))}\n                            </tr>\n                          )\n                          )}\n                      </tbody>\n                    </table>\n                  </div>\n                  <tfoot>\n                    <tr>\n                      <td style={{ paddingLeft: \"3px\" }}>\n                        <Button\n                          variant=\"outlined\"\n                          style={{ background: \"#047535\", color: \"white\", height: 28 }}\n                          onClick={() => downloadExcel()}\n                        >В EXCEL\n                        </Button>\n                      </td>\n                      <td style={{ paddingLeft: \"20px\" }}>\n                        <div style={{ minWidth: 90, color: \"black\" }}>Кол-во записей</div>\n                      </td>\n                      <td style={{ paddingLeft: \"3px\" }}>\n                        <FormControl\n                          variant=\"outlined\"\n                          style={{ minWidth: 30 }}\n                        >\n                          <GridSelect\n                            onChange={handleChangeRowsPerPage}\n                            style={{ height: 25, color: \"black\" }}\n                            value={size}\n                          >\n                            <MenuItem value={10}>10</MenuItem>\n                            <MenuItem value={20}>20</MenuItem>\n                            <MenuItem value={50}>50</MenuItem>\n                            <MenuItem value={100}>100</MenuItem>\n                            <MenuItem value={200}>200</MenuItem>\n                            <MenuItem value={500}>500</MenuItem>\n                            <MenuItem value={1000}>1000</MenuItem>\n                          </GridSelect>\n                        </FormControl>\n                      </td>\n\n                      <td>\n                        <Tooltip title=\"На первую страницу\">\n                          <IconButton onClick={() => KeyboardArrowFirstClick()}>\n                            <FirstPageIcon style={{ fontSize: \"large\", color: \"black\" }} />\n                          </IconButton>\n                        </Tooltip>\n                      </td>\n                      <td>\n                        <Tooltip title=\"На предыдущюю страницу\">\n                          <IconButton onClick={() => KeyboardArrowLeftClick(page)}>\n                            <ArrowBackIosIcon style={{ fontSize: \"medium\", color: \"black\" }} />\n                          </IconButton>\n                        </Tooltip>\n                      </td>\n                      <td style={{ color: \"black\", fontSize: 16 }}>\n                        <input style={{ maxWidth: 25 }} value={page} onChange={handlePageChange}></input>\n                      </td>\n                      <td style={{ paddingLeft: \"3px\" }}>\n                        <Tooltip title=\"Перейти на указанную страницу\">\n                          <Button\n                            onClick={() => GoToPage()}\n                            variant=\"outlined\"\n                            style={{\n                              height: 22,\n                              backgroundColor: \"#D1D6D6\",\n                              fontSize: 12\n                            }}\n                          >перейти\n                          </Button>\n                        </Tooltip>\n                      </td>\n                      <td>\n                        <Tooltip title=\"На следующюю страницу\">\n                          <IconButton onClick={() => KeyboardArrowRightClick(page)}>\n                            <ArrowForwardIosIcon style={{ fontSize: \"medium\", color: \"black\" }} />\n                          </IconButton>\n                        </Tooltip>\n                      </td>\n                      <td>\n                        <Tooltip title=\"На последнюю страницу\">\n                          <IconButton onClick={() => KeyboardArrowLastClick()}>\n                            <LastPageIcon style={{ fontSize: \"large\", color: \"black\" }} />\n                          </IconButton>\n                        </Tooltip>\n                      </td>\n                      <td style={{ color: \"black\", fontSize: 16 }}>Стр. {page} из {getPageAmount()} Общее кол-во {filteredDocList.length}</td>\n                    </tr>\n\n                  </tfoot>\n                  <Menu\n                    anchorEl={anchorEl}\n                    open={openMenu}\n                    onClose={handleCloseMenu}\n                    MenuListProps={{\n                      'aria-labelledby': 'basic-button',\n                    }}\n                    style={{ paddingLeft: \"100px\" }}\n                  >\n                    <table>\n                      {createMenuItems()}\n                    </table>\n                  </Menu>\n                </Paper>\n              </Grid>\n            </Grid>\n          }\n          <Modal\n            style={{ paddingLeft: \"500px\", paddingTop: \"50px\", height: 700, width: 500 }}\n            open={openModal}\n            onClose={handleCloseModal}\n          >\n            <div className={classes.imagePaper}>\n              <img name={selectedImg.name} height={selectedImg.height} width=\"auto\" src={selectedImg.src} />\n            </div>\n          </Modal>\n          <Modal\n            open={showModalEnterPin}\n            onClose={handleCloseModalEnterPin}\n            aria-labelledby=\"simple-modal-title\"\n            aria-describedby=\"simple-modal-description\"\n          >\n            <div style={modalStyle} className={classes.modal}>\n              <h3 id=\"simple-modal-title\">Введите ПИН код Рутокена</h3>\n              <FormControl variant=\"outlined\" style={{ width: \"100%\" }} error={wrongPin}>\n                <InputLabel htmlFor=\"outlined-adornment-password\">PIN</InputLabel>\n                <OutlinedInput\n                  type={showPin ? 'text' : 'password'}\n                  defaultValue={rutokenPin}\n                  onChange={handlePinChange}\n                  onKeyPress={onKeyPressModalEnterPin}\n                  autoFocus\n                  endAdornment={\n                    <InputAdornment position=\"end\">\n                      <IconButton\n                        aria-label=\"toggle password visibility\"\n                        onClick={handleClickShowPin}\n                        edge=\"end\"\n                      >\n                        {showPin ? <Visibility /> : <VisibilityOff />}\n                      </IconButton>\n                    </InputAdornment>\n                  }\n                  labelWidth={25}\n                />\n              </FormControl>\n              {wrongPin === true && <p color=\"red\">Не верный PIN</p>}\n              <Button\n                variant=\"contained\"\n                onClick={() => buttonClick(\"SignTransferOrderSaveButton\")}\n                style={{\n                  margin: 3,\n                  height: 32,\n                  fontSize: 12,\n                  color: \"white\",\n                  backgroundColor: \"#2862F4\"\n                }}\n              >Ок\n              </Button>\n              <Button\n                variant=\"contained\"\n                onClick={handleCloseModalEnterPin}\n                style={{\n                  margin: 3,\n                  height: 32,\n                  fontSize: 12,\n                  color: \"white\",\n                  backgroundColor: \"#E73639\"\n                }}\n              >Отмена\n              </Button>\n            </div>\n          </Modal>\n          <Snackbar\n            open={showSnackBar}\n            onClose={() => handleCloseSnackBar()}\n            autoHideDuration={1200}\n            message={snackBarMessage}\n          />\n        </Grid>\n      )\n    }\n    catch (er) {\n      console.log(\"ERROR\", er)\n      return <LinearProgress />\n    }\n  }\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}
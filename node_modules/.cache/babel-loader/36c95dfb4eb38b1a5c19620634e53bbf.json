{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\SERGO\\\\Desktop\\\\depo\\\\src\\\\pages\\\\Home.js\";\nimport React, { useState, useEffect } from \"react\";\nimport clsx from \"clsx\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport Drawer from \"@material-ui/core/Drawer\";\nimport AppBar from \"@material-ui/core/AppBar\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport List from \"@material-ui/core/List\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Divider from \"@material-ui/core/Divider\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Grid from \"@material-ui/core/Grid\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport Collapse from \"@material-ui/core/Collapse\";\nimport Tabs from \"@material-ui/core/Tabs\";\nimport Tab from \"@material-ui/core/Tab\";\nimport ComponentManager from \"../components/ComponentManager/ComponentManager.jsx\";\nimport Box from \"@material-ui/core/Box\";\nimport Modal from '@material-ui/core/Modal';\nimport Button from '@material-ui/core/Button'; // PIN components\n\nimport FormControl from '@material-ui/core/FormControl';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport OutlinedInput from '@material-ui/core/OutlinedInput';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport Visibility from '@material-ui/icons/Visibility';\nimport VisibilityOff from '@material-ui/icons/VisibilityOff'; // Icons\n\nimport MenuIcon from \"@material-ui/icons/Menu\";\nimport ChevronLeftIcon from \"@material-ui/icons/ChevronLeft\";\nimport ExitToAppIcon from \"@material-ui/icons/ExitToAppOutlined\";\nimport ExpandLess from \"@material-ui/icons/ExpandLess\";\nimport ExpandMore from \"@material-ui/icons/ExpandMore\";\nimport AddCircleIcon from \"@material-ui/icons/AddCircleOutlineOutlined\";\nimport CloseIcon from \"@material-ui/icons/Close\";\nimport AccountCircleIcon from \"@material-ui/icons/AccountCircle\";\nimport Notification from \"@material-ui/icons/Notifications\";\nimport NotificationsActiveIcon from '@material-ui/icons/NotificationsActive';\nimport EmailIcon from '@material-ui/icons/Email';\nimport Badge from '@material-ui/core/Badge';\nimport ArrowUpwardRoundedIcon from '@mui/icons-material/ArrowUpwardRounded';\nimport ArrowDownwardIcon from '@mui/icons-material/ArrowDownward'; // Libs\n\nimport { useKeycloak } from \"../lib\";\nimport swal from \"sweetalert\"; // https://sweetalert.js.org/guides/\n\nimport { ToastContainer, toast } from 'react-toastify'; // https://fkhadra.github.io/react-toastify/introduction/\n\nimport 'react-toastify/dist/ReactToastify.css';\nimport * as rutoken from \"rutoken\";\nimport moment from \"moment\";\nvar plugin = null;\nvar rutokenHandle, certHandle, certData, cmsData;\n\nfunction TabPanel(props) {\n  const {\n    children,\n    currentTab,\n    selectedTab,\n    ...other\n  } = props;\n  return /*#__PURE__*/React.createElement(Typography, Object.assign({\n    component: \"div\",\n    role: \"tabpanel\",\n    hidden: currentTab !== selectedTab,\n    id: `scrollable-auto-tabpanel-${selectedTab}`,\n    \"aria-labelledby\": `scrollable-auto-tab-${selectedTab}`\n  }, other, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(Box, {\n    p: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }\n  }, children));\n}\n\nfunction a11yProps(id) {\n  return {\n    id: `scrollable-auto-tab-${id}`,\n    \"aria-controls\": `scrollable-auto-tabpanel-${id}`\n  };\n}\n\nvar HashMap = require(\"hashmap\");\n\nconst drawerWidth = 250;\nconst useStyles = makeStyles(theme => ({\n  root: {\n    display: \"flex\"\n  },\n  toolbar: {\n    paddingRight: 24,\n    // keep right padding when drawer closed\n    backgroundColor: \"#0F6038\" // height: \"200px\"\n\n  },\n  toolbarIcon: {\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"flex-end\",\n    padding: \"0 8px\",\n    ...theme.mixins.toolbar\n  },\n  appBar: {\n    zIndex: theme.zIndex.drawer + 1,\n    transition: theme.transitions.create([\"width\", \"margin\"], {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.leavingScreen\n    })\n  },\n  appBarShift: {\n    marginLeft: drawerWidth,\n    width: `calc(100% - ${drawerWidth}px)`,\n    transition: theme.transitions.create([\"width\", \"margin\"], {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.enteringScreen\n    })\n  },\n  menuButton: {\n    marginRight: 36\n  },\n  menuButtonHidden: {\n    display: \"none\"\n  },\n  title: {\n    flexGrow: 1\n  },\n  drawerPaper: {\n    // backgroundColor: \"#E6F3ED\",\n    position: \"fixed\",\n    whiteSpace: \"nowrap\",\n    width: drawerWidth,\n    transition: theme.transitions.create(\"width\", {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.enteringScreen\n    })\n  },\n  drawerPaperClose: {\n    overflowX: \"hidden\",\n    transition: theme.transitions.create(\"width\", {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.leavingScreen\n    }),\n    width: theme.spacing(7),\n    [theme.breakpoints.up(\"sm\")]: {\n      width: theme.spacing(9)\n    }\n  },\n  appBarSpacer: theme.mixins.toolbar,\n  content: {\n    flexGrow: 1,\n    height: \"86vh\",\n    marginTop: \"110px\",\n    // height: \"100vh\",\n    overflow: \"auto\" // paddingTop: \"190px\",\n    // border: \"1px solid red\"\n\n  },\n  paper: {\n    padding: theme.spacing(2),\n    display: \"flex\",\n    overflow: \"auto\",\n    flexDirection: \"column\"\n  },\n  modal: {\n    position: 'absolute',\n    width: 500,\n    backgroundColor: theme.palette.background.paper,\n    border: '1px solid #AFAFAF',\n    boxShadow: theme.shadows[5],\n    padding: theme.spacing(2, 4, 3)\n  },\n  hrefStyleTop: {\n    position: 'absolute',\n    backgroundColor: \"white\",\n    border: '1px solid grey',\n    height: \"35px\",\n    width: \"35px\"\n  },\n  hrefStyleBottom: {\n    position: 'absolute',\n    backgroundColor: \"white\",\n    border: '1px solid grey',\n    height: \"35px\",\n    width: \"35px\"\n  }\n}));\nconst useStylesnav = makeStyles(theme => ({\n  root: {\n    overflow: \"hidden\",\n    width: \"100%\",\n    maxWidth: 360,\n    backgroundColor: theme.palette.background.paper\n  },\n  listItemText: {\n    fontSize: 13,\n    paddingLeft: \"2px\" // \"display\": \"flex\", \n    // \"flex-wrap\": \"wrap\",\n\n  },\n  level1: {\n    paddingLeft: theme.spacing(0),\n    maxHeight: 20\n  },\n  level2: {\n    paddingLeft: theme.spacing(0),\n    maxHeight: 20\n  },\n  level3: {\n    paddingLeft: theme.spacing(1),\n    maxHeight: 20\n  },\n  tabs: {\n    flexGrow: 1,\n    width: \"100%\",\n    backgroundColor: theme.palette.background.paper\n  }\n}));\n\nfunction getModalStyle() {\n  const top = 35;\n  const left = 45;\n  return {\n    top: `${top}%`,\n    left: `${left}%`,\n    transform: `translate(-${top}%, -${left}%)`\n  };\n}\n\nfunction getHrefStyleTop() {\n  const bottom = 7;\n  const right = 2;\n  return {\n    bottom: `${bottom}%`,\n    right: `${right}%`,\n    transform: `translate(-${bottom}%, -${right}%)`\n  };\n}\n\nfunction getHrefStyleBottom() {\n  const bottom = 2;\n  const right = 2;\n  return {\n    bottom: `${bottom}%`,\n    right: `${right}%`,\n    transform: `translate(-${bottom}%, -${right}%)`\n  };\n}\n\nrutoken.ready // Проверка установки расширение 'Адаптера Рутокен Плагина' в Google Chrome\n.then(function () {\n  if (window.chrome || typeof InstallTrigger !== 'undefined') {\n    return rutoken.isExtensionInstalled();\n  } else {\n    return Promise.resolve(true);\n  }\n}) // Проверка установки Рутокен Плагина\n.then(function (result) {\n  if (result) {\n    return rutoken.isPluginInstalled();\n  } else {// alert(\"Не удаётся найти расширение 'Адаптер Рутокен Плагина'\");\n  }\n}) // Загрузка плагина\n.then(function (result) {\n  if (result) {\n    return rutoken.loadPlugin();\n  } else {// alert(\"Не удаётся найти Плагин\");\n  }\n}) //Можно начинать работать с плагином\n.then(function (result) {\n  if (!result) {\n    return; // alert(\"Не удаётся загрузить Плагин\")\n  } else {\n    plugin = result;\n    return Promise.resolve();\n  }\n});\nexport default (() => {\n  const {\n    keycloak\n  } = useKeycloak();\n  const [selectedTab, setSelectedTab] = useState(null);\n  const [tabs, setTabs] = useState([]); // const [endpoint] = useState(\"ws://192.168.2.208:3220\") // Local\n  // const [api] = useState(\"/api\") // Local api\n  // const [endpoint] = useState(\"wss://depo.cds.kg:3120\") //Rented Server UBUNTU\n  // const [api] = useState(\"/back/api\") //Server api\n  // separate endpoints  by build/production\n\n  const [endpoint] = process.env.NODE_ENV === \"development\" ? useState(\"ws://192.168.168.208:3220\") : useState(\"wss://depo.cds.kg:3120\");\n  const [api] = process.env.NODE_ENV === \"development\" ? useState(\"/api\") : useState(\"/back/api\"); // const [endpoint] = useState(\"wss://depo-test.cds.kg:3120\") //OLD Server\n\n  const [routes, setRoutes] = useState([]);\n  const [session_id, setSession_id] = useState(null);\n  const [webSocketMessage, setWebSocketMessage] = useState(null);\n  const [currTaskId, setCurrTaskId] = useState(null);\n  const [opennav, setOpennav] = useState(false);\n  const [openDrawer, setOpenDrawer] = useState(true);\n  const [tabCounter, setTabCounter] = useState(1);\n  const [menuItemStates, setMenuItemStates] = useState([]);\n  const [socket, setSocket] = useState(null);\n  const [tabData, setTabData] = useState(null); // User\n\n  const [userProfile, setUserProfile] = useState({});\n  const [userRoleLabel, setUserRoleLabel] = useState(\"\");\n  const [unreadInstructions, setUnreadInstructions] = useState(0);\n  const [urgentUnreadInstructions, setUrgentUnreadInstructions] = useState(false);\n  const [unreadDistributions, setUnreadDistributions] = useState(0);\n  const [operDayIsOpened, setOperDayIsOpened] = useState(null);\n  const [lastClosedDate, setLastClosedDate] = useState(moment(new Date()).format(\"DD.MM.YYYY\"));\n  const [restore, setRestore] = useState(false); // Rutoken\n\n  const [rutokenRequired, setRutokenRequired] = useState(true);\n  const [modalStyle] = useState(getModalStyle);\n  const [showModalEnterPin, setShowModalEnterPin] = useState(false);\n  const [rutokenPin, setRutokenPin] = useState(\"\");\n  const [showPin, setShowPin] = useState(false);\n  const [wrongPin, setWrongPin] = useState(false);\n  const [esUserFullName, setEsUserFullName] = useState(null);\n  const [esInn, setEsInn] = useState(null);\n  const [esExpiredDate, setEsExpiredDate] = useState(null);\n  const classes = useStyles();\n  const classesnav = useStylesnav();\n  const [hrefStyleTop] = useState(getHrefStyleTop);\n  const [hrefStyleBottom] = useState(getHrefStyleBottom);\n\n  const handleDrawerOpen = () => {\n    setOpenDrawer(true);\n  };\n\n  const handleDrawerClose = () => {\n    setOpenDrawer(false);\n  }; // console.log(\"INN\", esInn)\n\n\n  useEffect(() => {\n    console.log(\"ENV\", endpoint);\n\n    if (tabData === null) {\n      setTabData(new HashMap());\n    }\n\n    keycloak.loadUserProfile().success(function (profile) {\n      let curUserProfile = {\n        firstName: profile.firstName,\n        lastName: profile.lastName,\n        email: profile.email,\n        username: profile.username\n      };\n\n      try {\n        if (profile.attributes[\"rutokenRequired\"][0] === \"true\") {\n          setRutokenRequired(true);\n        } else {\n          setRutokenRequired(false);\n          setRestore(true);\n        }\n      } catch (er) {\n        setRutokenRequired(false);\n        setRestore(true);\n      }\n\n      for (let i in profile.attributes) {\n        let value = profile.attributes[i][0] === \"true\" ? true : profile.attributes[i][0] === \"false\" ? false : profile.attributes[i][0];\n        curUserProfile[i] = value;\n      }\n\n      if (curUserProfile.rutokenRequired === true) {\n        setShowModalEnterPin(true);\n      }\n\n      setUserProfile(curUserProfile);\n      console.log(\"PROFILE\", curUserProfile);\n    }).error(function () {\n      console.log(\"Failed to load user profile\");\n    });\n  }, []); // RuToken functions\n  // Sign with rutoken\n\n  function sign() {\n    var textToSign = \"data\";\n\n    if (plugin !== null) {\n      // Перебор подключенных Рутокенов\n      plugin.enumerateDevices().then(function (devices) {\n        if (devices.length > 0) {\n          return Promise.resolve(devices[0]);\n        } else {\n          swAllert(\"Рутокен не обнаружен\", \"warning\");\n        }\n      }) // Проверка залогиненности\n      .then(function (firstDevice) {\n        rutokenHandle = firstDevice;\n        return plugin.getDeviceInfo(rutokenHandle, plugin.TOKEN_INFO_IS_LOGGED_IN);\n      }) // Логин на первый токен в списке устройств PIN-кодом по умолчанию\n      .then(function (isLoggedIn) {\n        // console.log(\"PIN\", rutokenPin)\n        if (isLoggedIn) {\n          return Promise.resolve();\n        } else {\n          return plugin.login(rutokenHandle, rutokenPin);\n        }\n      }) // Перебор пользовательских сертификатов на токене\n      .then(function () {\n        return plugin.enumerateCertificates(rutokenHandle, plugin.CERT_CATEGORY_UNSPEC);\n      }).then(function (certs) {\n        if (certs.length > 0) {\n          certHandle = certs[0];\n          return plugin.parseCertificate(rutokenHandle, certs[0]);\n        } else {\n          alert(\"Сертификат на Рутокен не обнаружен\");\n        }\n      }) // Подписание данных из текстового поля на первом найденом сертификате\n      .then(function (certs) {\n        certData = certs;\n        console.log(\"RUTDATA\", certData); // var r = plugin.getCertificateInfo(0, certs).then(function (res){console.log(res)})\n        // console.log(\"res\", r)\n\n        if (certHandle.length > 0) {\n          var options = {};\n          let inn = \"\";\n          let fullName = \"\";\n\n          for (let i = 0; i < certData.subject.length; i++) {\n            if (certData.subject[i].rdn === \"serialNumber\") {\n              inn = certData.subject[i].value;\n            }\n\n            if (certData.subject[i].rdn === \"commonName\") {\n              fullName = certData.subject[i].value;\n            }\n          }\n\n          console.log(\"ESDATA\", inn, fullName);\n          setEsInn(inn);\n          setEsUserFullName(fullName);\n          setEsExpiredDate(certData.validNotAfter.substring(0, certData.validNotAfter.length - 1));\n          restoreUserTabs();\n          handleCloseModalEnterPin();\n          return plugin.sign(rutokenHandle, certHandle, textToSign, plugin.DATA_FORMAT_PLAIN, options);\n        } else {\n          alert(\"Сертификат на Рутокен не обнаружен\");\n        }\n      }) // Закрытие сессии\n      .then(function () {\n        plugin.logout(rutokenHandle);\n      }, handleError);\n    } else {\n      callErrorToast(\"Вставьте рутокен, либо установите расширение для вашего браузера\", \"warning\");\n    }\n  } // catch errors while signing docs\n\n\n  function handleError(reason) {\n    if (isNaN(reason.message)) {\n      console.log(reason);\n    } else {\n      var errorCodes = plugin.errorCodes;\n\n      switch (parseInt(reason.message)) {\n        case errorCodes.PIN_INCORRECT:\n          // alert(\"Неверный PIN\");\n          setWrongPin(true);\n          break;\n\n        default:\n          console.log(\"Неизвестная ошибка\");\n      }\n    }\n  }\n\n  const handleCloseModalEnterPin = () => {\n    setShowModalEnterPin(false);\n  };\n\n  function handlePinChange(event) {\n    console.log(\"PIN EV\", event.target.value);\n    setRutokenPin(event.target.value);\n    setWrongPin(false); // console.log(\"PIN\", event.target.value)\n  }\n\n  function handleClickShowPin() {\n    setShowPin(!showPin);\n  }\n\n  function onKeyPressModalEnterPin(event) {\n    console.log(\"KP EV\", event.target.value);\n    let code = event.charCode;\n\n    if (code === 13) {\n      buttonClick(\"SignButton\");\n    }\n  }\n\n  function swAllert(text, icon) {\n    return swal({\n      text: text,\n      icon: icon,\n      buttons: {\n        ok: \"Ок\"\n      }\n    });\n  } // function downloadReport(reportName, reportVars) {\n  //   socket.send(JSON.stringify({\n  //     commandType: \"downloadReport\",\n  //     userId: userProfile.userId,\n  //     session_id: session_id,\n  //     userRole: userProfile.userRole,\n  //     partner: userProfile.partner,\n  //     token: \"Bearer \" + keycloak.token,\n  //     reportName: reportName,\n  //     reportVars: reportVars\n  //   }))\n  // }\n  // Main socket connection and data receiving\n\n\n  if (socket === null && userProfile.userRole !== undefined) {\n    setSocket(new WebSocket(endpoint));\n    console.log(\"CONNECTING...\", endpoint);\n  }\n\n  if (socket !== null) {\n    socket.onmessage = async function (message) {\n      var incomingJson = JSON.parse(message.data); // console.log(\"Socket message\", incomingJson)\n      // console.log(\"TAB DATA\", tabData)\n\n      if (incomingJson.messageType === \"session_id\") {\n        console.log(\"CONNECTED TO: \", endpoint);\n        console.log(\"NEW SESSION: \", incomingJson.session_id);\n        setSession_id(incomingJson.session_id);\n        socket.send(JSON.stringify({\n          commandType: \"setUserData\",\n          userId: userProfile.userId,\n          session_id: incomingJson.session_id,\n          userRole: userProfile.userRole,\n          partner: userProfile.partner,\n          token: \"Bearer \" + keycloak.token\n        }));\n      } else if (incomingJson.messageType === \"userDataInserted\") {\n        console.log(\"userDataInserted\", incomingJson.session_id);\n        socket.send(JSON.stringify({\n          commandType: \"getMenu\",\n          userProfile: userProfile,\n          session_id: incomingJson.session_id,\n          token: \"Bearer \" + keycloak.token\n        }));\n        socket.send(JSON.stringify({\n          commandType: \"getUserRoleLabel\",\n          userProfile: userProfile,\n          session_id: incomingJson.session_id,\n          token: \"Bearer \" + keycloak.token\n        }));\n\n        if (restore === true) {\n          restoreUserTabs();\n        }\n      } else if (incomingJson.messageType === \"Menu\") {\n        let updatedMenuItemStates = menuItemStates.slice();\n\n        for (let i = 0; i < incomingJson.routes.length; i++) {\n          if (incomingJson.routes[i].level2 !== undefined) {\n            let newMenuItem = {\n              name: incomingJson.routes[i].name,\n              state: incomingJson.routes[i].state\n            };\n            updatedMenuItemStates.push(newMenuItem);\n\n            for (let l = 0; l < incomingJson.routes[i].level2.length; l++) {\n              if (incomingJson.routes[i].level2[l].level3 !== undefined) {\n                let newMenuItem2 = {\n                  name: incomingJson.routes[i].level2[l].name,\n                  state: incomingJson.routes[i].level2[l].state\n                };\n                updatedMenuItemStates.push(newMenuItem2);\n              }\n            }\n          }\n        }\n\n        setRoutes(incomingJson.routes);\n        setMenuItemStates(updatedMenuItemStates); // console.log(\"MENU States\", updatedMenuItemStates)\n      } else if (incomingJson.messageType === \"userTask\") {\n        // console.log(\"NEW TASK\", incomingJson)\n        let tabExist = false; // If tab not exist open it to copy workspace on different machines\n\n        for (let i = 0; i < tabs.length; i++) {\n          if (tabs[i].id === incomingJson.process_id) {\n            tabExist = true;\n            break;\n          }\n        }\n\n        if (tabExist === false) {\n          let updatedTabs = tabs.slice();\n          updatedTabs.push({\n            id: incomingJson.process_id,\n            name: incomingJson.process_id,\n            label: incomingJson.tabLabel + \" \" + tabCounter\n          });\n          setTabs(updatedTabs); // setSelectedTab(incomingJson.process_id)\n\n          setTabCounter(tabCounter + 1);\n        }\n\n        tabData.remove(incomingJson.process_id);\n        setCurrTaskId(incomingJson.taskID);\n        await tabData.set(incomingJson.process_id, incomingJson);\n        setWebSocketMessage(incomingJson);\n      } else if (incomingJson.messageType === \"restoreTab\") {\n        if (tabData.get(incomingJson.process_id) === undefined) {\n          await tabData.set(incomingJson.process_id, incomingJson); // console.log(\"NEW TASK\", incomingJson)\n\n          let updatedTabs = tabs.slice();\n          updatedTabs.push({\n            id: incomingJson.process_id,\n            name: incomingJson.process_id,\n            label: incomingJson.tabLabel + \" \" + tabCounter\n          });\n          setTabs(updatedTabs);\n          setSelectedTab(incomingJson.process_id);\n          setTabCounter(tabCounter + 1);\n          setCurrTaskId(incomingJson.taskID);\n          setWebSocketMessage(incomingJson);\n        }\n      } else if (incomingJson.messageType === \"error\") {\n        setWebSocketMessage(incomingJson); // console.log(\"webSocket ERROR\", incomingJson)\n\n        tabData.set(incomingJson.process_id, incomingJson);\n        setCurrTaskId(incomingJson.taskID);\n        handleCloseCurrentTab(incomingJson.process_id);\n      } else if (incomingJson.messageType === \"notifications\") {\n        let unreadInstructions = JSON.parse(incomingJson.unreadInstructions); // console.log(\"NOTIFICATIONS\", unreadInstructions)\n\n        setUrgentUnreadInstructions(unreadInstructions.urgent);\n        setUnreadInstructions(parseInt(unreadInstructions.count));\n      } else if (incomingJson.messageType === \"notification\") {\n        swal({\n          text: incomingJson.text,\n          icon: incomingJson.icon\n        });\n      } else if (incomingJson.messageType === \"distributions\") {\n        let unreadDistributions = JSON.parse(incomingJson.unreadDistributions);\n        console.log(\"unreadDistributions\", unreadDistributions);\n\n        if (unreadDistributions.length > 3) {\n          setUnreadDistributions(unreadDistributions.substring(0, 3) + \"+\");\n        } else {\n          setUnreadDistributions(unreadDistributions);\n        }\n      } else if (incomingJson.messageType === \"toast\") {\n        if (incomingJson.toastType === \"success\") {\n          callSuccessToast(incomingJson.toastText);\n        } else if (incomingJson.toastType === \"error\") {\n          console.log(\"ERR TOAST\", incomingJson.toastText);\n          callErrorToast(incomingJson.toastText);\n        }\n      } else if (incomingJson.messageType === \"operDayStatus\") {\n        let opDayStatus = JSON.parse(incomingJson.status);\n        console.log(\"OP DAY\", opDayStatus); // if (opDayStatus.isOpened === true) {\n\n        setOperDayIsOpened(opDayStatus.isOpened);\n        setLastClosedDate(moment(new Date(opDayStatus.lastClosedDate)).format(\"DD.MM.YYYY\")); // }\n        // else {\n        //   setOperDayIsOpened(false)\n        // }\n      } else if (incomingJson.messageType === \"userRoleLabel\") {\n        // console.log(\"ROLE\", incomingJson)\n        setUserRoleLabel(incomingJson.userRoleLabel);\n      } else if (incomingJson.messageType === \"closeTab\") {\n        // console.log(\"ROLE\", incomingJson)\n        closeTab(incomingJson.process_id);\n      } // else if (incomingJson.messageType === \"downloadReport\") {\n      //   console.log(\"B64\", incomingJson.base64)\n      //   var arr = incomingJson.base64.split(','),\n      //     mime = arr[0].match(/:(.*?);/)[1],\n      //     bstr = atob(arr[1]),\n      //     n = bstr.length,\n      //     u8arr = new Uint8Array(n)\n      //   while (n--) {\n      //     u8arr[n] = bstr.charCodeAt(n)\n      //   }\n      //   let convFile = new File([u8arr], \"fileName\", { type: mime })\n      //   var url = window.URL.createObjectURL(convFile)\n      //   var a = document.createElement('a')\n      //   a.href = url\n      //   a.download = `${\"incomingJson.blob.name\"}.pdf`\n      //   document.body.appendChild(a) // we need to append the element to the dom -> otherwise it will not work in firefox\n      //   a.click()\n      //   a.remove()\n      // }\n      else {\n        console.log(\"Socket Message\", incomingJson);\n      }\n    };\n\n    socket.onclose = function (er) {\n      console.log(\"CONNECTION CLOSED \", endpoint);\n      setSocket(null);\n    };\n  }\n\n  function callSuccessToast(text) {\n    toast(text, {\n      position: \"top-right\",\n      autoClose: 6000,\n      hideProgressBar: false,\n      closeOnClick: true,\n      pauseOnHover: true,\n      draggable: true,\n      progress: undefined\n    });\n  }\n\n  function callErrorToast(text) {\n    toast.error(text, {\n      position: \"top-right\",\n      autoClose: 7000,\n      hideProgressBar: false,\n      closeOnClick: true,\n      pauseOnHover: true,\n      draggable: true,\n      progress: undefined\n    });\n  }\n\n  function restoreUserTabs() {\n    console.log(\"RESTORE STARTED\");\n    setRestore(false);\n    socket.send(JSON.stringify({\n      commandType: \"restoreSession\",\n      userId: userProfile.userId,\n      session_id: session_id,\n      userRole: userProfile.userRole,\n      token: \"Bearer \" + keycloak.token\n    }));\n    socket.send(JSON.stringify({\n      commandType: \"getOperDayStatus\",\n      userId: userProfile.userId,\n      session_id: session_id,\n      token: \"Bearer \" + keycloak.token\n    }));\n    socket.send(JSON.stringify({\n      commandType: \"launchProcess\",\n      processKey: \"process_169eccff-4a0c-4b5f-8eda-150965351a91\",\n      session_id: session_id,\n      process_id: \"null\",\n      userId: userProfile.userId,\n      token: \"Bearer \" + keycloak.token,\n      variables: {\n        user_session_id: {\n          value: session_id\n        },\n        userAction: {\n          value: \"getNotificationsCount\"\n        }\n      }\n    }));\n    updateMailDistributions();\n  }\n\n  function updateMailDistributions() {\n    console.log(\"GET DISTRS\", userProfile.partner);\n\n    if (userProfile.partner) {\n      socket.send(JSON.stringify({\n        commandType: \"getUnreadDistributions\",\n        // processKey: \"process_673b1ef0-a228-476c-832a-682b14e5cc93\",\n        session_id: session_id,\n        process_id: \"null\",\n        userId: userProfile.userId,\n        partner: userProfile.partner,\n        token: \"Bearer \" + keycloak.token // variables: {\n        //   user_session_id: { value: session_id },\n        //   userAction: { value: \"getUnreadDistributions\" },\n        //   user_id_recipient: { value: userProfile.partner},\n        //   userId: { value: userProfile.userId },\n        // }\n\n      }));\n    } else {\n      console.log(\"User Partner not mentioned\");\n    }\n  }\n\n  function reduceMailDistributions() {\n    if (unreadDistributions > 0) {\n      setUnreadDistributions(unreadDistributions - 1);\n    }\n  } // Main button click handler\n\n\n  function buttonClick(buttonName) {\n    // console.log(\"Button\", buttonName)\n    if (buttonName === \"SignButton\") {\n      console.log(\"button Sign: \");\n\n      if (rutokenPin === \"\") {\n        setWrongPin(true);\n      } else {\n        sign();\n      }\n    } else {\n      console.log(\"button: \", buttonName);\n    }\n  }\n\n  function sendFieldValues(commandJson) {\n    if (socket.readyState === socket.OPEN) {\n      commandJson[\"token\"] = \"Bearer \" + keycloak.token;\n      commandJson[\"session_id\"] = session_id;\n      console.log(\"CUR SESSION: \", session_id);\n\n      if (commandJson.commandType !== \"deleteSavedDoc\") {\n        clearTabData(commandJson.process_id);\n      }\n\n      if (commandJson.variables !== undefined) {\n        if (commandJson.variables[\"userAction\"][\"value\"] === \"cancel\") {\n          closeTab(selectedTab);\n          socket.send(JSON.stringify(commandJson));\n        } else {\n          commandJson.variables[\"authorization\"] = {\n            value: \"Bearer \" + keycloak.token\n          };\n          socket.send(JSON.stringify(commandJson));\n          console.log(\"HOME SEND\", commandJson.session_id);\n        }\n      } else {\n        socket.send(JSON.stringify(commandJson)); // console.log(\"HOME SEND\", commandJson)\n      }\n    } else {\n      setSession_id(null);\n      setSocket(null);\n      clearTabData(commandJson.process_id);\n    }\n\n    setCurrTaskId(getUUID());\n  }\n\n  function handleCloseCurrentTab(tabId) {\n    var selectedTabData = tabData.get(tabId);\n\n    if (selectedTabData !== undefined) {\n      var commandJson = {\n        commandType: \"completeTask\",\n        session_id: selectedTabData.session_id,\n        process_id: selectedTabData.process_id,\n        taskID: selectedTabData.taskID,\n        token: \"Bearer \" + keycloak.token,\n        variables: {\n          userAction: {\n            value: \"cancel\"\n          },\n          userId: {\n            value: userProfile.userId\n          },\n          userRole: {\n            value: userProfile.userRole\n          }\n        }\n      };\n      sendFieldValues(commandJson);\n      closeTab(tabId);\n      var commandJson = {\n        commandType: \"closeTab\",\n        process_id: selectedTabData.process_id,\n        token: \"Bearer \" + keycloak.token,\n        userId: userProfile.userId\n      };\n      sendFieldValues(commandJson); // if (userProfile.userRole === \"1\") {\n      //   sendFieldValues(commandJson)\n      //   closeTab(tabId)\n      // }\n      // else {\n      //   if (selectedTabData.taskType === \"showSearchUser\" ||\n      //     selectedTabData.taskType === \"showAccountsSearchForm\" ||\n      //     selectedTabData.taskType === \"showSecuritiesSearchForm\" ||\n      //     selectedTabData.taskType === \"showIssuersSearchForm\" ||\n      //     selectedTabData.taskType === \"showDepositorsSearchForm\" ||\n      //     selectedTabData.taskType === \"showDepositoriesSearchForm\" ||\n      //     selectedTabData.taskType === \"showIssuersSearchForm\" ||\n      //     selectedTabData.taskType === \"showPartnersSearchForm\" ||\n      //     selectedTabData.taskType === \"showTransactionsSearchForm\" ||\n      //     selectedTabData.taskType === \"showReferenceListSearchForm\" ||\n      //     selectedTabData.taskType === \"showInstructionsSearchForm\" ||\n      //     selectedTabData.taskType === \"showInstructionsRegistrarsSearchForm\" ||\n      //     selectedTabData.taskType === \"showChargeForCDServicesSearchForm\" ||\n      //     selectedTabData.taskType === \"showTransitChargeForCDServicesSearchForm\" ||\n      //     selectedTabData.taskType === \"showPaymentsForCDServicesSearchForm\" ||\n      //     selectedTabData.taskType === \"showTransitPaymentsForCDServicesSearchForm\" ||\n      //     selectedTabData.taskType === \"showAccountingReportsSelectingForm\" ||\n      //     selectedTabData.taskType === \"showCurrencyRatesSearchForm\" ||\n      //     selectedTabData.taskType === \"showServiceTypesSearchForm\" ||\n      //     selectedTabData.taskType === \"showServiceGroupsSearchForm\" ||\n      //     selectedTabData.taskType === \"showImportFileGIKForm\" ||\n      //     selectedTabData.taskType === \"showQuestinariesGIKSearchForm\" ||\n      //     selectedTabData.taskType === \"showAccountsGIKSearchForm\" ||\n      //     selectedTabData.taskType === \"showReportsSelectingForm\" ||\n      //     selectedTabData.taskType === \"showTariffsRegistrarsSearchForm\" ||\n      //     selectedTabData.taskType === \"showTradesSearchForm\" ||\n      //     selectedTabData.taskType === \"showContractsSearchForm\" ||\n      //     selectedTabData.taskType === \"CorporativeActionsForm\" ||\n      //     selectedTabData.taskType === \"showStockSecuritySearchForm\" ||\n      //     selectedTabData.taskType === \"showStockCurrencySearchForm\" ||\n      //     selectedTabData.taskType === \"showUploadDataToTSForm\" ||\n      //     selectedTabData.taskType === \"showLoadDataFromTSForm\" ||\n      //     selectedTabData.taskType === \"showFormsEditForm\" ||\n      //     selectedTabData.taskType === \"showTariffsCDSearchForm\" ||\n      //     selectedTabData.taskType === \"showFormsSearchForm\" ||\n      //     selectedTabData.taskType === \"showAccountingEntrySearchForm\" ||\n      //     selectedTabData.taskType === \"showSecuritiesOrdersHistorySearchForm\" ||\n      //     selectedTabData.taskType === \"showCurrenciesOrdersHistorySearchForm\" ||\n      //     selectedTabData.taskType === \"showSecuritiesTradesHistorySearchForm\" ||\n      //     selectedTabData.taskType === \"showCurrenciesTradesHistorySearchForm\" ||\n      //     selectedTabData.taskType === \"showLoadDataFromTSSecuritiesForm\" ||\n      //     selectedTabData.taskType === \"showUploadDataToTSSecuritiesForm\" ||\n      //     selectedTabData.taskType === \"showLoadDataFromTSCurrenciesForm\" ||\n      //     selectedTabData.taskType === \"showUploadDataToTSCurrenciesForm\" ||\n      //     selectedTabData.taskType === \"showOperationDayForm\" ||\n      //     selectedTabData.taskType === \"showRegistrarsSearchForm\" ||\n      //     selectedTabData.taskType === \"showTariffsCorrDepositorySearchForm\" ||\n      //     selectedTabData.taskType === \"showCoefficientDepositorsSearchForm\" ||\n      //     selectedTabData.taskType === \"showInstructionsTypeSelectingForm\" ||\n      //     selectedTabData.taskType === \"showReportsCreatingForm\" ||\n      //     selectedTabData.taskType === \"showTransferOrdersSearchForm\" ||\n      //     selectedTabData.taskType === \"corporativeActionsMainForm\" ||\n      //     selectedTabData.taskType === \"showCorrDepositoriesSearchForm\" ||\n      //     selectedTabData.taskType === \"showNewSecurityApplicationsSearchForm\" ||\n      //     selectedTabData.taskType === \"showMortgageSecuritiesSearchForm\" ||\n      //     selectedTabData.taskType === \"showExchangeTSFilesSearchForm\" ||\n      //     selectedTabData.taskType === \"showExchangeTSFilesListForm\" ||\n      //     selectedTabData.taskType === \"error\") {\n      //     sendFieldValues(commandJson)\n      //     closeTab(tabId)\n      //   }\n      //   else handleOpenSwal(\"Вы действительно хотите закрыть вкладку?\", { yes: \"Да\", no: \"Нет\" }, tabId)\n      // }\n    }\n  } // Custom allert component\n\n\n  function handleOpenSwal(text, swalButtons, tabId) {\n    return swal({\n      text: text,\n      icon: \"warning\",\n      buttons: swalButtons\n    }).then(click => {\n      if (click === \"yes\") {\n        handleCloseCurrentTabModal(tabId);\n      }\n    });\n  } // Close current tab from opened alert component\n\n\n  function handleCloseCurrentTabModal(tabId) {\n    var selectedTabData = tabData.get(tabId);\n    var commandJson = {\n      commandType: \"completeTask\",\n      session_id: selectedTabData.session_id,\n      process_id: selectedTabData.process_id,\n      taskID: selectedTabData.taskID,\n      userId: userProfile.userId,\n      token: \"Bearer \" + keycloak.token,\n      variables: {\n        userAction: {\n          value: \"cancel\"\n        },\n        userId: {\n          value: userProfile.userId\n        },\n        userRole: {\n          value: userProfile.userRole\n        }\n      }\n    };\n    sendFieldValues(commandJson);\n    closeTab(tabId);\n  } // wrap up menu items\n\n\n  function handleOpenMenuClick(name) {\n    // console.log(\"Event\", name)\n    for (var i = 0; i < menuItemStates.length; i++) {\n      if (menuItemStates[i].name === name) {\n        if (menuItemStates[i].state === true) {\n          menuItemStates[i].state = false;\n        } else {\n          menuItemStates[i].state = true;\n        }\n      }\n    }\n\n    setOpennav(!opennav);\n  } // launch process related to menu button\n\n\n  function handleMenuButtonClick(button) {\n    // console.log(\"Menu button clicked\", button)\n    if (button.name !== \"insertForm\" && button.name !== \"redeploy\") {\n      var process_id = getUUID();\n      let updatedTabs = tabs.slice();\n      updatedTabs.push({\n        id: process_id,\n        name: process_id,\n        label: button.parentLabel + \" \" + tabCounter\n      });\n      setTabs(updatedTabs);\n      setSelectedTab(process_id);\n      setTabCounter(tabCounter + 1);\n    }\n\n    const commandJson = {\n      commandType: button.commandType,\n      processKey: button.processKey,\n      process_id: process_id,\n      session_id: session_id,\n      userId: userProfile.userId,\n      token: \"Bearer \" + keycloak.token,\n      variables: {\n        user_session_id: {\n          value: session_id\n        },\n        process_id: {\n          value: process_id\n        },\n        userAction: {\n          value: \"filter\"\n        },\n        userId: {\n          value: userProfile.userId\n        },\n        userRole: {\n          value: userProfile.userRole\n        },\n        tabLabel: {\n          value: button.parentLabel\n        },\n        authorization: {\n          value: \"Bearer \" + keycloak.token\n        }\n      }\n    };\n    sendFieldValues(commandJson);\n    console.log(\"Menu Button \", commandJson.variables);\n  }\n\n  function getUUID() {\n    const uuidv1 = require(\"uuid/v1\");\n\n    return uuidv1();\n  }\n\n  async function handleTabChange(tabId) {\n    setSelectedTab(tabId);\n    console.log(\"TAB CHANGE\", tabId);\n  }\n\n  function clearTabData(process_id) {\n    tabData.remove(process_id);\n    setCurrTaskId(getUUID()); // console.log(\"Clearing TabData\", tabData, \"ID\", process_id)\n  } // close selected tab clear it\"s data from cache & change tab counter\n\n\n  function closeTab(process_id) {\n    if (process_id !== undefined) {\n      // console.log(\"Closing TAB\", process_id)\n      let copyTabs = [...tabs];\n      let newTabs = [];\n\n      for (var i = 0; i < copyTabs.length; i++) {\n        if (copyTabs[i].id !== process_id) {\n          newTabs.push(copyTabs[i]);\n        } else {\n          // console.log(\"TAB TO CLOSE\", copyTabs[i].id, i)\n          if (i > 0 && newTabs.length > 0) {\n            setSelectedTab(newTabs[i - 1].id);\n          } else {\n            if (copyTabs.length > 1) {\n              setSelectedTab(copyTabs[1].id);\n            } else {\n              setSelectedTab(null);\n            }\n          }\n        }\n      } // console.log(\"TABS\", newTabs, newTabs.length)\n\n\n      if (newTabs.length === 0) {\n        setTabCounter(1);\n      }\n\n      setTabs(newTabs);\n    } // // console.log(\"Closing TAB\", process_id)\n    // let updatedTabs = tabs.slice()\n    // for (i = 0; i < updatedTabs.length; i++) {\n    //   if (updatedTabs[i].id === process_id) {\n    //     // console.log(\"INDEX\", i)\n    //     updatedTabs.splice(i, 1)\n    //   }\n    // }\n    // if (Object.keys(updatedTabs).length === 0) {\n    //   setSelectedTab(null)\n    //   setTabCounter(1)\n    // }\n    // else {\n    //   setSelectedTab(updatedTabs[0].id)\n    //   setTabs(updatedTabs)\n    // }\n\n  } // Creating Menu Levels 1-3\n\n\n  function getLevel1Items(level1, index) {\n    // console.log(\"Creating Menu menuItemStates\", menuItemStates)\n    if (level1.level2 === undefined) {\n      return /*#__PURE__*/React.createElement(ListItem, {\n        button: true,\n        className: classesnav.level1,\n        onClick: () => handleMenuButtonClick(level1),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1062,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(ExitToAppIcon, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1066,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: classesnav.listItemText,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1067,\n          columnNumber: 11\n        }\n      }, openDrawer === true ? level1.label : \"\"));\n    } else {\n      for (var i = 0; i < menuItemStates.length; i++) {\n        if (menuItemStates[i].name === level1.name) {\n          return /*#__PURE__*/React.createElement(List, {\n            key: index,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 1075,\n              columnNumber: 13\n            }\n          }, /*#__PURE__*/React.createElement(ListItem, {\n            button: true,\n            className: classesnav.level1,\n            onClick: () => handleOpenMenuClick(level1.name),\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 1076,\n              columnNumber: 15\n            }\n          }, /*#__PURE__*/React.createElement(AddCircleIcon, {\n            style: {\n              height: 20\n            },\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 1081,\n              columnNumber: 17\n            }\n          }), /*#__PURE__*/React.createElement(\"div\", {\n            className: classesnav.listItemText,\n            style: {\n              \"fontWeight\": \"bold\"\n            },\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 1082,\n              columnNumber: 17\n            }\n          }, openDrawer === true ? level1.label : \"\"), menuItemStates[i].state === true ? /*#__PURE__*/React.createElement(ExpandLess, {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 1083,\n              columnNumber: 55\n            }\n          }) : /*#__PURE__*/React.createElement(ExpandMore, {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 1083,\n              columnNumber: 72\n            }\n          })), /*#__PURE__*/React.createElement(Collapse, {\n            in: menuItemStates[i].state,\n            timeout: \"auto\",\n            unmountOnExit: true,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 1085,\n              columnNumber: 15\n            }\n          }, level1.level2.map((level2Item, index) => getLevel2Items(level2Item, index))));\n        }\n      }\n    }\n  }\n\n  function getLevel2Items(level2, index) {\n    // console.log(\"Level2\", level2)\n    if (level2.level3 === undefined) {\n      return /*#__PURE__*/React.createElement(ListItem, {\n        button: true,\n        className: classesnav.level2,\n        key: index,\n        onClick: () => handleMenuButtonClick(level2),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1100,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(ExitToAppIcon, {\n        style: {\n          height: 20\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1105,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: classesnav.listItemText,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1106,\n          columnNumber: 11\n        }\n      }, openDrawer === true ? level2.label : \"\"));\n    } else {\n      for (var i = 0; i < menuItemStates.length; i++) {\n        if (menuItemStates[i].name === level2.name) {\n          return /*#__PURE__*/React.createElement(List, {\n            component: \"div\",\n            disablePadding: true,\n            key: index,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 1114,\n              columnNumber: 13\n            }\n          }, /*#__PURE__*/React.createElement(ListItem, {\n            button: true,\n            className: classesnav.level2,\n            key: index,\n            onClick: () => handleOpenMenuClick(level2.name),\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 1115,\n              columnNumber: 15\n            }\n          }, /*#__PURE__*/React.createElement(AddCircleIcon, {\n            style: {\n              height: 20\n            },\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 1120,\n              columnNumber: 17\n            }\n          }), /*#__PURE__*/React.createElement(\"div\", {\n            className: classesnav.listItemText,\n            style: {\n              \"fontWeight\": \"bold\"\n            },\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 1121,\n              columnNumber: 17\n            }\n          }, openDrawer === true ? level2.label : \"\"), menuItemStates[i].state === true ? /*#__PURE__*/React.createElement(ExpandLess, {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 1122,\n              columnNumber: 55\n            }\n          }) : /*#__PURE__*/React.createElement(ExpandMore, {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 1122,\n              columnNumber: 72\n            }\n          })), /*#__PURE__*/React.createElement(Collapse, {\n            in: menuItemStates[i].state,\n            timeout: \"auto\",\n            unmountOnExit: true,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 1124,\n              columnNumber: 15\n            }\n          }, level2.level3.map((level3Item, index) => getLevel3Items(level3Item, index))));\n        }\n      }\n    }\n  }\n\n  function getLevel3Items(level3, index) {\n    return /*#__PURE__*/React.createElement(ListItem, {\n      button: true,\n      className: classesnav.level3,\n      key: index,\n      onClick: () => handleMenuButtonClick(level3),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1137,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(ExitToAppIcon, {\n      style: {\n        height: 20,\n        color: \"grey\",\n        marginLeft: \"4px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1142,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: classesnav.listItemText,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1143,\n        columnNumber: 9\n      }\n    }, openDrawer === true ? level3.label : \"\"));\n  }\n\n  if (menuItemStates.length === 0) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      align: \"center\",\n      style: {\n        paddingTop: 20\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1149,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(CircularProgress, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1150,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1151,\n        columnNumber: 9\n      }\n    }, \"Loading...\"));\n  }\n\n  function handleOperDayClick() {\n    if (userProfile.userRole === \"1\" || userProfile.userRole === \"7\") {\n      handleMenuButtonClick({\n        commandType: \"launchProcess\",\n        processKey: \"process_e79e1386-4473-4d35-8106-acd3fafaa129\",\n        parentLabel: \"Операц-й день\"\n      });\n    }\n  }\n\n  function currencyBeautifier(currency) {\n    // return currency\n    // console.log(\"CUR\", currency)\n    try {\n      let cur = parseFloat(currency).toString();\n      let parts;\n\n      try {\n        parts = cur.split(\".\");\n      } catch (er) {\n        // console.log(\"ERR Parsing Float\", er)\n        parts = [cur, \"0\"];\n      } // console.log(\"PARTS\", parts)\n\n\n      let numberPart = parts[0];\n      let thousands = /\\B(?=(\\d{3})+(?!\\d))/g;\n      let decimalPart = parts[1];\n      let newCur = numberPart.replace(thousands, \" \");\n      let spDecPart;\n      let newDecPart = \"\";\n\n      try {\n        spDecPart = decimalPart.split('');\n        let numberStarted = false;\n\n        for (let i = spDecPart.length - 1; i > -1; i--) {\n          if (spDecPart[i] === \"0\") {\n            if (numberStarted === true) {\n              newDecPart = spDecPart[i] + newDecPart;\n            }\n          } else {\n            numberStarted = true;\n            newDecPart = spDecPart[i] + newDecPart;\n          }\n        }\n      } catch (er) {// console.log(\"ERR parsing Dec part\", er)\n      }\n\n      newCur = newCur + (newDecPart ? \".\" + newDecPart : \"\");\n      return newCur;\n    } catch (er) {\n      console.log(\"ERR Parsing Float\", er);\n      return currency;\n    }\n  }\n\n  function intBeautifier(int) {\n    try {\n      let strInt = int.toString();\n      const thousands = /\\B(?=(\\d{3})+(?!\\d))/g;\n      let newInt = strInt.replace(thousands, \" \");\n      return newInt;\n    } catch (er) {\n      return int;\n    }\n  }\n\n  return /*#__PURE__*/React.createElement(Grid, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1219,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.root,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1220,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(CssBaseline, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1221,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(AppBar, {\n    style: {\n      position: \"fixed\"\n    },\n    className: clsx(classes.appBar, openDrawer && classes.appBarShift),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1222,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Toolbar, {\n    className: classes.toolbar,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1223,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(IconButton, {\n    edge: \"start\",\n    color: \"inherit\",\n    \"aria-label\": \"open drawer\",\n    onClick: handleDrawerOpen,\n    className: clsx(classes.menuButton, openDrawer && classes.menuButtonHidden),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1224,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(MenuIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1231,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(Typography, {\n    component: \"h1\",\n    variant: \"h6\",\n    color: \"inherit\",\n    className: classes.title,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1234,\n      columnNumber: 13\n    }\n  }, \"\\u0426\\u0414\"), userProfile.userId !== undefined && /*#__PURE__*/React.createElement(\"table\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1238,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1239,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1240,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    style: {\n      paddingRight: 15\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1241,\n      columnNumber: 21\n    }\n  }, moment(new Date()).format(\"DD.MM.YYYY\")), operDayIsOpened !== null && /*#__PURE__*/React.createElement(\"td\", {\n    style: {\n      paddingRight: 15,\n      cursor: \"pointer\"\n    },\n    onClick: () => handleOperDayClick(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1245,\n      columnNumber: 23\n    }\n  }, \"\\u041E\\u043F\\u0435\\u0440\\u0430\\u0446\\u0438\\u043E\\u043D\\u043D\\u044B\\u0439 \\u0434\\u0435\\u043D\\u044C: \", operDayIsOpened === true ? \"Открыт\" : \"Закрыт\"), operDayIsOpened !== null && operDayIsOpened === false && /*#__PURE__*/React.createElement(\"td\", {\n    style: {\n      paddingRight: 15\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1253,\n      columnNumber: 23\n    }\n  }, lastClosedDate), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1258,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Badge, {\n    badgeContent: unreadDistributions,\n    color: \"primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1259,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(EmailIcon, {\n    style: {\n      cursor: \"pointer\"\n    },\n    fontSize: \"large\",\n    color: \"white\",\n    onClick: () => handleMenuButtonClick({\n      commandType: \"launchProcess\",\n      processKey: \"process_998ca68e-ee45-4b5b-ba23-5b9af4a34d38\",\n      parentLabel: \"КД\"\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1260,\n      columnNumber: 25\n    }\n  }))), (userProfile.userRole === \"1\" || userProfile.userRole === \"7\") && /*#__PURE__*/React.createElement(\"td\", {\n    style: {\n      paddingRight: 15\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1269,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(Badge, {\n    badgeContent: unreadInstructions,\n    color: unreadInstructions > 0 ? \"secondary\" : \"primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1270,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Notification, {\n    style: {\n      cursor: \"pointer\"\n    },\n    fontSize: \"large\",\n    color: urgentUnreadInstructions === true ? \"secondary\" : \"white\",\n    onClick: () => handleMenuButtonClick({\n      commandType: \"launchProcess\",\n      processKey: \"process_892bad05-cc0e-46b2-8e76-6aa1fed7cde0\",\n      parentLabel: \"Поручения\"\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1271,\n      columnNumber: 27\n    }\n  })))))), /*#__PURE__*/React.createElement(AccountCircleIcon, {\n    fontSize: \"large\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1284,\n      columnNumber: 13\n    }\n  }), !!keycloak.authenticated && /*#__PURE__*/React.createElement(\"table\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1286,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1287,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1288,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1289,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"table\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1290,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1291,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1292,\n      columnNumber: 27\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    style: {\n      fontSize: 12\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1293,\n      columnNumber: 29\n    }\n  }, \"\\u0424\\u0418\\u041E:\"), /*#__PURE__*/React.createElement(\"td\", {\n    style: {\n      fontSize: 12\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1294,\n      columnNumber: 29\n    }\n  }, userProfile.firstName + \" \" + userProfile.lastName.substring(0, 1) + \".\")), /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1296,\n      columnNumber: 27\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    style: {\n      fontSize: 12\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1297,\n      columnNumber: 29\n    }\n  }, \"\\u0420\\u043E\\u043B\\u044C:\"), /*#__PURE__*/React.createElement(\"td\", {\n    style: {\n      fontSize: 12\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1298,\n      columnNumber: 29\n    }\n  }, userRoleLabel))))), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1303,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1304,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(IconButton, {\n    color: \"inherit\",\n    style: {\n      fontSize: 14\n    },\n    onClick: () => keycloak.logout(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1305,\n      columnNumber: 25\n    }\n  }, \"\\u0412\\u044B\\u0439\\u0442\\u0438\")))))))), /*#__PURE__*/React.createElement(Drawer, {\n    variant: \"permanent\",\n    classes: {\n      paper: clsx(classes.drawerPaper, !openDrawer && classes.drawerPaperClose)\n    },\n    open: openDrawer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1316,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.toolbarIcon,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1323,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: \"favicon.ico\",\n    height: \"65px\",\n    width: \"65px\",\n    style: {\n      marginRight: \"100px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1324,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(IconButton, {\n    onClick: handleDrawerClose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1325,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(ChevronLeftIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1326,\n      columnNumber: 15\n    }\n  }))), /*#__PURE__*/React.createElement(Divider, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1329,\n      columnNumber: 11\n    }\n  }), routes.map((level1, index) => getLevel1Items(level1, index))), /*#__PURE__*/React.createElement(\"main\", {\n    className: classes.content,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1335,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    name: \"top\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1336,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Grid, {\n    style: {\n      paddingLeft: openDrawer === true ? drawerWidth : 65\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1338,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(AppBar, {\n    color: \"default\",\n    style: {\n      paddingLeft: openDrawer === true ? drawerWidth : 65\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1339,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Tabs, {\n    key: currTaskId,\n    style: {\n      height: \"110px\",\n      paddingTop: \"60px\"\n    },\n    position: \"fixed\",\n    value: selectedTab // onChange={(event, newValue)=> handleTabChange(event, newValue)}\n    ,\n    indicatorColor: \"primary\",\n    textColor: \"primary\",\n    variant: \"scrollable\",\n    scrollButtons: \"auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1340,\n      columnNumber: 15\n    }\n  }, tabs.map((tab, index) => /*#__PURE__*/React.createElement(Tab, Object.assign({\n    key: tab.id,\n    index: index,\n    onMouseDown: () => handleTabChange(tab.id),\n    label: /*#__PURE__*/React.createElement(Grid, {\n      style: {\n        fontSize: 10\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1357,\n        columnNumber: 23\n      }\n    }, tab.label, /*#__PURE__*/React.createElement(IconButton, {\n      onClick: () => handleCloseCurrentTab(tab.id),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1359,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(CloseIcon, {\n      style: {\n        fontSize: \"medium\",\n        color: \"black\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1360,\n        columnNumber: 27\n      }\n    }))),\n    value: tab.id\n  }, a11yProps(tab.id), {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1352,\n      columnNumber: 19\n    }\n  }))))), webSocketMessage !== null && tabs.map(tab => /*#__PURE__*/React.createElement(TabPanel // position=\"fixed\"\n  , {\n    currentTab: tab.id,\n    selectedTab: selectedTab,\n    key: tab.id,\n    style: {\n      paddingLeft: 10,\n      fontSize: \"0.9rem\"\n    },\n    value: tab.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1373,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(ComponentManager // VARS\n  , {\n    api: api,\n    userProfile: userProfile,\n    selectedTab: selectedTab,\n    id: tab.id,\n    key: tab.id,\n    esInn: esInn,\n    esUserFullName: esUserFullName,\n    esExpiredDate: esExpiredDate // closeTab={closeTab}\n    // mailRest={mailRest}\n    ,\n    operDayIsOpened: operDayIsOpened,\n    userTask: tabData.get(tab.id) // FUNCS\n    ,\n    callSuccessToast: callSuccessToast,\n    callErrorToast: callErrorToast,\n    sendFieldValues: sendFieldValues,\n    handleCloseCurrentTab: handleCloseCurrentTab,\n    clearTabData: clearTabData,\n    updateMailDistributions: updateMailDistributions,\n    reduceMailDistributions: reduceMailDistributions,\n    setEsUserFullName: setEsUserFullName,\n    setEsInn: setEsInn,\n    setEsExpiredDate: setEsExpiredDate,\n    currencyBeautifier: currencyBeautifier,\n    intBeautifier: intBeautifier // downloadReport={downloadReport}\n    ,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1381,\n      columnNumber: 19\n    }\n  })))), /*#__PURE__*/React.createElement(Modal, {\n    open: showModalEnterPin // onClose={handleCloseModalEnterPin}\n    ,\n    \"aria-labelledby\": \"simple-modal-title\",\n    \"aria-describedby\": \"simple-modal-description\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1414,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: modalStyle,\n    className: classes.modal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1420,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    id: \"simple-modal-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1421,\n      columnNumber: 15\n    }\n  }, \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u041F\\u0418\\u041D \\u043A\\u043E\\u0434 \\u0420\\u0443\\u0442\\u043E\\u043A\\u0435\\u043D\\u0430\"), /*#__PURE__*/React.createElement(FormControl, {\n    variant: \"outlined\",\n    style: {\n      width: \"100%\"\n    },\n    error: wrongPin,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1422,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(InputLabel, {\n    htmlFor: \"outlined-adornment-password\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1423,\n      columnNumber: 17\n    }\n  }, \"PIN\"), /*#__PURE__*/React.createElement(OutlinedInput, {\n    type: showPin ? 'text' : 'password',\n    defaultValue: rutokenPin,\n    onChange: handlePinChange,\n    onKeyPress: onKeyPressModalEnterPin,\n    autoFocus: true,\n    endAdornment: /*#__PURE__*/React.createElement(InputAdornment, {\n      position: \"end\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1431,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(IconButton, {\n      \"aria-label\": \"toggle password visibility\",\n      onClick: handleClickShowPin,\n      edge: \"end\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1432,\n        columnNumber: 23\n      }\n    }, showPin ? /*#__PURE__*/React.createElement(Visibility, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1437,\n        columnNumber: 36\n      }\n    }) : /*#__PURE__*/React.createElement(VisibilityOff, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1437,\n        columnNumber: 53\n      }\n    }))),\n    labelWidth: 25,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1424,\n      columnNumber: 17\n    }\n  })), wrongPin === true && /*#__PURE__*/React.createElement(\"p\", {\n    color: \"red\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1444,\n      columnNumber: 37\n    }\n  }, \"\\u041D\\u0435 \\u0432\\u0435\\u0440\\u043D\\u044B\\u0439 PIN\"), /*#__PURE__*/React.createElement(Button, {\n    variant: \"contained\",\n    onClick: () => buttonClick(\"SignButton\"),\n    style: {\n      margin: 3,\n      height: 32,\n      fontSize: 12,\n      color: \"white\",\n      backgroundColor: \"#2862F4\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1445,\n      columnNumber: 15\n    }\n  }, \"\\u041E\\u043A\"))), /*#__PURE__*/React.createElement(ToastContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1459,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Typography, {\n    variant: \"body2\",\n    color: \"textSecondary\",\n    align: \"center\",\n    style: {\n      paddingLeft: openDrawer === true ? drawerWidth : 65,\n      paddingTop: 10\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1460,\n      columnNumber: 11\n    }\n  }, \"Copyright © \" + new Date().getFullYear() + \" Intersoft Ltd. All rights reserved. \"), /*#__PURE__*/React.createElement(\"table\", {\n    style: {\n      paddingLeft: openDrawer === true ? drawerWidth : 65\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1463,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1466,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    width: \"20%\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1467,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    name: \"USAID_logo\",\n    height: \"80px\",\n    width: \"auto\",\n    src: \"./USAID_logo.png\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1468,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"td\", {\n    width: \"80%\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1470,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      align: \"center\",\n      fontSize: 10\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1471,\n      columnNumber: 17\n    }\n  }, \"Данная автоматизированная информационная система стала возможной благодаря помощи американского народа, оказанной через Агентство США по международному развитию (USAID). Закрытое Акционерное Общество (ЗАО) «Центральный депозитарий» Кыргызской Республики несет ответственность за содержание системы, которое не обязательно отражает позицию USAID или Правительства США.\")))), /*#__PURE__*/React.createElement(IconButton, {\n    href: \"#top\",\n    style: hrefStyleTop,\n    className: classes.hrefStyleTop,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1477,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(ArrowUpwardRoundedIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1478,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(IconButton, {\n    href: \"#bottom\",\n    style: hrefStyleBottom,\n    className: classes.hrefStyleBottom,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1480,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(ArrowDownwardIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1481,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"a\", {\n    name: \"bottom\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1483,\n      columnNumber: 11\n    }\n  }))));\n});","map":{"version":3,"names":["React","useState","useEffect","clsx","makeStyles","CssBaseline","Drawer","AppBar","Toolbar","List","Typography","Divider","IconButton","Grid","ListItem","CircularProgress","Collapse","Tabs","Tab","ComponentManager","Box","Modal","Button","FormControl","FormControlLabel","OutlinedInput","InputLabel","InputAdornment","Visibility","VisibilityOff","MenuIcon","ChevronLeftIcon","ExitToAppIcon","ExpandLess","ExpandMore","AddCircleIcon","CloseIcon","AccountCircleIcon","Notification","NotificationsActiveIcon","EmailIcon","Badge","ArrowUpwardRoundedIcon","ArrowDownwardIcon","useKeycloak","swal","ToastContainer","toast","rutoken","moment","plugin","rutokenHandle","certHandle","certData","cmsData","TabPanel","props","children","currentTab","selectedTab","other","a11yProps","id","HashMap","require","drawerWidth","useStyles","theme","root","display","toolbar","paddingRight","backgroundColor","toolbarIcon","alignItems","justifyContent","padding","mixins","appBar","zIndex","drawer","transition","transitions","create","easing","sharp","duration","leavingScreen","appBarShift","marginLeft","width","enteringScreen","menuButton","marginRight","menuButtonHidden","title","flexGrow","drawerPaper","position","whiteSpace","drawerPaperClose","overflowX","spacing","breakpoints","up","appBarSpacer","content","height","marginTop","overflow","paper","flexDirection","modal","palette","background","border","boxShadow","shadows","hrefStyleTop","hrefStyleBottom","useStylesnav","maxWidth","listItemText","fontSize","paddingLeft","level1","maxHeight","level2","level3","tabs","getModalStyle","top","left","transform","getHrefStyleTop","bottom","right","getHrefStyleBottom","ready","then","window","chrome","InstallTrigger","isExtensionInstalled","Promise","resolve","result","isPluginInstalled","loadPlugin","keycloak","setSelectedTab","setTabs","endpoint","process","env","NODE_ENV","api","routes","setRoutes","session_id","setSession_id","webSocketMessage","setWebSocketMessage","currTaskId","setCurrTaskId","opennav","setOpennav","openDrawer","setOpenDrawer","tabCounter","setTabCounter","menuItemStates","setMenuItemStates","socket","setSocket","tabData","setTabData","userProfile","setUserProfile","userRoleLabel","setUserRoleLabel","unreadInstructions","setUnreadInstructions","urgentUnreadInstructions","setUrgentUnreadInstructions","unreadDistributions","setUnreadDistributions","operDayIsOpened","setOperDayIsOpened","lastClosedDate","setLastClosedDate","Date","format","restore","setRestore","rutokenRequired","setRutokenRequired","modalStyle","showModalEnterPin","setShowModalEnterPin","rutokenPin","setRutokenPin","showPin","setShowPin","wrongPin","setWrongPin","esUserFullName","setEsUserFullName","esInn","setEsInn","esExpiredDate","setEsExpiredDate","classes","classesnav","handleDrawerOpen","handleDrawerClose","console","log","loadUserProfile","success","profile","curUserProfile","firstName","lastName","email","username","attributes","er","i","value","error","sign","textToSign","enumerateDevices","devices","length","swAllert","firstDevice","getDeviceInfo","TOKEN_INFO_IS_LOGGED_IN","isLoggedIn","login","enumerateCertificates","CERT_CATEGORY_UNSPEC","certs","parseCertificate","alert","options","inn","fullName","subject","rdn","validNotAfter","substring","restoreUserTabs","handleCloseModalEnterPin","DATA_FORMAT_PLAIN","logout","handleError","callErrorToast","reason","isNaN","message","errorCodes","parseInt","PIN_INCORRECT","handlePinChange","event","target","handleClickShowPin","onKeyPressModalEnterPin","code","charCode","buttonClick","text","icon","buttons","ok","userRole","undefined","WebSocket","onmessage","incomingJson","JSON","parse","data","messageType","send","stringify","commandType","userId","partner","token","updatedMenuItemStates","slice","newMenuItem","name","state","push","l","newMenuItem2","tabExist","process_id","updatedTabs","label","tabLabel","remove","taskID","set","get","handleCloseCurrentTab","urgent","count","toastType","callSuccessToast","toastText","opDayStatus","status","isOpened","closeTab","onclose","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","processKey","variables","user_session_id","userAction","updateMailDistributions","reduceMailDistributions","buttonName","sendFieldValues","commandJson","readyState","OPEN","clearTabData","getUUID","tabId","selectedTabData","handleOpenSwal","swalButtons","click","handleCloseCurrentTabModal","handleOpenMenuClick","handleMenuButtonClick","button","parentLabel","authorization","uuidv1","handleTabChange","copyTabs","newTabs","getLevel1Items","index","map","level2Item","getLevel2Items","level3Item","getLevel3Items","color","paddingTop","handleOperDayClick","currencyBeautifier","currency","cur","parseFloat","toString","parts","split","numberPart","thousands","decimalPart","newCur","replace","spDecPart","newDecPart","numberStarted","intBeautifier","int","strInt","newInt","cursor","authenticated","tab","margin","getFullYear","align"],"sources":["C:/Users/SERGO/Desktop/depo/src/pages/Home.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport clsx from \"clsx\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport Drawer from \"@material-ui/core/Drawer\";\nimport AppBar from \"@material-ui/core/AppBar\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport List from \"@material-ui/core/List\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Divider from \"@material-ui/core/Divider\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Grid from \"@material-ui/core/Grid\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport Collapse from \"@material-ui/core/Collapse\";\nimport Tabs from \"@material-ui/core/Tabs\";\nimport Tab from \"@material-ui/core/Tab\";\nimport ComponentManager from \"../components/ComponentManager/ComponentManager.jsx\";\nimport Box from \"@material-ui/core/Box\";\nimport Modal from '@material-ui/core/Modal';\nimport Button from '@material-ui/core/Button';\n// PIN components\nimport FormControl from '@material-ui/core/FormControl';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport OutlinedInput from '@material-ui/core/OutlinedInput';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport Visibility from '@material-ui/icons/Visibility';\nimport VisibilityOff from '@material-ui/icons/VisibilityOff';\n// Icons\nimport MenuIcon from \"@material-ui/icons/Menu\";\nimport ChevronLeftIcon from \"@material-ui/icons/ChevronLeft\";\nimport ExitToAppIcon from \"@material-ui/icons/ExitToAppOutlined\";\nimport ExpandLess from \"@material-ui/icons/ExpandLess\";\nimport ExpandMore from \"@material-ui/icons/ExpandMore\";\nimport AddCircleIcon from \"@material-ui/icons/AddCircleOutlineOutlined\";\nimport CloseIcon from \"@material-ui/icons/Close\";\nimport AccountCircleIcon from \"@material-ui/icons/AccountCircle\";\nimport Notification from \"@material-ui/icons/Notifications\";\nimport NotificationsActiveIcon from '@material-ui/icons/NotificationsActive';\nimport EmailIcon from '@material-ui/icons/Email';\nimport Badge from '@material-ui/core/Badge';\nimport ArrowUpwardRoundedIcon from '@mui/icons-material/ArrowUpwardRounded';\nimport ArrowDownwardIcon from '@mui/icons-material/ArrowDownward';\n// Libs\nimport { useKeycloak } from \"../lib\";\nimport swal from \"sweetalert\" // https://sweetalert.js.org/guides/\nimport { ToastContainer, toast } from 'react-toastify'; // https://fkhadra.github.io/react-toastify/introduction/\nimport 'react-toastify/dist/ReactToastify.css';\nimport * as rutoken from \"rutoken\";\nimport moment from \"moment\";\nvar plugin = null;\nvar rutokenHandle, certHandle, certData, cmsData;\n\nfunction TabPanel(props) {\n  const { children, currentTab, selectedTab, ...other } = props;\n  return (\n    <Typography\n      component=\"div\"\n      role=\"tabpanel\"\n      hidden={currentTab !== selectedTab}\n      id={`scrollable-auto-tabpanel-${selectedTab}`}\n      aria-labelledby={`scrollable-auto-tab-${selectedTab}`}\n      {...other}\n    >\n      <Box p={3}>{children}</Box>\n    </Typography>\n  )\n}\nfunction a11yProps(id) {\n  return {\n    id: `scrollable-auto-tab-${id}`,\n    \"aria-controls\": `scrollable-auto-tabpanel-${id}`\n  }\n}\nvar HashMap = require(\"hashmap\")\nconst drawerWidth = 250;\nconst useStyles = makeStyles(theme => ({\n  root: {\n    display: \"flex\"\n  },\n  toolbar: {\n    paddingRight: 24, // keep right padding when drawer closed\n    backgroundColor: \"#0F6038\",\n    // height: \"200px\"\n  },\n  toolbarIcon: {\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"flex-end\",\n    padding: \"0 8px\",\n    ...theme.mixins.toolbar\n  },\n  appBar: {\n    zIndex: theme.zIndex.drawer + 1,\n    transition: theme.transitions.create([\"width\", \"margin\"], {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.leavingScreen\n    })\n  },\n  appBarShift: {\n    marginLeft: drawerWidth,\n    width: `calc(100% - ${drawerWidth}px)`,\n    transition: theme.transitions.create([\"width\", \"margin\"], {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.enteringScreen\n    })\n  },\n  menuButton: {\n    marginRight: 36\n  },\n  menuButtonHidden: {\n    display: \"none\"\n  },\n  title: {\n    flexGrow: 1\n  },\n  drawerPaper: {\n    // backgroundColor: \"#E6F3ED\",\n    position: \"fixed\",\n    whiteSpace: \"nowrap\",\n    width: drawerWidth,\n    transition: theme.transitions.create(\"width\", {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.enteringScreen\n    })\n  },\n  drawerPaperClose: {\n    overflowX: \"hidden\",\n    transition: theme.transitions.create(\"width\", {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.leavingScreen\n    }),\n    width: theme.spacing(7),\n    [theme.breakpoints.up(\"sm\")]: {\n      width: theme.spacing(9)\n    }\n  },\n  appBarSpacer: theme.mixins.toolbar,\n  content: {\n    flexGrow: 1,\n    height: \"86vh\",\n    marginTop: \"110px\",\n    // height: \"100vh\",\n    overflow: \"auto\",\n    // paddingTop: \"190px\",\n    // border: \"1px solid red\"\n  },\n  paper: {\n    padding: theme.spacing(2),\n    display: \"flex\",\n    overflow: \"auto\",\n    flexDirection: \"column\"\n  },\n  modal: {\n    position: 'absolute',\n    width: 500,\n    backgroundColor: theme.palette.background.paper,\n    border: '1px solid #AFAFAF',\n    boxShadow: theme.shadows[5],\n    padding: theme.spacing(2, 4, 3),\n  },\n  hrefStyleTop: {\n    position: 'absolute',\n    backgroundColor: \"white\",\n    border: '1px solid grey',\n    height: \"35px\",\n    width: \"35px\"\n  },\n  hrefStyleBottom: {\n    position: 'absolute',\n    backgroundColor: \"white\",\n    border: '1px solid grey',\n    height: \"35px\",\n    width: \"35px\"\n  }\n}))\nconst useStylesnav = makeStyles(theme => ({\n  root: {\n    overflow: \"hidden\",\n    width: \"100%\",\n    maxWidth: 360,\n    backgroundColor: theme.palette.background.paper\n  },\n  listItemText: {\n    fontSize: 13,\n    paddingLeft: \"2px\",\n    // \"display\": \"flex\", \n    // \"flex-wrap\": \"wrap\",\n  },\n  level1: {\n    paddingLeft: theme.spacing(0),\n    maxHeight: 20\n  },\n  level2: {\n    paddingLeft: theme.spacing(0),\n    maxHeight: 20\n  },\n  level3: {\n    paddingLeft: theme.spacing(1),\n    maxHeight: 20\n  },\n  tabs: {\n    flexGrow: 1,\n    width: \"100%\",\n    backgroundColor: theme.palette.background.paper\n  }\n}))\nfunction getModalStyle() {\n  const top = 35;\n  const left = 45;\n  return {\n    top: `${top}%`,\n    left: `${left}%`,\n    transform: `translate(-${top}%, -${left}%)`,\n  };\n}\nfunction getHrefStyleTop() {\n  const bottom = 7;\n  const right = 2;\n  return {\n    bottom: `${bottom}%`,\n    right: `${right}%`,\n    transform: `translate(-${bottom}%, -${right}%)`,\n  };\n}\nfunction getHrefStyleBottom() {\n  const bottom = 2;\n  const right = 2;\n  return {\n    bottom: `${bottom}%`,\n    right: `${right}%`,\n    transform: `translate(-${bottom}%, -${right}%)`,\n  };\n}\n\n\nrutoken.ready\n  // Проверка установки расширение 'Адаптера Рутокен Плагина' в Google Chrome\n  .then(function () {\n    if (window.chrome || typeof InstallTrigger !== 'undefined') {\n      return rutoken.isExtensionInstalled()\n    } else {\n      return Promise.resolve(true)\n    }\n  })\n  // Проверка установки Рутокен Плагина\n  .then(function (result) {\n    if (result) {\n      return rutoken.isPluginInstalled()\n    } else {\n      // alert(\"Не удаётся найти расширение 'Адаптер Рутокен Плагина'\");\n    }\n  })\n  // Загрузка плагина\n  .then(function (result) {\n    if (result) {\n      return rutoken.loadPlugin()\n    } else {\n      // alert(\"Не удаётся найти Плагин\");\n    }\n  })\n  //Можно начинать работать с плагином\n  .then(function (result) {\n    if (!result) {\n      return // alert(\"Не удаётся загрузить Плагин\")\n    } else {\n      plugin = result\n      return Promise.resolve()\n    }\n  })\nexport default () => {\n  const { keycloak } = useKeycloak()\n  const [selectedTab, setSelectedTab] = useState(null)\n  const [tabs, setTabs] = useState([])\n\n  // const [endpoint] = useState(\"ws://192.168.2.208:3220\") // Local\n  // const [api] = useState(\"/api\") // Local api\n\n  // const [endpoint] = useState(\"wss://depo.cds.kg:3120\") //Rented Server UBUNTU\n  // const [api] = useState(\"/back/api\") //Server api\n\n  // separate endpoints  by build/production\n  const [endpoint] = process.env.NODE_ENV === \"development\" ? useState(\"ws://192.168.168.208:3220\") : useState(\"wss://depo.cds.kg:3120\")\n  const [api] = process.env.NODE_ENV === \"development\" ? useState(\"/api\") : useState(\"/back/api\")\n\n  // const [endpoint] = useState(\"wss://depo-test.cds.kg:3120\") //OLD Server\n\n  const [routes, setRoutes] = useState([])\n  const [session_id, setSession_id] = useState(null)\n  const [webSocketMessage, setWebSocketMessage] = useState(null)\n  const [currTaskId, setCurrTaskId] = useState(null)\n  const [opennav, setOpennav] = useState(false)\n  const [openDrawer, setOpenDrawer] = useState(true)\n  const [tabCounter, setTabCounter] = useState(1)\n  const [menuItemStates, setMenuItemStates] = useState([])\n  const [socket, setSocket] = useState(null)\n  const [tabData, setTabData] = useState(null)\n  // User\n  const [userProfile, setUserProfile] = useState({})\n  const [userRoleLabel, setUserRoleLabel] = useState(\"\")\n\n  const [unreadInstructions, setUnreadInstructions] = useState(0)\n  const [urgentUnreadInstructions, setUrgentUnreadInstructions] = useState(false)\n  const [unreadDistributions, setUnreadDistributions] = useState(0)\n  const [operDayIsOpened, setOperDayIsOpened] = useState(null)\n  const [lastClosedDate, setLastClosedDate] = useState(moment(new Date()).format(\"DD.MM.YYYY\"))\n  const [restore, setRestore] = useState(false)\n  // Rutoken\n  const [rutokenRequired, setRutokenRequired] = useState(true)\n  const [modalStyle] = useState(getModalStyle)\n  const [showModalEnterPin, setShowModalEnterPin] = useState(false)\n  const [rutokenPin, setRutokenPin] = useState(\"\")\n  const [showPin, setShowPin] = useState(false)\n  const [wrongPin, setWrongPin] = useState(false)\n  const [esUserFullName, setEsUserFullName] = useState(null)\n  const [esInn, setEsInn] = useState(null)\n  const [esExpiredDate, setEsExpiredDate] = useState(null)\n\n  const classes = useStyles()\n  const classesnav = useStylesnav()\n  const [hrefStyleTop] = useState(getHrefStyleTop)\n  const [hrefStyleBottom] = useState(getHrefStyleBottom)\n  const handleDrawerOpen = () => {\n    setOpenDrawer(true)\n  }\n  const handleDrawerClose = () => {\n    setOpenDrawer(false)\n  }\n  // console.log(\"INN\", esInn)\n  useEffect(() => {\n    console.log(\"ENV\", endpoint)\n    if (tabData === null) {\n      setTabData(new HashMap())\n    }\n    keycloak.loadUserProfile().success(function (profile) {\n      let curUserProfile = {\n        firstName: profile.firstName,\n        lastName: profile.lastName,\n        email: profile.email,\n        username: profile.username\n      }\n      try {\n        if (profile.attributes[\"rutokenRequired\"][0] === \"true\") {\n          setRutokenRequired(true)\n        }\n        else {\n          setRutokenRequired(false)\n          setRestore(true)\n        }\n      }\n      catch (er) {\n        setRutokenRequired(false)\n        setRestore(true)\n      }\n\n      for (let i in profile.attributes) {\n        let value = profile.attributes[i][0] === \"true\" ? true : profile.attributes[i][0] === \"false\" ? false : profile.attributes[i][0]\n        curUserProfile[i] = value\n      }\n      if (curUserProfile.rutokenRequired === true) {\n        setShowModalEnterPin(true)\n      }\n      setUserProfile(curUserProfile)\n      console.log(\"PROFILE\", curUserProfile)\n    }).error(function () {\n      console.log(\"Failed to load user profile\")\n    })\n  }, [])\n\n  // RuToken functions\n  // Sign with rutoken\n  function sign() {\n    var textToSign = \"data\";\n    if (plugin !== null) {\n      // Перебор подключенных Рутокенов\n      plugin.enumerateDevices()\n        .then(function (devices) {\n          if (devices.length > 0) {\n            return Promise.resolve(devices[0]);\n          } else {\n            swAllert(\"Рутокен не обнаружен\", \"warning\");\n          }\n        })\n        // Проверка залогиненности\n        .then(function (firstDevice) {\n          rutokenHandle = firstDevice;\n          return plugin.getDeviceInfo(rutokenHandle, plugin.TOKEN_INFO_IS_LOGGED_IN);\n        })\n        // Логин на первый токен в списке устройств PIN-кодом по умолчанию\n        .then(function (isLoggedIn) {\n          // console.log(\"PIN\", rutokenPin)\n          if (isLoggedIn) {\n            return Promise.resolve();\n          } else {\n            return plugin.login(rutokenHandle, rutokenPin);\n          }\n        })\n        // Перебор пользовательских сертификатов на токене\n        .then(function () {\n          return plugin.enumerateCertificates(rutokenHandle, plugin.CERT_CATEGORY_UNSPEC);\n        })\n        .then(function (certs) {\n          if (certs.length > 0) {\n            certHandle = certs[0];\n            return plugin.parseCertificate(rutokenHandle, certs[0]);\n          } else {\n            alert(\"Сертификат на Рутокен не обнаружен\");\n          }\n        })\n        // Подписание данных из текстового поля на первом найденом сертификате\n        .then(function (certs) {\n          certData = certs\n          console.log(\"RUTDATA\", certData)\n          // var r = plugin.getCertificateInfo(0, certs).then(function (res){console.log(res)})\n          // console.log(\"res\", r)\n          if (certHandle.length > 0) {\n            var options = {};\n\n            let inn = \"\"\n            let fullName = \"\"\n            for (let i = 0; i < certData.subject.length; i++) {\n              if (certData.subject[i].rdn === \"serialNumber\") {\n                inn = certData.subject[i].value\n              }\n              if (certData.subject[i].rdn === \"commonName\") {\n                fullName = certData.subject[i].value\n              }\n            }\n            console.log(\"ESDATA\", inn, fullName)\n            setEsInn(inn)\n            setEsUserFullName(fullName)\n            setEsExpiredDate(certData.validNotAfter.substring(0, certData.validNotAfter.length - 1))\n            restoreUserTabs()\n            handleCloseModalEnterPin()\n            return plugin.sign(rutokenHandle, certHandle, textToSign, plugin.DATA_FORMAT_PLAIN, options);\n          } else {\n            alert(\"Сертификат на Рутокен не обнаружен\")\n          }\n        })\n        // Закрытие сессии\n        .then(function () {\n          plugin.logout(rutokenHandle)\n        }, handleError)\n    }\n    else { callErrorToast(\"Вставьте рутокен, либо установите расширение для вашего браузера\", \"warning\") }\n  }\n  // catch errors while signing docs\n  function handleError(reason) {\n    if (isNaN(reason.message)) {\n      console.log(reason);\n    } else {\n      var errorCodes = plugin.errorCodes;\n      switch (parseInt(reason.message)) {\n        case errorCodes.PIN_INCORRECT:\n          // alert(\"Неверный PIN\");\n          setWrongPin(true)\n          break;\n        default:\n          console.log(\"Неизвестная ошибка\");\n      }\n    }\n  }\n  const handleCloseModalEnterPin = () => {\n    setShowModalEnterPin(false)\n  }\n  function handlePinChange(event) {\n    console.log(\"PIN EV\", event.target.value)\n    setRutokenPin(event.target.value)\n    setWrongPin(false)\n    // console.log(\"PIN\", event.target.value)\n  }\n  function handleClickShowPin() {\n    setShowPin(!showPin)\n  }\n  function onKeyPressModalEnterPin(event) {\n    console.log(\"KP EV\", event.target.value)\n    let code = event.charCode\n    if (code === 13) {\n      buttonClick(\"SignButton\")\n    }\n  }\n  function swAllert(text, icon) {\n    return (\n      swal({\n        text: text,\n        icon: icon,\n        buttons: { ok: \"Ок\" },\n      })\n    )\n  }\n  // function downloadReport(reportName, reportVars) {\n  //   socket.send(JSON.stringify({\n  //     commandType: \"downloadReport\",\n  //     userId: userProfile.userId,\n  //     session_id: session_id,\n  //     userRole: userProfile.userRole,\n  //     partner: userProfile.partner,\n  //     token: \"Bearer \" + keycloak.token,\n  //     reportName: reportName,\n  //     reportVars: reportVars\n  //   }))\n  // }\n  // Main socket connection and data receiving\n  if (socket === null && userProfile.userRole !== undefined) {\n    setSocket(new WebSocket(endpoint))\n    console.log(\"CONNECTING...\", endpoint)\n  }\n  if (socket !== null) {\n    socket.onmessage = async function (message) {\n      var incomingJson = JSON.parse(message.data)\n      // console.log(\"Socket message\", incomingJson)\n      // console.log(\"TAB DATA\", tabData)\n      if (incomingJson.messageType === \"session_id\") {\n        console.log(\"CONNECTED TO: \", endpoint)\n        console.log(\"NEW SESSION: \", incomingJson.session_id)\n        setSession_id(incomingJson.session_id)\n        socket.send(JSON.stringify({\n          commandType: \"setUserData\",\n          userId: userProfile.userId,\n          session_id: incomingJson.session_id,\n          userRole: userProfile.userRole,\n          partner: userProfile.partner,\n          token: \"Bearer \" + keycloak.token\n        }))\n      }\n      else if (incomingJson.messageType === \"userDataInserted\") {\n        console.log(\"userDataInserted\", incomingJson.session_id)\n        socket.send(JSON.stringify({\n          commandType: \"getMenu\",\n          userProfile: userProfile,\n          session_id: incomingJson.session_id,\n          token: \"Bearer \" + keycloak.token\n        }))\n        socket.send(JSON.stringify({\n          commandType: \"getUserRoleLabel\",\n          userProfile: userProfile,\n          session_id: incomingJson.session_id,\n          token: \"Bearer \" + keycloak.token\n        }))\n        if (restore === true) {\n          restoreUserTabs()\n        }\n      }\n      else if (incomingJson.messageType === \"Menu\") {\n        let updatedMenuItemStates = menuItemStates.slice()\n        for (let i = 0; i < incomingJson.routes.length; i++) {\n          if (incomingJson.routes[i].level2 !== undefined) {\n            let newMenuItem = {\n              name: incomingJson.routes[i].name,\n              state: incomingJson.routes[i].state\n            }\n            updatedMenuItemStates.push(newMenuItem)\n            for (let l = 0; l < incomingJson.routes[i].level2.length; l++) {\n              if (incomingJson.routes[i].level2[l].level3 !== undefined) {\n                let newMenuItem2 = {\n                  name: incomingJson.routes[i].level2[l].name,\n                  state: incomingJson.routes[i].level2[l].state\n                }\n                updatedMenuItemStates.push(newMenuItem2)\n              }\n            }\n          }\n        }\n        setRoutes(incomingJson.routes)\n        setMenuItemStates(updatedMenuItemStates)\n        // console.log(\"MENU States\", updatedMenuItemStates)\n      }\n      else if (incomingJson.messageType === \"userTask\") {\n        // console.log(\"NEW TASK\", incomingJson)\n        let tabExist = false // If tab not exist open it to copy workspace on different machines\n        for (let i = 0; i < tabs.length; i++) {\n          if (tabs[i].id === incomingJson.process_id) {\n            tabExist = true\n            break\n          }\n        }\n        if (tabExist === false) {\n          let updatedTabs = tabs.slice()\n          updatedTabs.push({ id: incomingJson.process_id, name: incomingJson.process_id, label: incomingJson.tabLabel + \" \" + tabCounter })\n          setTabs(updatedTabs)\n          // setSelectedTab(incomingJson.process_id)\n          setTabCounter(tabCounter + 1)\n        }\n        tabData.remove(incomingJson.process_id)\n        setCurrTaskId(incomingJson.taskID)\n        await tabData.set(incomingJson.process_id, incomingJson)\n        setWebSocketMessage(incomingJson)\n      }\n      else if (incomingJson.messageType === \"restoreTab\") {\n        if (tabData.get(incomingJson.process_id) === undefined) {\n          await tabData.set(incomingJson.process_id, incomingJson)\n          // console.log(\"NEW TASK\", incomingJson)\n          let updatedTabs = tabs.slice()\n          updatedTabs.push({ id: incomingJson.process_id, name: incomingJson.process_id, label: incomingJson.tabLabel + \" \" + tabCounter })\n          setTabs(updatedTabs)\n          setSelectedTab(incomingJson.process_id)\n          setTabCounter(tabCounter + 1)\n          setCurrTaskId(incomingJson.taskID)\n          setWebSocketMessage(incomingJson)\n        }\n      }\n      else if (incomingJson.messageType === \"error\") {\n        setWebSocketMessage(incomingJson)\n        // console.log(\"webSocket ERROR\", incomingJson)\n        tabData.set(incomingJson.process_id, incomingJson)\n        setCurrTaskId(incomingJson.taskID)\n        handleCloseCurrentTab(incomingJson.process_id)\n      }\n      else if (incomingJson.messageType === \"notifications\") {\n        let unreadInstructions = JSON.parse(incomingJson.unreadInstructions)\n        // console.log(\"NOTIFICATIONS\", unreadInstructions)\n        setUrgentUnreadInstructions(unreadInstructions.urgent)\n        setUnreadInstructions(parseInt(unreadInstructions.count))\n      }\n      else if (incomingJson.messageType === \"notification\") {\n        swal({\n          text: incomingJson.text,\n          icon: incomingJson.icon\n        })\n      }\n      else if (incomingJson.messageType === \"distributions\") {\n        let unreadDistributions = JSON.parse(incomingJson.unreadDistributions)\n        console.log(\"unreadDistributions\", unreadDistributions)\n        if (unreadDistributions.length > 3) {\n          setUnreadDistributions(unreadDistributions.substring(0, 3) + \"+\")\n        }\n        else {\n          setUnreadDistributions(unreadDistributions)\n        }\n      }\n      else if (incomingJson.messageType === \"toast\") {\n        if (incomingJson.toastType === \"success\") {\n          callSuccessToast(incomingJson.toastText)\n        }\n        else if (incomingJson.toastType === \"error\") {\n          console.log(\"ERR TOAST\", incomingJson.toastText)\n          callErrorToast(incomingJson.toastText)\n        }\n      }\n      else if (incomingJson.messageType === \"operDayStatus\") {\n        let opDayStatus = JSON.parse(incomingJson.status)\n        console.log(\"OP DAY\", opDayStatus)\n        // if (opDayStatus.isOpened === true) {\n        setOperDayIsOpened(opDayStatus.isOpened)\n        setLastClosedDate(moment(new Date(opDayStatus.lastClosedDate)).format(\"DD.MM.YYYY\"))\n\n        // }\n        // else {\n        //   setOperDayIsOpened(false)\n        // }\n      }\n      else if (incomingJson.messageType === \"userRoleLabel\") {\n        // console.log(\"ROLE\", incomingJson)\n        setUserRoleLabel(incomingJson.userRoleLabel)\n      }\n      else if (incomingJson.messageType === \"closeTab\") {\n        // console.log(\"ROLE\", incomingJson)\n        closeTab(incomingJson.process_id)\n      }\n\n      // else if (incomingJson.messageType === \"downloadReport\") {\n      //   console.log(\"B64\", incomingJson.base64)\n      //   var arr = incomingJson.base64.split(','),\n      //     mime = arr[0].match(/:(.*?);/)[1],\n      //     bstr = atob(arr[1]),\n      //     n = bstr.length,\n      //     u8arr = new Uint8Array(n)\n\n      //   while (n--) {\n      //     u8arr[n] = bstr.charCodeAt(n)\n      //   }\n      //   let convFile = new File([u8arr], \"fileName\", { type: mime })\n\n      //   var url = window.URL.createObjectURL(convFile)\n      //   var a = document.createElement('a')\n      //   a.href = url\n      //   a.download = `${\"incomingJson.blob.name\"}.pdf`\n      //   document.body.appendChild(a) // we need to append the element to the dom -> otherwise it will not work in firefox\n      //   a.click()\n      //   a.remove()\n      // }\n      else {\n        console.log(\"Socket Message\", incomingJson)\n      }\n    }\n    socket.onclose = function (er) {\n      console.log(\"CONNECTION CLOSED \", endpoint)\n      setSocket(null)\n    }\n  }\n  function callSuccessToast(text) {\n    toast(text, {\n      position: \"top-right\",\n      autoClose: 6000,\n      hideProgressBar: false,\n      closeOnClick: true,\n      pauseOnHover: true,\n      draggable: true,\n      progress: undefined,\n    })\n  }\n  function callErrorToast(text) {\n    toast.error(text, {\n      position: \"top-right\",\n      autoClose: 7000,\n      hideProgressBar: false,\n      closeOnClick: true,\n      pauseOnHover: true,\n      draggable: true,\n      progress: undefined,\n    })\n  }\n  function restoreUserTabs() {\n    console.log(\"RESTORE STARTED\")\n    setRestore(false)\n    socket.send(JSON.stringify({\n      commandType: \"restoreSession\",\n      userId: userProfile.userId,\n      session_id: session_id,\n      userRole: userProfile.userRole,\n      token: \"Bearer \" + keycloak.token\n    }))\n    socket.send(JSON.stringify({\n      commandType: \"getOperDayStatus\",\n      userId: userProfile.userId,\n      session_id: session_id,\n      token: \"Bearer \" + keycloak.token\n    }))\n    socket.send(JSON.stringify({\n      commandType: \"launchProcess\",\n      processKey: \"process_169eccff-4a0c-4b5f-8eda-150965351a91\",\n      session_id: session_id,\n      process_id: \"null\",\n      userId: userProfile.userId,\n      token: \"Bearer \" + keycloak.token,\n      variables: {\n        user_session_id: { value: session_id },\n        userAction: { value: \"getNotificationsCount\" }\n      }\n    }))\n    updateMailDistributions()\n  }\n  function updateMailDistributions() {\n    console.log(\"GET DISTRS\", userProfile.partner)\n    if (userProfile.partner) {\n\n      socket.send(JSON.stringify({\n        commandType: \"getUnreadDistributions\",\n        // processKey: \"process_673b1ef0-a228-476c-832a-682b14e5cc93\",\n        session_id: session_id,\n        process_id: \"null\",\n        userId: userProfile.userId,\n        partner: userProfile.partner,\n        token: \"Bearer \" + keycloak.token,\n        // variables: {\n        //   user_session_id: { value: session_id },\n        //   userAction: { value: \"getUnreadDistributions\" },\n        //   user_id_recipient: { value: userProfile.partner},\n        //   userId: { value: userProfile.userId },\n        // }\n      }))\n    }\n    else {\n      console.log(\"User Partner not mentioned\")\n    }\n  }\n  function reduceMailDistributions() {\n    if (unreadDistributions > 0) {\n      setUnreadDistributions(unreadDistributions - 1)\n    }\n  }\n\n  // Main button click handler\n  function buttonClick(buttonName) {\n    // console.log(\"Button\", buttonName)\n    if (buttonName === \"SignButton\") {\n      console.log(\"button Sign: \")\n      if (rutokenPin === \"\") {\n        setWrongPin(true)\n      }\n      else {\n        sign()\n      }\n    }\n    else {\n      console.log(\"button: \", buttonName)\n    }\n  }\n  function sendFieldValues(commandJson) {\n    if (socket.readyState === socket.OPEN) {\n      commandJson[\"token\"] = \"Bearer \" + keycloak.token\n      commandJson[\"session_id\"] = session_id\n      console.log(\"CUR SESSION: \", session_id)\n      if (commandJson.commandType !== \"deleteSavedDoc\") {\n        clearTabData(commandJson.process_id)\n      }\n      if (commandJson.variables !== undefined) {\n        if (commandJson.variables[\"userAction\"][\"value\"] === \"cancel\") {\n          closeTab(selectedTab)\n          socket.send(JSON.stringify(commandJson))\n        }\n        else {\n          commandJson.variables[\"authorization\"] = { value: \"Bearer \" + keycloak.token }\n          socket.send(JSON.stringify(commandJson))\n          console.log(\"HOME SEND\", commandJson.session_id)\n        }\n      }\n      else {\n        socket.send(JSON.stringify(commandJson))\n        // console.log(\"HOME SEND\", commandJson)\n      }\n    }\n    else {\n      setSession_id(null)\n      setSocket(null)\n      clearTabData(commandJson.process_id)\n    }\n    setCurrTaskId(getUUID())\n  }\n  function handleCloseCurrentTab(tabId) {\n    var selectedTabData = tabData.get(tabId)\n    if (selectedTabData !== undefined) {\n      var commandJson = {\n        commandType: \"completeTask\",\n        session_id: selectedTabData.session_id,\n        process_id: selectedTabData.process_id,\n        taskID: selectedTabData.taskID,\n        token: \"Bearer \" + keycloak.token,\n        variables: {\n          userAction: { value: \"cancel\" },\n          userId: { value: userProfile.userId },\n          userRole: { value: userProfile.userRole }\n        }\n      }\n      sendFieldValues(commandJson)\n      closeTab(tabId)\n      var commandJson = {\n        commandType: \"closeTab\",\n        process_id: selectedTabData.process_id,\n        token: \"Bearer \" + keycloak.token,\n        userId: userProfile.userId\n      }\n      sendFieldValues(commandJson)\n      // if (userProfile.userRole === \"1\") {\n      //   sendFieldValues(commandJson)\n      //   closeTab(tabId)\n      // }\n      // else {\n      //   if (selectedTabData.taskType === \"showSearchUser\" ||\n      //     selectedTabData.taskType === \"showAccountsSearchForm\" ||\n      //     selectedTabData.taskType === \"showSecuritiesSearchForm\" ||\n      //     selectedTabData.taskType === \"showIssuersSearchForm\" ||\n      //     selectedTabData.taskType === \"showDepositorsSearchForm\" ||\n      //     selectedTabData.taskType === \"showDepositoriesSearchForm\" ||\n      //     selectedTabData.taskType === \"showIssuersSearchForm\" ||\n      //     selectedTabData.taskType === \"showPartnersSearchForm\" ||\n      //     selectedTabData.taskType === \"showTransactionsSearchForm\" ||\n      //     selectedTabData.taskType === \"showReferenceListSearchForm\" ||\n      //     selectedTabData.taskType === \"showInstructionsSearchForm\" ||\n      //     selectedTabData.taskType === \"showInstructionsRegistrarsSearchForm\" ||\n      //     selectedTabData.taskType === \"showChargeForCDServicesSearchForm\" ||\n      //     selectedTabData.taskType === \"showTransitChargeForCDServicesSearchForm\" ||\n      //     selectedTabData.taskType === \"showPaymentsForCDServicesSearchForm\" ||\n      //     selectedTabData.taskType === \"showTransitPaymentsForCDServicesSearchForm\" ||\n      //     selectedTabData.taskType === \"showAccountingReportsSelectingForm\" ||\n      //     selectedTabData.taskType === \"showCurrencyRatesSearchForm\" ||\n      //     selectedTabData.taskType === \"showServiceTypesSearchForm\" ||\n      //     selectedTabData.taskType === \"showServiceGroupsSearchForm\" ||\n      //     selectedTabData.taskType === \"showImportFileGIKForm\" ||\n      //     selectedTabData.taskType === \"showQuestinariesGIKSearchForm\" ||\n      //     selectedTabData.taskType === \"showAccountsGIKSearchForm\" ||\n      //     selectedTabData.taskType === \"showReportsSelectingForm\" ||\n      //     selectedTabData.taskType === \"showTariffsRegistrarsSearchForm\" ||\n      //     selectedTabData.taskType === \"showTradesSearchForm\" ||\n      //     selectedTabData.taskType === \"showContractsSearchForm\" ||\n      //     selectedTabData.taskType === \"CorporativeActionsForm\" ||\n      //     selectedTabData.taskType === \"showStockSecuritySearchForm\" ||\n      //     selectedTabData.taskType === \"showStockCurrencySearchForm\" ||\n      //     selectedTabData.taskType === \"showUploadDataToTSForm\" ||\n      //     selectedTabData.taskType === \"showLoadDataFromTSForm\" ||\n      //     selectedTabData.taskType === \"showFormsEditForm\" ||\n      //     selectedTabData.taskType === \"showTariffsCDSearchForm\" ||\n      //     selectedTabData.taskType === \"showFormsSearchForm\" ||\n      //     selectedTabData.taskType === \"showAccountingEntrySearchForm\" ||\n      //     selectedTabData.taskType === \"showSecuritiesOrdersHistorySearchForm\" ||\n      //     selectedTabData.taskType === \"showCurrenciesOrdersHistorySearchForm\" ||\n      //     selectedTabData.taskType === \"showSecuritiesTradesHistorySearchForm\" ||\n      //     selectedTabData.taskType === \"showCurrenciesTradesHistorySearchForm\" ||\n      //     selectedTabData.taskType === \"showLoadDataFromTSSecuritiesForm\" ||\n      //     selectedTabData.taskType === \"showUploadDataToTSSecuritiesForm\" ||\n      //     selectedTabData.taskType === \"showLoadDataFromTSCurrenciesForm\" ||\n      //     selectedTabData.taskType === \"showUploadDataToTSCurrenciesForm\" ||\n      //     selectedTabData.taskType === \"showOperationDayForm\" ||\n      //     selectedTabData.taskType === \"showRegistrarsSearchForm\" ||\n      //     selectedTabData.taskType === \"showTariffsCorrDepositorySearchForm\" ||\n      //     selectedTabData.taskType === \"showCoefficientDepositorsSearchForm\" ||\n      //     selectedTabData.taskType === \"showInstructionsTypeSelectingForm\" ||\n      //     selectedTabData.taskType === \"showReportsCreatingForm\" ||\n      //     selectedTabData.taskType === \"showTransferOrdersSearchForm\" ||\n      //     selectedTabData.taskType === \"corporativeActionsMainForm\" ||\n      //     selectedTabData.taskType === \"showCorrDepositoriesSearchForm\" ||\n      //     selectedTabData.taskType === \"showNewSecurityApplicationsSearchForm\" ||\n      //     selectedTabData.taskType === \"showMortgageSecuritiesSearchForm\" ||\n      //     selectedTabData.taskType === \"showExchangeTSFilesSearchForm\" ||\n      //     selectedTabData.taskType === \"showExchangeTSFilesListForm\" ||\n      //     selectedTabData.taskType === \"error\") {\n      //     sendFieldValues(commandJson)\n      //     closeTab(tabId)\n      //   }\n      //   else handleOpenSwal(\"Вы действительно хотите закрыть вкладку?\", { yes: \"Да\", no: \"Нет\" }, tabId)\n      // }\n    }\n  }\n  // Custom allert component\n  function handleOpenSwal(text, swalButtons, tabId) {\n    return (\n      swal({\n        text: text,\n        icon: \"warning\",\n        buttons: swalButtons\n      })\n        .then((click) => {\n          if (click === \"yes\") {\n            handleCloseCurrentTabModal(tabId)\n          }\n        })\n    )\n  }\n  // Close current tab from opened alert component\n  function handleCloseCurrentTabModal(tabId) {\n    var selectedTabData = tabData.get(tabId)\n    var commandJson =\n    {\n      commandType: \"completeTask\",\n      session_id: selectedTabData.session_id,\n      process_id: selectedTabData.process_id,\n      taskID: selectedTabData.taskID,\n      userId: userProfile.userId,\n      token: \"Bearer \" + keycloak.token,\n      variables: {\n        userAction: { value: \"cancel\" },\n        userId: { value: userProfile.userId },\n        userRole: { value: userProfile.userRole }\n      }\n    }\n    sendFieldValues(commandJson)\n    closeTab(tabId)\n  }\n\n  // wrap up menu items\n  function handleOpenMenuClick(name) {\n    // console.log(\"Event\", name)\n    for (var i = 0; i < menuItemStates.length; i++) {\n      if (menuItemStates[i].name === name) {\n        if (menuItemStates[i].state === true) {\n          menuItemStates[i].state = false\n        }\n        else {\n          menuItemStates[i].state = true\n        }\n      }\n    }\n    setOpennav(!opennav)\n  }\n  // launch process related to menu button\n  function handleMenuButtonClick(button) {\n    // console.log(\"Menu button clicked\", button)\n    if (button.name !== \"insertForm\" && button.name !== \"redeploy\") {\n      var process_id = getUUID()\n      let updatedTabs = tabs.slice()\n      updatedTabs.push({ id: process_id, name: process_id, label: button.parentLabel + \" \" + tabCounter })\n      setTabs(updatedTabs)\n      setSelectedTab(process_id)\n      setTabCounter(tabCounter + 1)\n    }\n    const commandJson =\n    {\n      commandType: button.commandType,\n      processKey: button.processKey,\n      process_id: process_id,\n      session_id: session_id,\n      userId: userProfile.userId,\n      token: \"Bearer \" + keycloak.token,\n      variables: {\n        user_session_id: { value: session_id },\n        process_id: { value: process_id },\n        userAction: { value: \"filter\" },\n        userId: { value: userProfile.userId },\n        userRole: { value: userProfile.userRole },\n        tabLabel: { value: button.parentLabel },\n        authorization: { value: \"Bearer \" + keycloak.token }\n      }\n    }\n    sendFieldValues(commandJson)\n    console.log(\"Menu Button \", commandJson.variables)\n  }\n  function getUUID() {\n    const uuidv1 = require(\"uuid/v1\")\n    return uuidv1()\n  }\n  async function handleTabChange(tabId) {\n    setSelectedTab(tabId)\n    console.log(\"TAB CHANGE\", tabId)\n  }\n  function clearTabData(process_id) {\n    tabData.remove(process_id)\n    setCurrTaskId(getUUID())\n    // console.log(\"Clearing TabData\", tabData, \"ID\", process_id)\n  }\n  // close selected tab clear it\"s data from cache & change tab counter\n  function closeTab(process_id) {\n    if (process_id !== undefined) {\n      // console.log(\"Closing TAB\", process_id)\n      let copyTabs = [...tabs]\n      let newTabs = []\n      for (var i = 0; i < copyTabs.length; i++) {\n        if (copyTabs[i].id !== process_id) {\n          newTabs.push(copyTabs[i])\n        }\n        else {\n          // console.log(\"TAB TO CLOSE\", copyTabs[i].id, i)\n          if (i > 0 && newTabs.length > 0) {\n            setSelectedTab(newTabs[i - 1].id)\n          }\n          else {\n            if (copyTabs.length > 1) {\n              setSelectedTab(copyTabs[1].id)\n            }\n            else { setSelectedTab(null) }\n          }\n        }\n      }\n      // console.log(\"TABS\", newTabs, newTabs.length)\n      if (newTabs.length === 0) {\n        setTabCounter(1)\n      }\n      setTabs(newTabs)\n    }\n    // // console.log(\"Closing TAB\", process_id)\n    // let updatedTabs = tabs.slice()\n    // for (i = 0; i < updatedTabs.length; i++) {\n    //   if (updatedTabs[i].id === process_id) {\n    //     // console.log(\"INDEX\", i)\n    //     updatedTabs.splice(i, 1)\n    //   }\n    // }\n    // if (Object.keys(updatedTabs).length === 0) {\n    //   setSelectedTab(null)\n    //   setTabCounter(1)\n    // }\n    // else {\n    //   setSelectedTab(updatedTabs[0].id)\n    //   setTabs(updatedTabs)\n    // }\n  }\n  // Creating Menu Levels 1-3\n  function getLevel1Items(level1, index) {\n    // console.log(\"Creating Menu menuItemStates\", menuItemStates)\n    if (level1.level2 === undefined) {\n      return (\n        <ListItem button\n          className={classesnav.level1}\n          onClick={() => handleMenuButtonClick(level1)}\n        >\n          <ExitToAppIcon />\n          <div className={classesnav.listItemText}>{openDrawer === true ? level1.label : \"\"}</div>\n        </ListItem>\n      )\n    }\n    else {\n      for (var i = 0; i < menuItemStates.length; i++) {\n        if (menuItemStates[i].name === level1.name) {\n          return (\n            <List key={index}>\n              <ListItem\n                button\n                className={classesnav.level1}\n                onClick={() => handleOpenMenuClick(level1.name)}\n              >\n                <AddCircleIcon style={{ height: 20 }} />\n                <div className={classesnav.listItemText} style={{ \"fontWeight\": \"bold\" }}>{openDrawer === true ? level1.label : \"\"}</div>\n                {(menuItemStates[i].state === true) ? <ExpandLess /> : <ExpandMore />}\n              </ListItem>\n              <Collapse in={menuItemStates[i].state} timeout=\"auto\" unmountOnExit>\n                {level1.level2.map((level2Item, index) =>\n                  getLevel2Items(level2Item, index)\n                )}\n              </Collapse>\n            </List>\n          )\n        }\n      }\n    }\n  }\n  function getLevel2Items(level2, index) {\n    // console.log(\"Level2\", level2)\n    if (level2.level3 === undefined) {\n      return (\n        <ListItem button\n          className={classesnav.level2}\n          key={index}\n          onClick={() => handleMenuButtonClick(level2)}\n        >\n          <ExitToAppIcon style={{ height: 20 }} />\n          <div className={classesnav.listItemText}>{openDrawer === true ? level2.label : \"\"}</div>\n        </ListItem>\n      )\n    }\n    else {\n      for (var i = 0; i < menuItemStates.length; i++) {\n        if (menuItemStates[i].name === level2.name) {\n          return (\n            <List component=\"div\" disablePadding key={index}>\n              <ListItem button\n                className={classesnav.level2}\n                key={index}\n                onClick={() => handleOpenMenuClick(level2.name)}\n              >\n                <AddCircleIcon style={{ height: 20 }} />\n                <div className={classesnav.listItemText} style={{ \"fontWeight\": \"bold\" }}>{openDrawer === true ? level2.label : \"\"}</div>\n                {(menuItemStates[i].state === true) ? <ExpandLess /> : <ExpandMore />}\n              </ListItem>\n              <Collapse in={menuItemStates[i].state} timeout=\"auto\" unmountOnExit>\n                {level2.level3.map((level3Item, index) =>\n                  getLevel3Items(level3Item, index)\n                )}\n              </Collapse>\n            </List>\n          )\n        }\n      }\n    }\n  }\n  function getLevel3Items(level3, index) {\n    return (\n      <ListItem button\n        className={classesnav.level3}\n        key={index}\n        onClick={() => handleMenuButtonClick(level3)}\n      >\n        <ExitToAppIcon style={{ height: 20, color: \"grey\", marginLeft: \"4px\" }} />\n        <div className={classesnav.listItemText}>{openDrawer === true ? level3.label : \"\"}</div>\n      </ListItem>\n    )\n  }\n  if (menuItemStates.length === 0) {\n    return (\n      <div align=\"center\" style={{ paddingTop: 20 }}>\n        <CircularProgress />\n        <div>Loading...</div>\n      </div>\n    )\n  }\n  function handleOperDayClick() {\n    if (userProfile.userRole === \"1\" || userProfile.userRole === \"7\") {\n      handleMenuButtonClick({ commandType: \"launchProcess\", processKey: \"process_e79e1386-4473-4d35-8106-acd3fafaa129\", parentLabel: \"Операц-й день\" })\n    }\n  }\n  function currencyBeautifier(currency) {\n    // return currency\n    // console.log(\"CUR\", currency)\n    try {\n      let cur = parseFloat(currency).toString()\n      let parts\n      try {\n        parts = cur.split(\".\")\n      }\n      catch (er) {\n        // console.log(\"ERR Parsing Float\", er)\n        parts = [cur, \"0\"]\n      }\n      // console.log(\"PARTS\", parts)\n      let numberPart = parts[0]\n      let thousands = /\\B(?=(\\d{3})+(?!\\d))/g\n      let decimalPart = parts[1]\n      let newCur = numberPart.replace(thousands, \" \")\n      let spDecPart\n      let newDecPart = \"\"\n      try {\n        spDecPart = decimalPart.split('')\n        let numberStarted = false\n        for (let i = spDecPart.length - 1; i > -1; i--) {\n          if (spDecPart[i] === \"0\") {\n            if (numberStarted === true) {\n              newDecPart = spDecPart[i] + newDecPart\n            }\n          }\n          else {\n            numberStarted = true\n            newDecPart = spDecPart[i] + newDecPart\n          }\n        }\n      }\n      catch (er) {\n        // console.log(\"ERR parsing Dec part\", er)\n      }\n\n      newCur = newCur + (newDecPart ? \".\" + newDecPart : \"\")\n      return newCur\n    }\n    catch (er) {\n      console.log(\"ERR Parsing Float\", er)\n      return currency\n    }\n  }\n  function intBeautifier(int) {\n    try {\n      let strInt = int.toString()\n      const thousands = /\\B(?=(\\d{3})+(?!\\d))/g\n      let newInt = strInt.replace(thousands, \" \")\n      return newInt\n    }\n    catch (er) {\n      return int\n    }\n  }\n  return (\n    <Grid>\n      <div className={classes.root}>\n        <CssBaseline />\n        <AppBar style={{ position: \"fixed\" }} className={clsx(classes.appBar, openDrawer && classes.appBarShift)}>\n          <Toolbar className={classes.toolbar}>\n            <IconButton\n              edge=\"start\"\n              color=\"inherit\"\n              aria-label=\"open drawer\"\n              onClick={handleDrawerOpen}\n              className={clsx(classes.menuButton, openDrawer && classes.menuButtonHidden)}\n            >\n              <MenuIcon />\n            </IconButton>\n\n            <Typography component=\"h1\" variant=\"h6\" color=\"inherit\" className={classes.title}>\n              ЦД\n            </Typography>\n            {userProfile.userId !== undefined &&\n              <table>\n                <tbody>\n                  <tr>\n                    <td style={{ paddingRight: 15 }}>\n                      {moment(new Date()).format(\"DD.MM.YYYY\")}\n                    </td>\n                    {operDayIsOpened !== null &&\n                      <td\n                        style={{ paddingRight: 15, cursor: \"pointer\" }}\n                        onClick={() => handleOperDayClick()}\n                      >\n                        Операционный день: {operDayIsOpened === true ? \"Открыт\" : \"Закрыт\"}\n                      </td>\n                    }\n                    {operDayIsOpened !== null && operDayIsOpened === false &&\n                      <td style={{ paddingRight: 15 }}>\n                        {lastClosedDate}\n                      </td>\n                    }\n\n                    <td>\n                      <Badge badgeContent={unreadDistributions} color=\"primary\">\n                        <EmailIcon\n                          style={{ cursor: \"pointer\" }}\n                          fontSize=\"large\"\n                          color=\"white\"\n                          onClick={() => handleMenuButtonClick({ commandType: \"launchProcess\", processKey: \"process_998ca68e-ee45-4b5b-ba23-5b9af4a34d38\", parentLabel: \"КД\" })}\n                        />\n                      </Badge>\n                    </td>\n                    {(userProfile.userRole === \"1\" || userProfile.userRole === \"7\") &&\n                      <td style={{ paddingRight: 15 }}>\n                        <Badge badgeContent={unreadInstructions} color={unreadInstructions > 0 ? \"secondary\" : \"primary\"}>\n                          <Notification\n                            style={{ cursor: \"pointer\" }}\n                            fontSize=\"large\"\n                            color={urgentUnreadInstructions === true ? \"secondary\" : \"white\"}\n                            onClick={() => handleMenuButtonClick({ commandType: \"launchProcess\", processKey: \"process_892bad05-cc0e-46b2-8e76-6aa1fed7cde0\", parentLabel: \"Поручения\" })}\n                          />\n                        </Badge>\n                      </td>\n                    }\n                  </tr>\n                </tbody>\n              </table>\n            }\n            <AccountCircleIcon fontSize=\"large\" />\n            {!!keycloak.authenticated && (\n              <table>\n                <tbody>\n                  <tr>\n                    <td>\n                      <table>\n                        <tbody>\n                          <tr>\n                            <td style={{ fontSize: 12 }}>ФИО:</td>\n                            <td style={{ fontSize: 12 }}>{userProfile.firstName + \" \" + userProfile.lastName.substring(0, 1) + \".\"}</td>\n                          </tr>\n                          <tr>\n                            <td style={{ fontSize: 12 }}>Роль:</td>\n                            <td style={{ fontSize: 12 }}>{userRoleLabel}</td>\n                          </tr>\n                        </tbody>\n                      </table>\n                    </td>\n                    <td>\n                      <Typography>\n                        <IconButton color=\"inherit\" style={{ fontSize: 14 }} onClick={() => keycloak.logout()}>\n                          Выйти\n                        </IconButton>\n                      </Typography>\n                    </td>\n                  </tr>\n                </tbody>\n              </table>\n            )}\n          </Toolbar>\n        </AppBar>\n        <Drawer\n          variant=\"permanent\"\n          classes={{\n            paper: clsx(classes.drawerPaper, !openDrawer && classes.drawerPaperClose),\n          }}\n          open={openDrawer}\n        >\n          <div className={classes.toolbarIcon}>\n            <img src=\"favicon.ico\" height=\"65px\" width=\"65px\" style={{ marginRight: \"100px\" }}></img>\n            <IconButton onClick={handleDrawerClose}>\n              <ChevronLeftIcon />\n            </IconButton>\n          </div>\n          <Divider />\n          {routes.map((level1, index) => (\n            getLevel1Items(level1, index)\n          ))}\n        </Drawer>\n\n        <main className={classes.content}>\n          <a name=\"top\" />\n          {/* <div className={classes.appBarSpacer}/> */}\n          <Grid style={{ paddingLeft: (openDrawer === true) ? drawerWidth : 65 }}>\n            <AppBar color=\"default\" style={{ paddingLeft: (openDrawer === true) ? drawerWidth : 65 }}>\n              <Tabs\n                key={currTaskId}\n                style={{ height: \"110px\", paddingTop: \"60px\" }}\n                position=\"fixed\"\n                value={selectedTab}\n                // onChange={(event, newValue)=> handleTabChange(event, newValue)}\n                indicatorColor=\"primary\"\n                textColor=\"primary\"\n                variant=\"scrollable\"\n                scrollButtons=\"auto\"\n              >\n                {tabs.map((tab, index) => (\n                  <Tab\n                    key={tab.id}\n                    index={index}\n                    onMouseDown={() => handleTabChange(tab.id)}\n                    label={\n                      <Grid style={{ fontSize: 10 }}>\n                        {tab.label}\n                        <IconButton onClick={() => handleCloseCurrentTab(tab.id)}>\n                          <CloseIcon style={{ fontSize: \"medium\", color: \"black\" }} />\n                        </IconButton>\n                      </Grid>\n                    }\n                    value={tab.id}\n                    {...a11yProps(tab.id)}\n                  >\n                  </Tab>\n                ))}\n              </Tabs>\n            </AppBar>\n            {webSocketMessage !== null &&\n              tabs.map(tab => (\n                <TabPanel\n                  // position=\"fixed\"\n                  currentTab={tab.id}\n                  selectedTab={selectedTab}\n                  key={tab.id}\n                  style={{ paddingLeft: 10, fontSize: \"0.9rem\" }}\n                  value={tab.id}\n                >\n                  <ComponentManager\n                    // VARS\n                    api={api}\n                    userProfile={userProfile}\n                    selectedTab={selectedTab}\n                    id={tab.id}\n                    key={tab.id}\n                    esInn={esInn}\n                    esUserFullName={esUserFullName}\n                    esExpiredDate={esExpiredDate}\n                    // closeTab={closeTab}\n                    // mailRest={mailRest}\n                    operDayIsOpened={operDayIsOpened}\n                    userTask={tabData.get(tab.id)}\n                    // FUNCS\n                    callSuccessToast={callSuccessToast}\n                    callErrorToast={callErrorToast}\n                    sendFieldValues={sendFieldValues}\n                    handleCloseCurrentTab={handleCloseCurrentTab}\n                    clearTabData={clearTabData}\n                    updateMailDistributions={updateMailDistributions}\n                    reduceMailDistributions={reduceMailDistributions}\n                    setEsUserFullName={setEsUserFullName}\n                    setEsInn={setEsInn}\n                    setEsExpiredDate={setEsExpiredDate}\n                    currencyBeautifier={currencyBeautifier}\n                    intBeautifier={intBeautifier}\n                  // downloadReport={downloadReport}\n                  />\n                </TabPanel>\n              ))\n            }\n          </Grid>\n          <Modal\n            open={showModalEnterPin}\n            // onClose={handleCloseModalEnterPin}\n            aria-labelledby=\"simple-modal-title\"\n            aria-describedby=\"simple-modal-description\"\n          >\n            <div style={modalStyle} className={classes.modal}>\n              <h3 id=\"simple-modal-title\">Введите ПИН код Рутокена</h3>\n              <FormControl variant=\"outlined\" style={{ width: \"100%\" }} error={wrongPin}>\n                <InputLabel htmlFor=\"outlined-adornment-password\">PIN</InputLabel>\n                <OutlinedInput\n                  type={showPin ? 'text' : 'password'}\n                  defaultValue={rutokenPin}\n                  onChange={handlePinChange}\n                  onKeyPress={onKeyPressModalEnterPin}\n                  autoFocus\n                  endAdornment={\n                    <InputAdornment position=\"end\">\n                      <IconButton\n                        aria-label=\"toggle password visibility\"\n                        onClick={handleClickShowPin}\n                        edge=\"end\"\n                      >\n                        {showPin ? <Visibility /> : <VisibilityOff />}\n                      </IconButton>\n                    </InputAdornment>\n                  }\n                  labelWidth={25}\n                />\n              </FormControl>\n              {wrongPin === true && <p color=\"red\">Не верный PIN</p>}\n              <Button\n                variant=\"contained\"\n                onClick={() => buttonClick(\"SignButton\")}\n                style={{\n                  margin: 3,\n                  height: 32,\n                  fontSize: 12,\n                  color: \"white\",\n                  backgroundColor: \"#2862F4\"\n                }}\n              >Ок\n              </Button>\n            </div>\n          </Modal>\n          <ToastContainer />\n          <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\" style={{ paddingLeft: openDrawer === true ? drawerWidth : 65, paddingTop: 10 }}>\n            {\"Copyright © \" + new Date().getFullYear() + \" Intersoft Ltd. All rights reserved. \"}\n          </Typography>\n          <table\n            style={{ paddingLeft: openDrawer === true ? drawerWidth : 65 }}\n          >\n            <tr>\n              <td width=\"20%\">\n                <img name=\"USAID_logo\" height={\"80px\"} width=\"auto\" src={\"./USAID_logo.png\"} />\n              </td>\n              <td width=\"80%\">\n                <p style={{ align: \"center\", fontSize: 10 }}>\n                  {\"Данная автоматизированная информационная система стала возможной благодаря помощи американского народа, оказанной через Агентство США по международному развитию (USAID). Закрытое Акционерное Общество (ЗАО) «Центральный депозитарий» Кыргызской Республики несет ответственность за содержание системы, которое не обязательно отражает позицию USAID или Правительства США.\"}\n                </p>\n              </td>\n            </tr>\n          </table>\n          <IconButton href=\"#top\" style={hrefStyleTop} className={classes.hrefStyleTop}>\n            <ArrowUpwardRoundedIcon />\n          </IconButton>\n          <IconButton href=\"#bottom\" style={hrefStyleBottom} className={classes.hrefStyleBottom}>\n            <ArrowDownwardIcon />\n          </IconButton>\n          <a name=\"bottom\" />\n        </main>\n      </div>\n    </Grid>\n  )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}